var XA=Object.defineProperty;var JA=(t,e,n)=>e in t?XA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yt=(t,e,n)=>JA(t,typeof e!="symbol"?e+"":e,n);function LS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function MS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jS={exports:{}},Jd={},FS={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=Symbol.for("react.element"),ZA=Symbol.for("react.portal"),eP=Symbol.for("react.fragment"),tP=Symbol.for("react.strict_mode"),nP=Symbol.for("react.profiler"),rP=Symbol.for("react.provider"),iP=Symbol.for("react.context"),sP=Symbol.for("react.forward_ref"),oP=Symbol.for("react.suspense"),aP=Symbol.for("react.memo"),lP=Symbol.for("react.lazy"),f0=Symbol.iterator;function uP(t){return t===null||typeof t!="object"?null:(t=f0&&t[f0]||t["@@iterator"],typeof t=="function"?t:null)}var VS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},US=Object.assign,BS={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=BS,this.updater=n||VS}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $S(){}$S.prototype=Ja.prototype;function uy(t,e,n){this.props=t,this.context=e,this.refs=BS,this.updater=n||VS}var cy=uy.prototype=new $S;cy.constructor=uy;US(cy,Ja.prototype);cy.isPureReactComponent=!0;var p0=Array.isArray,zS=Object.prototype.hasOwnProperty,hy={current:null},WS={key:!0,ref:!0,__self:!0,__source:!0};function HS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zS.call(e,r)&&!WS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rc,type:t,key:s,ref:o,props:i,_owner:hy.current}}function cP(t,e){return{$$typeof:rc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dy(t){return typeof t=="object"&&t!==null&&t.$$typeof===rc}function hP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var g0=/\/+/g;function op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hP(""+t.key):e.toString(36)}function yh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rc:case ZA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+op(o,0):r,p0(i)?(n="",t!=null&&(n=t.replace(g0,"$&/")+"/"),yh(i,e,n,"",function(c){return c})):i!=null&&(dy(i)&&(i=cP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(g0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",p0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+op(s,a);o+=yh(s,e,n,l,i)}else if(l=uP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+op(s,a++),o+=yh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uc(t,e,n){if(t==null)return t;var r=[],i=0;return yh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function dP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var On={current:null},_h={transition:null},fP={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:_h,ReactCurrentOwner:hy};function qS(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Uc,forEach:function(t,e,n){Uc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uc(t,function(){e++}),e},toArray:function(t){return Uc(t,function(e){return e})||[]},only:function(t){if(!dy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=Ja;Ne.Fragment=eP;Ne.Profiler=nP;Ne.PureComponent=uy;Ne.StrictMode=tP;Ne.Suspense=oP;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;Ne.act=qS;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=US({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zS.call(e,l)&&!WS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:rc,type:t.type,key:i,ref:s,props:r,_owner:o}};Ne.createContext=function(t){return t={$$typeof:iP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rP,_context:t},t.Consumer=t};Ne.createElement=HS;Ne.createFactory=function(t){var e=HS.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:sP,render:t}};Ne.isValidElement=dy;Ne.lazy=function(t){return{$$typeof:lP,_payload:{_status:-1,_result:t},_init:dP}};Ne.memo=function(t,e){return{$$typeof:aP,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=_h.transition;_h.transition={};try{t()}finally{_h.transition=e}};Ne.unstable_act=qS;Ne.useCallback=function(t,e){return On.current.useCallback(t,e)};Ne.useContext=function(t){return On.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return On.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return On.current.useEffect(t,e)};Ne.useId=function(){return On.current.useId()};Ne.useImperativeHandle=function(t,e,n){return On.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return On.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return On.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return On.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return On.current.useReducer(t,e,n)};Ne.useRef=function(t){return On.current.useRef(t)};Ne.useState=function(t){return On.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return On.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return On.current.useTransition()};Ne.version="18.3.1";FS.exports=Ne;var N=FS.exports;const pP=MS(N),gP=LS({__proto__:null,default:pP},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP=N,yP=Symbol.for("react.element"),_P=Symbol.for("react.fragment"),vP=Object.prototype.hasOwnProperty,wP=mP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EP={key:!0,ref:!0,__self:!0,__source:!0};function KS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vP.call(e,r)&&!EP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yP,type:t,key:s,ref:o,props:i,_owner:wP.current}}Jd.Fragment=_P;Jd.jsx=KS;Jd.jsxs=KS;jS.exports=Jd;var m=jS.exports,GS={exports:{}},lr={},QS={exports:{}},YS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,le){var he=Q.length;Q.push(le);e:for(;0<he;){var Ee=he-1>>>1,ye=Q[Ee];if(0<i(ye,le))Q[Ee]=le,Q[he]=ye,he=Ee;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var le=Q[0],he=Q.pop();if(he!==le){Q[0]=he;e:for(var Ee=0,ye=Q.length,Pe=ye>>>1;Ee<Pe;){var Ze=2*(Ee+1)-1,Ke=Q[Ze],at=Ze+1,fe=Q[at];if(0>i(Ke,he))at<ye&&0>i(fe,Ke)?(Q[Ee]=fe,Q[at]=he,Ee=at):(Q[Ee]=Ke,Q[Ze]=he,Ee=Ze);else if(at<ye&&0>i(fe,he))Q[Ee]=fe,Q[at]=he,Ee=at;else break e}}return le}function i(Q,le){var he=Q.sortIndex-le.sortIndex;return he!==0?he:Q.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,_=!1,y=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Q){for(var le=n(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=Q)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=n(c)}}function M(Q){if(w=!1,R(Q),!y)if(n(l)!==null)y=!0,re(V);else{var le=n(c);le!==null&&Ae(M,le.startTime-Q)}}function V(Q,le){y=!1,w&&(w=!1,S(T),T=-1),_=!0;var he=f;try{for(R(le),d=n(l);d!==null&&(!(d.expirationTime>le)||Q&&!P());){var Ee=d.callback;if(typeof Ee=="function"){d.callback=null,f=d.priorityLevel;var ye=Ee(d.expirationTime<=le);le=t.unstable_now(),typeof ye=="function"?d.callback=ye:d===n(l)&&r(l),R(le)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var Ze=n(c);Ze!==null&&Ae(M,Ze.startTime-le),Pe=!1}return Pe}finally{d=null,f=he,_=!1}}var H=!1,v=null,T=-1,x=5,b=-1;function P(){return!(t.unstable_now()-b<x)}function O(){if(v!==null){var Q=t.unstable_now();b=Q;var le=!0;try{le=v(!0,Q)}finally{le?A():(H=!1,v=null)}}else H=!1}var A;if(typeof E=="function")A=function(){E(O)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,je=pe.port2;pe.port1.onmessage=O,A=function(){je.postMessage(null)}}else A=function(){C(O,0)};function re(Q){v=Q,H||(H=!0,A())}function Ae(Q,le){T=C(function(){Q(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,re(V))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var le=3;break;default:le=f}var he=f;f=le;try{return Q()}finally{f=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=f;f=Q;try{return le()}finally{f=he}},t.unstable_scheduleCallback=function(Q,le,he){var Ee=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ee+he:Ee):he=Ee,Q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=he+ye,Q={id:h++,callback:le,priorityLevel:Q,startTime:he,expirationTime:ye,sortIndex:-1},he>Ee?(Q.sortIndex=he,e(c,Q),n(l)===null&&Q===n(c)&&(w?(S(T),T=-1):w=!0,Ae(M,he-Ee))):(Q.sortIndex=ye,e(l,Q),y||_||(y=!0,re(V))),Q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Q){var le=f;return function(){var he=f;f=le;try{return Q.apply(this,arguments)}finally{f=he}}}})(YS);QS.exports=YS;var TP=QS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=N,ar=TP;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XS=new Set,wu={};function Uo(t,e){ka(t,e),ka(t+"Capture",e)}function ka(t,e){for(wu[t]=e,t=0;t<e.length;t++)XS.add(e[t])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yg=Object.prototype.hasOwnProperty,IP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m0={},y0={};function CP(t){return yg.call(y0,t)?!0:yg.call(m0,t)?!1:IP.test(t)?y0[t]=!0:(m0[t]=!0,!1)}function RP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xP(t,e,n,r){if(e===null||typeof e>"u"||RP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new Dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new Dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new Dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new Dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new Dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new Dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new Dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new Dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new Dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var fy=/[\-:]([a-z])/g;function py(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fy,py);cn[e]=new Dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fy,py);cn[e]=new Dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fy,py);cn[e]=new Dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function gy(t,e,n,r){var i=cn.hasOwnProperty(e)?cn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xP(e,n,i,r)&&(n=null),r||i===null?CP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hi=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bc=Symbol.for("react.element"),sa=Symbol.for("react.portal"),oa=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),_g=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),e1=Symbol.for("react.offscreen"),_0=Symbol.iterator;function Sl(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,ap;function zl(t){if(ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ap=e&&e[1]||""}return`
`+ap+t}var lp=!1;function up(t,e){if(!t||lp)return"";lp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zl(t):""}function bP(t){switch(t.tag){case 5:return zl(t.type);case 16:return zl("Lazy");case 13:return zl("Suspense");case 19:return zl("SuspenseList");case 0:case 2:case 15:return t=up(t.type,!1),t;case 11:return t=up(t.type.render,!1),t;case 1:return t=up(t.type,!0),t;default:return""}}function Eg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oa:return"Fragment";case sa:return"Portal";case _g:return"Profiler";case my:return"StrictMode";case vg:return"Suspense";case wg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZS:return(t.displayName||"Context")+".Consumer";case JS:return(t._context.displayName||"Context")+".Provider";case yy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _y:return e=t.displayName||null,e!==null?e:Eg(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return Eg(t(e))}catch{}}return null}function AP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eg(e);case 8:return e===my?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function t1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PP(t){var e=t1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $c(t){t._valueTracker||(t._valueTracker=PP(t))}function n1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=t1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tg(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function v0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function r1(t,e){e=e.checked,e!=null&&gy(t,"checked",e,!1)}function Sg(t,e){r1(t,e);var n=Ms(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ig(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ig(t,e.type,Ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function w0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ig(t,e,n){(e!=="number"||Qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wl=Array.isArray;function va(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ms(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function E0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Wl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ms(n)}}function i1(t,e){var n=Ms(e.value),r=Ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function s1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?s1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zc,o1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zc=zc||document.createElement("div"),zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kP=["Webkit","ms","Moz","O"];Object.keys(eu).forEach(function(t){kP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eu[e]=eu[t]})});function a1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eu.hasOwnProperty(t)&&eu[t]?(""+e).trim():e+"px"}function l1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=a1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NP=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xg(t,e){if(e){if(NP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function bg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=null;function vy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pg=null,wa=null,Ea=null;function S0(t){if(t=oc(t)){if(typeof Pg!="function")throw Error(J(280));var e=t.stateNode;e&&(e=rf(e),Pg(t.stateNode,t.type,e))}}function u1(t){wa?Ea?Ea.push(t):Ea=[t]:wa=t}function c1(){if(wa){var t=wa,e=Ea;if(Ea=wa=null,S0(t),e)for(t=0;t<e.length;t++)S0(e[t])}}function h1(t,e){return t(e)}function d1(){}var cp=!1;function f1(t,e,n){if(cp)return t(e,n);cp=!0;try{return h1(t,e,n)}finally{cp=!1,(wa!==null||Ea!==null)&&(d1(),c1())}}function Tu(t,e){var n=t.stateNode;if(n===null)return null;var r=rf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var kg=!1;if(Mi)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){kg=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{kg=!1}function OP(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var tu=!1,Yh=null,Xh=!1,Ng=null,DP={onError:function(t){tu=!0,Yh=t}};function LP(t,e,n,r,i,s,o,a,l){tu=!1,Yh=null,OP.apply(DP,arguments)}function MP(t,e,n,r,i,s,o,a,l){if(LP.apply(this,arguments),tu){if(tu){var c=Yh;tu=!1,Yh=null}else throw Error(J(198));Xh||(Xh=!0,Ng=c)}}function Bo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function p1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I0(t){if(Bo(t)!==t)throw Error(J(188))}function jP(t){var e=t.alternate;if(!e){if(e=Bo(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return I0(i),t;if(s===r)return I0(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function g1(t){return t=jP(t),t!==null?m1(t):null}function m1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=m1(t);if(e!==null)return e;t=t.sibling}return null}var y1=ar.unstable_scheduleCallback,C0=ar.unstable_cancelCallback,FP=ar.unstable_shouldYield,VP=ar.unstable_requestPaint,At=ar.unstable_now,UP=ar.unstable_getCurrentPriorityLevel,wy=ar.unstable_ImmediatePriority,_1=ar.unstable_UserBlockingPriority,Jh=ar.unstable_NormalPriority,BP=ar.unstable_LowPriority,v1=ar.unstable_IdlePriority,Zd=null,oi=null;function $P(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(Zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:HP,zP=Math.log,WP=Math.LN2;function HP(t){return t>>>=0,t===0?32:31-(zP(t)/WP|0)|0}var Wc=64,Hc=4194304;function Hl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hl(a):(s&=o,s!==0&&(r=Hl(s)))}else o=n&~i,o!==0?r=Hl(o):s!==0&&(r=Hl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Br(e),i=1<<n,r|=t[n],e&=~i;return r}function qP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Br(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=qP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Og(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w1(){var t=Wc;return Wc<<=1,!(Wc&4194240)&&(Wc=64),t}function hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Br(e),t[e]=n}function GP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Br(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Br(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xe=0;function E1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var T1,Ty,S1,I1,C1,Dg=!1,qc=[],Es=null,Ts=null,Ss=null,Su=new Map,Iu=new Map,ds=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R0(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(e.pointerId)}}function Cl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=oc(e),e!==null&&Ty(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function YP(t,e,n,r,i){switch(e){case"focusin":return Es=Cl(Es,t,e,n,r,i),!0;case"dragenter":return Ts=Cl(Ts,t,e,n,r,i),!0;case"mouseover":return Ss=Cl(Ss,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Su.set(s,Cl(Su.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Iu.set(s,Cl(Iu.get(s)||null,t,e,n,r,i)),!0}return!1}function R1(t){var e=uo(t.target);if(e!==null){var n=Bo(e);if(n!==null){if(e=n.tag,e===13){if(e=p1(n),e!==null){t.blockedOn=e,C1(t.priority,function(){S1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ag=r,n.target.dispatchEvent(r),Ag=null}else return e=oc(n),e!==null&&Ty(e),t.blockedOn=n,!1;e.shift()}return!0}function x0(t,e,n){vh(t)&&n.delete(e)}function XP(){Dg=!1,Es!==null&&vh(Es)&&(Es=null),Ts!==null&&vh(Ts)&&(Ts=null),Ss!==null&&vh(Ss)&&(Ss=null),Su.forEach(x0),Iu.forEach(x0)}function Rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Dg||(Dg=!0,ar.unstable_scheduleCallback(ar.unstable_NormalPriority,XP)))}function Cu(t){function e(i){return Rl(i,t)}if(0<qc.length){Rl(qc[0],t);for(var n=1;n<qc.length;n++){var r=qc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Es!==null&&Rl(Es,t),Ts!==null&&Rl(Ts,t),Ss!==null&&Rl(Ss,t),Su.forEach(e),Iu.forEach(e),n=0;n<ds.length;n++)r=ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ds.length&&(n=ds[0],n.blockedOn===null);)R1(n),n.blockedOn===null&&ds.shift()}var Ta=Hi.ReactCurrentBatchConfig,ed=!0;function JP(t,e,n,r){var i=Xe,s=Ta.transition;Ta.transition=null;try{Xe=1,Sy(t,e,n,r)}finally{Xe=i,Ta.transition=s}}function ZP(t,e,n,r){var i=Xe,s=Ta.transition;Ta.transition=null;try{Xe=4,Sy(t,e,n,r)}finally{Xe=i,Ta.transition=s}}function Sy(t,e,n,r){if(ed){var i=Lg(t,e,n,r);if(i===null)Ep(t,e,r,td,n),R0(t,r);else if(YP(i,t,e,n,r))r.stopPropagation();else if(R0(t,r),e&4&&-1<QP.indexOf(t)){for(;i!==null;){var s=oc(i);if(s!==null&&T1(s),s=Lg(t,e,n,r),s===null&&Ep(t,e,r,td,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ep(t,e,r,null,n)}}var td=null;function Lg(t,e,n,r){if(td=null,t=vy(r),t=uo(t),t!==null)if(e=Bo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=p1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return td=t,null}function x1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UP()){case wy:return 1;case _1:return 4;case Jh:case BP:return 16;case v1:return 536870912;default:return 16}default:return 16}}var ys=null,Iy=null,wh=null;function b1(){if(wh)return wh;var t,e=Iy,n=e.length,r,i="value"in ys?ys.value:ys.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wh=i.slice(t,1<r?1-r:void 0)}function Eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kc(){return!0}function b0(){return!1}function ur(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kc:b0,this.isPropagationStopped=b0,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kc)},persist:function(){},isPersistent:Kc}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cy=ur(Za),sc=St({},Za,{view:0,detail:0}),ek=ur(sc),dp,fp,xl,ef=St({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ry,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xl&&(xl&&t.type==="mousemove"?(dp=t.screenX-xl.screenX,fp=t.screenY-xl.screenY):fp=dp=0,xl=t),dp)},movementY:function(t){return"movementY"in t?t.movementY:fp}}),A0=ur(ef),tk=St({},ef,{dataTransfer:0}),nk=ur(tk),rk=St({},sc,{relatedTarget:0}),pp=ur(rk),ik=St({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),sk=ur(ik),ok=St({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ak=ur(ok),lk=St({},Za,{data:0}),P0=ur(lk),uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ck={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hk[t])?!!e[t]:!1}function Ry(){return dk}var fk=St({},sc,{key:function(t){if(t.key){var e=uk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ck[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ry,charCode:function(t){return t.type==="keypress"?Eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pk=ur(fk),gk=St({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=ur(gk),mk=St({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ry}),yk=ur(mk),_k=St({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),vk=ur(_k),wk=St({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ek=ur(wk),Tk=[9,13,27,32],xy=Mi&&"CompositionEvent"in window,nu=null;Mi&&"documentMode"in document&&(nu=document.documentMode);var Sk=Mi&&"TextEvent"in window&&!nu,A1=Mi&&(!xy||nu&&8<nu&&11>=nu),N0=" ",O0=!1;function P1(t,e){switch(t){case"keyup":return Tk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var aa=!1;function Ik(t,e){switch(t){case"compositionend":return k1(e);case"keypress":return e.which!==32?null:(O0=!0,N0);case"textInput":return t=e.data,t===N0&&O0?null:t;default:return null}}function Ck(t,e){if(aa)return t==="compositionend"||!xy&&P1(t,e)?(t=b1(),wh=Iy=ys=null,aa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A1&&e.locale!=="ko"?null:e.data;default:return null}}var Rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rk[t.type]:e==="textarea"}function N1(t,e,n,r){u1(r),e=nd(e,"onChange"),0<e.length&&(n=new Cy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ru=null,Ru=null;function xk(t){z1(t,0)}function tf(t){var e=ca(t);if(n1(e))return t}function bk(t,e){if(t==="change")return e}var O1=!1;if(Mi){var gp;if(Mi){var mp="oninput"in document;if(!mp){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),mp=typeof L0.oninput=="function"}gp=mp}else gp=!1;O1=gp&&(!document.documentMode||9<document.documentMode)}function M0(){ru&&(ru.detachEvent("onpropertychange",D1),Ru=ru=null)}function D1(t){if(t.propertyName==="value"&&tf(Ru)){var e=[];N1(e,Ru,t,vy(t)),f1(xk,e)}}function Ak(t,e,n){t==="focusin"?(M0(),ru=e,Ru=n,ru.attachEvent("onpropertychange",D1)):t==="focusout"&&M0()}function Pk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(Ru)}function kk(t,e){if(t==="click")return tf(e)}function Nk(t,e){if(t==="input"||t==="change")return tf(e)}function Ok(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:Ok;function xu(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yg.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function j0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F0(t,e){var n=j0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=j0(n)}}function L1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?L1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M1(){for(var t=window,e=Qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qh(t.document)}return e}function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dk(t){var e=M1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&L1(n.ownerDocument.documentElement,n)){if(r!==null&&by(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=F0(n,s);var o=F0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Lk=Mi&&"documentMode"in document&&11>=document.documentMode,la=null,Mg=null,iu=null,jg=!1;function V0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jg||la==null||la!==Qh(r)||(r=la,"selectionStart"in r&&by(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),iu&&xu(iu,r)||(iu=r,r=nd(Mg,"onSelect"),0<r.length&&(e=new Cy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=la)))}function Gc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ua={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},yp={},j1={};Mi&&(j1=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function nf(t){if(yp[t])return yp[t];if(!ua[t])return t;var e=ua[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j1)return yp[t]=e[n];return t}var F1=nf("animationend"),V1=nf("animationiteration"),U1=nf("animationstart"),B1=nf("transitionend"),$1=new Map,U0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){$1.set(t,e),Uo(e,[t])}for(var _p=0;_p<U0.length;_p++){var vp=U0[_p],Mk=vp.toLowerCase(),jk=vp[0].toUpperCase()+vp.slice(1);zs(Mk,"on"+jk)}zs(F1,"onAnimationEnd");zs(V1,"onAnimationIteration");zs(U1,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(B1,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function B0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MP(r,e,void 0,t),t.currentTarget=null}function z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;B0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;B0(i,a,c),s=l}}}if(Xh)throw t=Ng,Xh=!1,Ng=null,t}function ct(t,e){var n=e[$g];n===void 0&&(n=e[$g]=new Set);var r=t+"__bubble";n.has(r)||(W1(e,t,2,!1),n.add(r))}function wp(t,e,n){var r=0;e&&(r|=4),W1(n,t,r,e)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function bu(t){if(!t[Qc]){t[Qc]=!0,XS.forEach(function(n){n!=="selectionchange"&&(Fk.has(n)||wp(n,!1,t),wp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qc]||(e[Qc]=!0,wp("selectionchange",!1,e))}}function W1(t,e,n,r){switch(x1(e)){case 1:var i=JP;break;case 4:i=ZP;break;default:i=Sy}n=i.bind(null,e,n,t),i=void 0,!kg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ep(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=uo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}f1(function(){var c=s,h=vy(n),d=[];e:{var f=$1.get(t);if(f!==void 0){var _=Cy,y=t;switch(t){case"keypress":if(Eh(n)===0)break e;case"keydown":case"keyup":_=pk;break;case"focusin":y="focus",_=pp;break;case"focusout":y="blur",_=pp;break;case"beforeblur":case"afterblur":_=pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=nk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=yk;break;case F1:case V1:case U1:_=sk;break;case B1:_=vk;break;case"scroll":_=ek;break;case"wheel":_=Ek;break;case"copy":case"cut":case"paste":_=ak;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=k0}var w=(e&4)!==0,C=!w&&t==="scroll",S=w?f!==null?f+"Capture":null:f;w=[];for(var E=c,R;E!==null;){R=E;var M=R.stateNode;if(R.tag===5&&M!==null&&(R=M,S!==null&&(M=Tu(E,S),M!=null&&w.push(Au(E,M,R)))),C)break;E=E.return}0<w.length&&(f=new _(f,y,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",f&&n!==Ag&&(y=n.relatedTarget||n.fromElement)&&(uo(y)||y[ji]))break e;if((_||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?uo(y):null,y!==null&&(C=Bo(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(w=A0,M="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=k0,M="onPointerLeave",S="onPointerEnter",E="pointer"),C=_==null?f:ca(_),R=y==null?f:ca(y),f=new w(M,E+"leave",_,n,h),f.target=C,f.relatedTarget=R,M=null,uo(h)===c&&(w=new w(S,E+"enter",y,n,h),w.target=R,w.relatedTarget=C,M=w),C=M,_&&y)t:{for(w=_,S=y,E=0,R=w;R;R=Jo(R))E++;for(R=0,M=S;M;M=Jo(M))R++;for(;0<E-R;)w=Jo(w),E--;for(;0<R-E;)S=Jo(S),R--;for(;E--;){if(w===S||S!==null&&w===S.alternate)break t;w=Jo(w),S=Jo(S)}w=null}else w=null;_!==null&&$0(d,f,_,w,!1),y!==null&&C!==null&&$0(d,C,y,w,!0)}}e:{if(f=c?ca(c):window,_=f.nodeName&&f.nodeName.toLowerCase(),_==="select"||_==="input"&&f.type==="file")var V=bk;else if(D0(f))if(O1)V=Nk;else{V=Pk;var H=Ak}else(_=f.nodeName)&&_.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(V=kk);if(V&&(V=V(t,c))){N1(d,V,n,h);break e}H&&H(t,f,c),t==="focusout"&&(H=f._wrapperState)&&H.controlled&&f.type==="number"&&Ig(f,"number",f.value)}switch(H=c?ca(c):window,t){case"focusin":(D0(H)||H.contentEditable==="true")&&(la=H,Mg=c,iu=null);break;case"focusout":iu=Mg=la=null;break;case"mousedown":jg=!0;break;case"contextmenu":case"mouseup":case"dragend":jg=!1,V0(d,n,h);break;case"selectionchange":if(Lk)break;case"keydown":case"keyup":V0(d,n,h)}var v;if(xy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else aa?P1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(A1&&n.locale!=="ko"&&(aa||T!=="onCompositionStart"?T==="onCompositionEnd"&&aa&&(v=b1()):(ys=h,Iy="value"in ys?ys.value:ys.textContent,aa=!0)),H=nd(c,T),0<H.length&&(T=new P0(T,t,null,n,h),d.push({event:T,listeners:H}),v?T.data=v:(v=k1(n),v!==null&&(T.data=v)))),(v=Sk?Ik(t,n):Ck(t,n))&&(c=nd(c,"onBeforeInput"),0<c.length&&(h=new P0("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=v))}z1(d,e)})}function Au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tu(t,n),s!=null&&r.unshift(Au(t,s,i)),s=Tu(t,e),s!=null&&r.push(Au(t,s,i))),t=t.return}return r}function Jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Tu(n,s),l!=null&&o.unshift(Au(n,l,a))):i||(l=Tu(n,s),l!=null&&o.push(Au(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Vk=/\r\n?/g,Uk=/\u0000|\uFFFD/g;function z0(t){return(typeof t=="string"?t:""+t).replace(Vk,`
`).replace(Uk,"")}function Yc(t,e,n){if(e=z0(e),z0(t)!==e&&n)throw Error(J(425))}function rd(){}var Fg=null,Vg=null;function Ug(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bg=typeof setTimeout=="function"?setTimeout:void 0,Bk=typeof clearTimeout=="function"?clearTimeout:void 0,W0=typeof Promise=="function"?Promise:void 0,$k=typeof queueMicrotask=="function"?queueMicrotask:typeof W0<"u"?function(t){return W0.resolve(null).then(t).catch(zk)}:Bg;function zk(t){setTimeout(function(){throw t})}function Tp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cu(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function H0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var el=Math.random().toString(36).slice(2),ii="__reactFiber$"+el,Pu="__reactProps$"+el,ji="__reactContainer$"+el,$g="__reactEvents$"+el,Wk="__reactListeners$"+el,Hk="__reactHandles$"+el;function uo(t){var e=t[ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ji]||n[ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=H0(t);t!==null;){if(n=t[ii])return n;t=H0(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[ii]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ca(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function rf(t){return t[Pu]||null}var zg=[],ha=-1;function Ws(t){return{current:t}}function pt(t){0>ha||(t.current=zg[ha],zg[ha]=null,ha--)}function ot(t,e){ha++,zg[ha]=t.current,t.current=e}var js={},An=Ws(js),Wn=Ws(!1),So=js;function Na(t,e){var n=t.type.contextTypes;if(!n)return js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hn(t){return t=t.childContextTypes,t!=null}function id(){pt(Wn),pt(An)}function q0(t,e,n){if(An.current!==js)throw Error(J(168));ot(An,e),ot(Wn,n)}function H1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,AP(t)||"Unknown",i));return St({},n,r)}function sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||js,So=An.current,ot(An,t),ot(Wn,Wn.current),!0}function K0(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=H1(t,e,So),r.__reactInternalMemoizedMergedChildContext=t,pt(Wn),pt(An),ot(An,t)):pt(Wn),ot(Wn,n)}var Ti=null,sf=!1,Sp=!1;function q1(t){Ti===null?Ti=[t]:Ti.push(t)}function qk(t){sf=!0,q1(t)}function Hs(){if(!Sp&&Ti!==null){Sp=!0;var t=0,e=Xe;try{var n=Ti;for(Xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ti=null,sf=!1}catch(i){throw Ti!==null&&(Ti=Ti.slice(t+1)),y1(wy,Hs),i}finally{Xe=e,Sp=!1}}return null}var da=[],fa=0,od=null,ad=0,fr=[],pr=0,Io=null,Ci=1,Ri="";function no(t,e){da[fa++]=ad,da[fa++]=od,od=t,ad=e}function K1(t,e,n){fr[pr++]=Ci,fr[pr++]=Ri,fr[pr++]=Io,Io=t;var r=Ci;t=Ri;var i=32-Br(r)-1;r&=~(1<<i),n+=1;var s=32-Br(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ci=1<<32-Br(e)+i|n<<i|r,Ri=s+t}else Ci=1<<s|n<<i|r,Ri=t}function Ay(t){t.return!==null&&(no(t,1),K1(t,1,0))}function Py(t){for(;t===od;)od=da[--fa],da[fa]=null,ad=da[--fa],da[fa]=null;for(;t===Io;)Io=fr[--pr],fr[pr]=null,Ri=fr[--pr],fr[pr]=null,Ci=fr[--pr],fr[pr]=null}var sr=null,ir=null,vt=!1,Mr=null;function G1(t,e){var n=yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,ir=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Io!==null?{id:Ci,overflow:Ri}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sr=t,ir=null,!0):!1;default:return!1}}function Wg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hg(t){if(vt){var e=ir;if(e){var n=e;if(!G0(t,e)){if(Wg(t))throw Error(J(418));e=Is(n.nextSibling);var r=sr;e&&G0(t,e)?G1(r,n):(t.flags=t.flags&-4097|2,vt=!1,sr=t)}}else{if(Wg(t))throw Error(J(418));t.flags=t.flags&-4097|2,vt=!1,sr=t}}}function Q0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function Xc(t){if(t!==sr)return!1;if(!vt)return Q0(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ug(t.type,t.memoizedProps)),e&&(e=ir)){if(Wg(t))throw Q1(),Error(J(418));for(;e;)G1(t,e),e=Is(e.nextSibling)}if(Q0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ir=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ir=null}}else ir=sr?Is(t.stateNode.nextSibling):null;return!0}function Q1(){for(var t=ir;t;)t=Is(t.nextSibling)}function Oa(){ir=sr=null,vt=!1}function ky(t){Mr===null?Mr=[t]:Mr.push(t)}var Kk=Hi.ReactCurrentBatchConfig;function bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Jc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y0(t){var e=t._init;return e(t._payload)}function Y1(t){function e(S,E){if(t){var R=S.deletions;R===null?(S.deletions=[E],S.flags|=16):R.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(S,E){return S=bs(S,E),S.index=0,S.sibling=null,S}function s(S,E,R){return S.index=R,t?(R=S.alternate,R!==null?(R=R.index,R<E?(S.flags|=2,E):R):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,E,R,M){return E===null||E.tag!==6?(E=Pp(R,S.mode,M),E.return=S,E):(E=i(E,R),E.return=S,E)}function l(S,E,R,M){var V=R.type;return V===oa?h(S,E,R.props.children,M,R.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===us&&Y0(V)===E.type)?(M=i(E,R.props),M.ref=bl(S,E,R),M.return=S,M):(M=bh(R.type,R.key,R.props,null,S.mode,M),M.ref=bl(S,E,R),M.return=S,M)}function c(S,E,R,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=kp(R,S.mode,M),E.return=S,E):(E=i(E,R.children||[]),E.return=S,E)}function h(S,E,R,M,V){return E===null||E.tag!==7?(E=vo(R,S.mode,M,V),E.return=S,E):(E=i(E,R),E.return=S,E)}function d(S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Pp(""+E,S.mode,R),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bc:return R=bh(E.type,E.key,E.props,null,S.mode,R),R.ref=bl(S,null,E),R.return=S,R;case sa:return E=kp(E,S.mode,R),E.return=S,E;case us:var M=E._init;return d(S,M(E._payload),R)}if(Wl(E)||Sl(E))return E=vo(E,S.mode,R,null),E.return=S,E;Jc(S,E)}return null}function f(S,E,R,M){var V=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return V!==null?null:a(S,E,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Bc:return R.key===V?l(S,E,R,M):null;case sa:return R.key===V?c(S,E,R,M):null;case us:return V=R._init,f(S,E,V(R._payload),M)}if(Wl(R)||Sl(R))return V!==null?null:h(S,E,R,M,null);Jc(S,R)}return null}function _(S,E,R,M,V){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(R)||null,a(E,S,""+M,V);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Bc:return S=S.get(M.key===null?R:M.key)||null,l(E,S,M,V);case sa:return S=S.get(M.key===null?R:M.key)||null,c(E,S,M,V);case us:var H=M._init;return _(S,E,R,H(M._payload),V)}if(Wl(M)||Sl(M))return S=S.get(R)||null,h(E,S,M,V,null);Jc(E,M)}return null}function y(S,E,R,M){for(var V=null,H=null,v=E,T=E=0,x=null;v!==null&&T<R.length;T++){v.index>T?(x=v,v=null):x=v.sibling;var b=f(S,v,R[T],M);if(b===null){v===null&&(v=x);break}t&&v&&b.alternate===null&&e(S,v),E=s(b,E,T),H===null?V=b:H.sibling=b,H=b,v=x}if(T===R.length)return n(S,v),vt&&no(S,T),V;if(v===null){for(;T<R.length;T++)v=d(S,R[T],M),v!==null&&(E=s(v,E,T),H===null?V=v:H.sibling=v,H=v);return vt&&no(S,T),V}for(v=r(S,v);T<R.length;T++)x=_(v,S,T,R[T],M),x!==null&&(t&&x.alternate!==null&&v.delete(x.key===null?T:x.key),E=s(x,E,T),H===null?V=x:H.sibling=x,H=x);return t&&v.forEach(function(P){return e(S,P)}),vt&&no(S,T),V}function w(S,E,R,M){var V=Sl(R);if(typeof V!="function")throw Error(J(150));if(R=V.call(R),R==null)throw Error(J(151));for(var H=V=null,v=E,T=E=0,x=null,b=R.next();v!==null&&!b.done;T++,b=R.next()){v.index>T?(x=v,v=null):x=v.sibling;var P=f(S,v,b.value,M);if(P===null){v===null&&(v=x);break}t&&v&&P.alternate===null&&e(S,v),E=s(P,E,T),H===null?V=P:H.sibling=P,H=P,v=x}if(b.done)return n(S,v),vt&&no(S,T),V;if(v===null){for(;!b.done;T++,b=R.next())b=d(S,b.value,M),b!==null&&(E=s(b,E,T),H===null?V=b:H.sibling=b,H=b);return vt&&no(S,T),V}for(v=r(S,v);!b.done;T++,b=R.next())b=_(v,S,T,b.value,M),b!==null&&(t&&b.alternate!==null&&v.delete(b.key===null?T:b.key),E=s(b,E,T),H===null?V=b:H.sibling=b,H=b);return t&&v.forEach(function(O){return e(S,O)}),vt&&no(S,T),V}function C(S,E,R,M){if(typeof R=="object"&&R!==null&&R.type===oa&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Bc:e:{for(var V=R.key,H=E;H!==null;){if(H.key===V){if(V=R.type,V===oa){if(H.tag===7){n(S,H.sibling),E=i(H,R.props.children),E.return=S,S=E;break e}}else if(H.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===us&&Y0(V)===H.type){n(S,H.sibling),E=i(H,R.props),E.ref=bl(S,H,R),E.return=S,S=E;break e}n(S,H);break}else e(S,H);H=H.sibling}R.type===oa?(E=vo(R.props.children,S.mode,M,R.key),E.return=S,S=E):(M=bh(R.type,R.key,R.props,null,S.mode,M),M.ref=bl(S,E,R),M.return=S,S=M)}return o(S);case sa:e:{for(H=R.key;E!==null;){if(E.key===H)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(S,E.sibling),E=i(E,R.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=kp(R,S.mode,M),E.return=S,S=E}return o(S);case us:return H=R._init,C(S,E,H(R._payload),M)}if(Wl(R))return y(S,E,R,M);if(Sl(R))return w(S,E,R,M);Jc(S,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(n(S,E.sibling),E=i(E,R),E.return=S,S=E):(n(S,E),E=Pp(R,S.mode,M),E.return=S,S=E),o(S)):n(S,E)}return C}var Da=Y1(!0),X1=Y1(!1),ld=Ws(null),ud=null,pa=null,Ny=null;function Oy(){Ny=pa=ud=null}function Dy(t){var e=ld.current;pt(ld),t._currentValue=e}function qg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sa(t,e){ud=t,Ny=pa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Er(t){var e=t._currentValue;if(Ny!==t)if(t={context:t,memoizedValue:e,next:null},pa===null){if(ud===null)throw Error(J(308));pa=t,ud.dependencies={lanes:0,firstContext:t}}else pa=pa.next=t;return e}var co=null;function Ly(t){co===null?co=[t]:co.push(t)}function J1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ly(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fi(t,r)}function Fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function My(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fi(t,n)}return i=r.interleaved,i===null?(e.next=e,Ly(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fi(t,n)}function Th(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ey(t,n)}}function X0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,r){var i=t.updateQueue;cs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,_=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(f=e,_=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(_,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(_,d,f):y,f==null)break e;d=St({},d,f);break e;case 2:cs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else _={eventTime:_,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=d):h=h.next=_,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ro|=o,t.lanes=o,t.memoizedState=d}}function J0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var ac={},ai=Ws(ac),ku=Ws(ac),Nu=Ws(ac);function ho(t){if(t===ac)throw Error(J(174));return t}function jy(t,e){switch(ot(Nu,e),ot(ku,t),ot(ai,ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rg(e,t)}pt(ai),ot(ai,e)}function La(){pt(ai),pt(ku),pt(Nu)}function eI(t){ho(Nu.current);var e=ho(ai.current),n=Rg(e,t.type);e!==n&&(ot(ku,t),ot(ai,n))}function Fy(t){ku.current===t&&(pt(ai),pt(ku))}var Et=Ws(0);function hd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ip=[];function Vy(){for(var t=0;t<Ip.length;t++)Ip[t]._workInProgressVersionPrimary=null;Ip.length=0}var Sh=Hi.ReactCurrentDispatcher,Cp=Hi.ReactCurrentBatchConfig,Co=0,Tt=null,Vt=null,Kt=null,dd=!1,su=!1,Ou=0,Gk=0;function _n(){throw Error(J(321))}function Uy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hr(t[n],e[n]))return!1;return!0}function By(t,e,n,r,i,s){if(Co=s,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sh.current=t===null||t.memoizedState===null?Jk:Zk,t=n(r,i),su){s=0;do{if(su=!1,Ou=0,25<=s)throw Error(J(301));s+=1,Kt=Vt=null,e.updateQueue=null,Sh.current=eN,t=n(r,i)}while(su)}if(Sh.current=fd,e=Vt!==null&&Vt.next!==null,Co=0,Kt=Vt=Tt=null,dd=!1,e)throw Error(J(300));return t}function $y(){var t=Ou!==0;return Ou=0,t}function ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Tt.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Tr(){if(Vt===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var e=Kt===null?Tt.memoizedState:Kt.next;if(e!==null)Kt=e,Vt=t;else{if(t===null)throw Error(J(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Kt===null?Tt.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function Du(t,e){return typeof e=="function"?e(t):e}function Rp(t){var e=Tr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Co&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Tt.lanes|=h,Ro|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hr(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Tt.lanes|=s,Ro|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xp(t){var e=Tr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hr(s,e.memoizedState)||($n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function tI(){}function nI(t,e){var n=Tt,r=Tr(),i=e(),s=!Hr(r.memoizedState,i);if(s&&(r.memoizedState=i,$n=!0),r=r.queue,zy(sI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Kt!==null&&Kt.memoizedState.tag&1){if(n.flags|=2048,Lu(9,iI.bind(null,n,r,i,e),void 0,null),Yt===null)throw Error(J(349));Co&30||rI(n,e,i)}return i}function rI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iI(t,e,n,r){e.value=n,e.getSnapshot=r,oI(e)&&aI(t)}function sI(t,e,n){return n(function(){oI(e)&&aI(t)})}function oI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hr(t,n)}catch{return!0}}function aI(t){var e=Fi(t,1);e!==null&&$r(e,t,1,-1)}function Z0(t){var e=ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:t},e.queue=t,t=t.dispatch=Xk.bind(null,Tt,t),[e.memoizedState,t]}function Lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lI(){return Tr().memoizedState}function Ih(t,e,n,r){var i=ri();Tt.flags|=t,i.memoizedState=Lu(1|e,n,void 0,r===void 0?null:r)}function of(t,e,n,r){var i=Tr();r=r===void 0?null:r;var s=void 0;if(Vt!==null){var o=Vt.memoizedState;if(s=o.destroy,r!==null&&Uy(r,o.deps)){i.memoizedState=Lu(e,n,s,r);return}}Tt.flags|=t,i.memoizedState=Lu(1|e,n,s,r)}function ew(t,e){return Ih(8390656,8,t,e)}function zy(t,e){return of(2048,8,t,e)}function uI(t,e){return of(4,2,t,e)}function cI(t,e){return of(4,4,t,e)}function hI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dI(t,e,n){return n=n!=null?n.concat([t]):null,of(4,4,hI.bind(null,e,t),n)}function Wy(){}function fI(t,e){var n=Tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pI(t,e){var n=Tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gI(t,e,n){return Co&21?(Hr(n,e)||(n=w1(),Tt.lanes|=n,Ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=n)}function Qk(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var r=Cp.transition;Cp.transition={};try{t(!1),e()}finally{Xe=n,Cp.transition=r}}function mI(){return Tr().memoizedState}function Yk(t,e,n){var r=xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yI(t))_I(e,n);else if(n=J1(t,e,n,r),n!==null){var i=Nn();$r(n,t,r,i),vI(n,e,r)}}function Xk(t,e,n){var r=xs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yI(t))_I(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hr(a,o)){var l=e.interleaved;l===null?(i.next=i,Ly(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=J1(t,e,i,r),n!==null&&(i=Nn(),$r(n,t,r,i),vI(n,e,r))}}function yI(t){var e=t.alternate;return t===Tt||e!==null&&e===Tt}function _I(t,e){su=dd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ey(t,n)}}var fd={readContext:Er,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},Jk={readContext:Er,useCallback:function(t,e){return ri().memoizedState=[t,e===void 0?null:e],t},useContext:Er,useEffect:ew,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,hI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ri();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yk.bind(null,Tt,t),[r.memoizedState,t]},useRef:function(t){var e=ri();return t={current:t},e.memoizedState=t},useState:Z0,useDebugValue:Wy,useDeferredValue:function(t){return ri().memoizedState=t},useTransition:function(){var t=Z0(!1),e=t[0];return t=Qk.bind(null,t[1]),ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Tt,i=ri();if(vt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Yt===null)throw Error(J(349));Co&30||rI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ew(sI.bind(null,r,s,t),[t]),r.flags|=2048,Lu(9,iI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ri(),e=Yt.identifierPrefix;if(vt){var n=Ri,r=Ci;n=(r&~(1<<32-Br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ou++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zk={readContext:Er,useCallback:fI,useContext:Er,useEffect:zy,useImperativeHandle:dI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:Rp,useRef:lI,useState:function(){return Rp(Du)},useDebugValue:Wy,useDeferredValue:function(t){var e=Tr();return gI(e,Vt.memoizedState,t)},useTransition:function(){var t=Rp(Du)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:tI,useSyncExternalStore:nI,useId:mI,unstable_isNewReconciler:!1},eN={readContext:Er,useCallback:fI,useContext:Er,useEffect:zy,useImperativeHandle:dI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:xp,useRef:lI,useState:function(){return xp(Du)},useDebugValue:Wy,useDeferredValue:function(t){var e=Tr();return Vt===null?e.memoizedState=t:gI(e,Vt.memoizedState,t)},useTransition:function(){var t=xp(Du)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:tI,useSyncExternalStore:nI,useId:mI,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var af={isMounted:function(t){return(t=t._reactInternals)?Bo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nn(),i=xs(t),s=ki(r,i);s.payload=e,n!=null&&(s.callback=n),e=Cs(t,s,i),e!==null&&($r(e,t,i,r),Th(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nn(),i=xs(t),s=ki(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cs(t,s,i),e!==null&&($r(e,t,i,r),Th(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nn(),r=xs(t),i=ki(n,r);i.tag=2,e!=null&&(i.callback=e),e=Cs(t,i,r),e!==null&&($r(e,t,r,n),Th(e,t,r))}};function tw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xu(n,r)||!xu(i,s):!0}function wI(t,e,n){var r=!1,i=js,s=e.contextType;return typeof s=="object"&&s!==null?s=Er(s):(i=Hn(e)?So:An.current,r=e.contextTypes,s=(r=r!=null)?Na(t,i):js),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=af,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&af.enqueueReplaceState(e,e.state,null)}function Gg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},My(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Er(s):(s=Hn(e)?So:An.current,i.context=Na(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&af.enqueueReplaceState(i,i.state,null),cd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ma(t,e){try{var n="",r=e;do n+=bP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tN=typeof WeakMap=="function"?WeakMap:Map;function EI(t,e,n){n=ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gd||(gd=!0,sm=r),Qg(t,e)},n}function TI(t,e,n){n=ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Qg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Qg(t,e),typeof r!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=gN.bind(null,t,e,n),e.then(t,t))}function iw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ki(-1,1),e.tag=2,Cs(n,e,1))),n.lanes|=1),t)}var nN=Hi.ReactCurrentOwner,$n=!1;function kn(t,e,n,r){e.child=t===null?X1(e,null,n,r):Da(e,t.child,n,r)}function ow(t,e,n,r,i){n=n.render;var s=e.ref;return Sa(e,i),r=By(t,e,n,r,s,i),n=$y(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vi(t,e,i)):(vt&&n&&Ay(e),e.flags|=1,kn(t,e,r,i),e.child)}function aw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Jy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,SI(t,e,s,r,i)):(t=bh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xu,n(o,r)&&t.ref===e.ref)return Vi(t,e,i)}return e.flags|=1,t=bs(s,r),t.ref=e.ref,t.return=e,e.child=t}function SI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xu(s,r)&&t.ref===e.ref)if($n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,Vi(t,e,i)}return Yg(t,e,n,r,i)}function II(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(ma,nr),nr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot(ma,nr),nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ot(ma,nr),nr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ot(ma,nr),nr|=r;return kn(t,e,i,n),e.child}function CI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yg(t,e,n,r,i){var s=Hn(n)?So:An.current;return s=Na(e,s),Sa(e,i),n=By(t,e,n,r,s,i),r=$y(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vi(t,e,i)):(vt&&r&&Ay(e),e.flags|=1,kn(t,e,n,i),e.child)}function lw(t,e,n,r,i){if(Hn(n)){var s=!0;sd(e)}else s=!1;if(Sa(e,i),e.stateNode===null)Ch(t,e),wI(e,n,r),Gg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Er(c):(c=Hn(n)?So:An.current,c=Na(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&nw(e,o,r,c),cs=!1;var f=e.memoizedState;o.state=f,cd(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Wn.current||cs?(typeof h=="function"&&(Kg(e,n,h,r),l=e.memoizedState),(a=cs||tw(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Z1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Or(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Er(l):(l=Hn(n)?So:An.current,l=Na(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&nw(e,o,r,l),cs=!1,f=e.memoizedState,o.state=f,cd(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||Wn.current||cs?(typeof _=="function"&&(Kg(e,n,_,r),y=e.memoizedState),(c=cs||tw(e,n,c,r,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Xg(t,e,n,r,s,i)}function Xg(t,e,n,r,i,s){CI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&K0(e,n,!1),Vi(t,e,s);r=e.stateNode,nN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Da(e,t.child,null,s),e.child=Da(e,null,a,s)):kn(t,e,a,s),e.memoizedState=r.state,i&&K0(e,n,!0),e.child}function RI(t){var e=t.stateNode;e.pendingContext?q0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q0(t,e.context,!1),jy(t,e.containerInfo)}function uw(t,e,n,r,i){return Oa(),ky(i),e.flags|=256,kn(t,e,n,r),e.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function Zg(t){return{baseLanes:t,cachePool:null,transitions:null}}function xI(t,e,n){var r=e.pendingProps,i=Et.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ot(Et,i&1),t===null)return Hg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cf(o,r,0,null),t=vo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zg(n),e.memoizedState=Jg,t):Hy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return rN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bs(a,s):(s=vo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Zg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jg,r}return s=t.child,t=s.sibling,r=bs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hy(t,e){return e=cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zc(t,e,n,r){return r!==null&&ky(r),Da(e,t.child,null,n),t=Hy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bp(Error(J(422))),Zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cf({mode:"visible",children:r.children},i,0,null),s=vo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Da(e,t.child,null,o),e.child.memoizedState=Zg(o),e.memoizedState=Jg,s);if(!(e.mode&1))return Zc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=bp(s,r,void 0),Zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,$n||a){if(r=Yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fi(t,i),$r(r,t,i,-1))}return Xy(),r=bp(Error(J(421))),Zc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ir=Is(i.nextSibling),sr=e,vt=!0,Mr=null,t!==null&&(fr[pr++]=Ci,fr[pr++]=Ri,fr[pr++]=Io,Ci=t.id,Ri=t.overflow,Io=e),e=Hy(e,r.children),e.flags|=4096,e)}function cw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qg(t.return,e,n)}function Ap(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function bI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kn(t,e,r.children,n),r=Et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cw(t,n,e);else if(t.tag===19)cw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ot(Et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ap(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ap(e,!0,n,null,s);break;case"together":Ap(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ch(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iN(t,e,n){switch(e.tag){case 3:RI(e),Oa();break;case 5:eI(e);break;case 1:Hn(e.type)&&sd(e);break;case 4:jy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ot(ld,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ot(Et,Et.current&1),e.flags|=128,null):n&e.child.childLanes?xI(t,e,n):(ot(Et,Et.current&1),t=Vi(t,e,n),t!==null?t.sibling:null);ot(Et,Et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ot(Et,Et.current),r)break;return null;case 22:case 23:return e.lanes=0,II(t,e,n)}return Vi(t,e,n)}var AI,em,PI,kI;AI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};em=function(){};PI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ho(ai.current);var s=null;switch(n){case"input":i=Tg(t,i),r=Tg(t,r),s=[];break;case"select":i=St({},i,{value:void 0}),r=St({},r,{value:void 0}),s=[];break;case"textarea":i=Cg(t,i),r=Cg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rd)}xg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ct("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};kI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Al(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sN(t,e,n){var r=e.pendingProps;switch(Py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Hn(e.type)&&id(),vn(e),null;case 3:return r=e.stateNode,La(),pt(Wn),pt(An),Vy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(lm(Mr),Mr=null))),em(t,e),vn(e),null;case 5:Fy(e);var i=ho(Nu.current);if(n=e.type,t!==null&&e.stateNode!=null)PI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return vn(e),null}if(t=ho(ai.current),Xc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ii]=e,r[Pu]=s,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(i=0;i<ql.length;i++)ct(ql[i],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":v0(r,s),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ct("invalid",r);break;case"textarea":E0(r,s),ct("invalid",r)}xg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",""+a]):wu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":$c(r),w0(r,s,!0);break;case"textarea":$c(r),T0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=rd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=s1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ii]=e,t[Pu]=r,AI(t,e,!1,!1),e.stateNode=t;e:{switch(o=bg(n,r),n){case"dialog":ct("cancel",t),ct("close",t),i=r;break;case"iframe":case"object":case"embed":ct("load",t),i=r;break;case"video":case"audio":for(i=0;i<ql.length;i++)ct(ql[i],t);i=r;break;case"source":ct("error",t),i=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),i=r;break;case"details":ct("toggle",t),i=r;break;case"input":v0(t,r),i=Tg(t,r),ct("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=St({},r,{value:void 0}),ct("invalid",t);break;case"textarea":E0(t,r),i=Cg(t,r),ct("invalid",t);break;default:i=r}xg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?l1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&o1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Eu(t,l):typeof l=="number"&&Eu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ct("scroll",t):l!=null&&gy(t,s,l,o))}switch(n){case"input":$c(t),w0(t,r,!1);break;case"textarea":$c(t),T0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ms(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?va(t,!!r.multiple,s,!1):r.defaultValue!=null&&va(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)kI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=ho(Nu.current),ho(ai.current),Xc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ii]=e,(s=r.nodeValue!==n)&&(t=sr,t!==null))switch(t.tag){case 3:Yc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ii]=e,e.stateNode=r}return vn(e),null;case 13:if(pt(Et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&ir!==null&&e.mode&1&&!(e.flags&128))Q1(),Oa(),e.flags|=98560,s=!1;else if(s=Xc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[ii]=e}else Oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),s=!1}else Mr!==null&&(lm(Mr),Mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?Ut===0&&(Ut=3):Xy())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return La(),em(t,e),t===null&&bu(e.stateNode.containerInfo),vn(e),null;case 10:return Dy(e.type._context),vn(e),null;case 17:return Hn(e.type)&&id(),vn(e),null;case 19:if(pt(Et),s=e.memoizedState,s===null)return vn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Al(s,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hd(t),o!==null){for(e.flags|=128,Al(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ot(Et,Et.current&1|2),e.child}t=t.sibling}s.tail!==null&&At()>ja&&(e.flags|=128,r=!0,Al(s,!1),e.lanes=4194304)}else{if(!r)if(t=hd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Al(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!vt)return vn(e),null}else 2*At()-s.renderingStartTime>ja&&n!==1073741824&&(e.flags|=128,r=!0,Al(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=At(),e.sibling=null,n=Et.current,ot(Et,r?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return Yy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nr&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function oN(t,e){switch(Py(e),e.tag){case 1:return Hn(e.type)&&id(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return La(),pt(Wn),pt(An),Vy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fy(e),null;case 13:if(pt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(Et),null;case 4:return La(),null;case 10:return Dy(e.type._context),null;case 22:case 23:return Yy(),null;case 24:return null;default:return null}}var eh=!1,Sn=!1,aN=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(t,e,r)}else n.current=null}function tm(t,e,n){try{n()}catch(r){Rt(t,e,r)}}var hw=!1;function lN(t,e){if(Fg=ed,t=M1(),by(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)f=d,d=_;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(_=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vg={focusedElem:t,selectionRange:n},ed=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,C=y.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?w:Or(e.type,w),C);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(M){Rt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return y=hw,hw=!1,y}function ou(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tm(e,n,s)}i=i.next}while(i!==r)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function NI(t){var e=t.alternate;e!==null&&(t.alternate=null,NI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ii],delete e[Pu],delete e[$g],delete e[Wk],delete e[Hk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OI(t){return t.tag===5||t.tag===3||t.tag===4}function dw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rd));else if(r!==4&&(t=t.child,t!==null))for(rm(t,e,n),t=t.sibling;t!==null;)rm(t,e,n),t=t.sibling}function im(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(im(t,e,n),t=t.sibling;t!==null;)im(t,e,n),t=t.sibling}var sn=null,Dr=!1;function is(t,e,n){for(n=n.child;n!==null;)DI(t,e,n),n=n.sibling}function DI(t,e,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:Sn||ga(n,e);case 6:var r=sn,i=Dr;sn=null,is(t,e,n),sn=r,Dr=i,sn!==null&&(Dr?(t=sn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sn.removeChild(n.stateNode));break;case 18:sn!==null&&(Dr?(t=sn,n=n.stateNode,t.nodeType===8?Tp(t.parentNode,n):t.nodeType===1&&Tp(t,n),Cu(t)):Tp(sn,n.stateNode));break;case 4:r=sn,i=Dr,sn=n.stateNode.containerInfo,Dr=!0,is(t,e,n),sn=r,Dr=i;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tm(n,e,o),i=i.next}while(i!==r)}is(t,e,n);break;case 1:if(!Sn&&(ga(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Rt(n,e,a)}is(t,e,n);break;case 21:is(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,is(t,e,n),Sn=r):is(t,e,n);break;default:is(t,e,n)}}function fw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aN),e.forEach(function(r){var i=yN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:sn=a.stateNode,Dr=!1;break e;case 3:sn=a.stateNode.containerInfo,Dr=!0;break e;case 4:sn=a.stateNode.containerInfo,Dr=!0;break e}a=a.return}if(sn===null)throw Error(J(160));DI(s,o,i),sn=null,Dr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Rt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LI(e,t),e=e.sibling}function LI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nr(e,t),ti(t),r&4){try{ou(3,t,t.return),lf(3,t)}catch(w){Rt(t,t.return,w)}try{ou(5,t,t.return)}catch(w){Rt(t,t.return,w)}}break;case 1:Nr(e,t),ti(t),r&512&&n!==null&&ga(n,n.return);break;case 5:if(Nr(e,t),ti(t),r&512&&n!==null&&ga(n,n.return),t.flags&32){var i=t.stateNode;try{Eu(i,"")}catch(w){Rt(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&r1(i,s),bg(a,o);var c=bg(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?l1(i,d):h==="dangerouslySetInnerHTML"?o1(i,d):h==="children"?Eu(i,d):gy(i,h,d,c)}switch(a){case"input":Sg(i,s);break;case"textarea":i1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?va(i,!!s.multiple,_,!1):f!==!!s.multiple&&(s.defaultValue!=null?va(i,!!s.multiple,s.defaultValue,!0):va(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pu]=s}catch(w){Rt(t,t.return,w)}}break;case 6:if(Nr(e,t),ti(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Rt(t,t.return,w)}}break;case 3:if(Nr(e,t),ti(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cu(e.containerInfo)}catch(w){Rt(t,t.return,w)}break;case 4:Nr(e,t),ti(t);break;case 13:Nr(e,t),ti(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gy=At())),r&4&&fw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(c=Sn)||h,Nr(e,t),Sn=c):Nr(e,t),ti(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(oe=t,h=t.child;h!==null;){for(d=oe=h;oe!==null;){switch(f=oe,_=f.child,f.tag){case 0:case 11:case 14:case 15:ou(4,f,f.return);break;case 1:ga(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Rt(r,n,w)}}break;case 5:ga(f,f.return);break;case 22:if(f.memoizedState!==null){gw(d);continue}}_!==null?(_.return=f,oe=_):gw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=a1("display",o))}catch(w){Rt(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Rt(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nr(e,t),ti(t),r&4&&fw(t);break;case 21:break;default:Nr(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OI(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Eu(i,""),r.flags&=-33);var s=dw(t);im(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dw(t);rm(t,a,o);break;default:throw Error(J(161))}}catch(l){Rt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uN(t,e,n){oe=t,MI(t)}function MI(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||eh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Sn;a=eh;var c=Sn;if(eh=o,(Sn=l)&&!c)for(oe=i;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?mw(i):l!==null?(l.return=o,oe=l):mw(i);for(;s!==null;)oe=s,MI(s),s=s.sibling;oe=i,eh=a,Sn=c}pw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):pw(t)}}function pw(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&J0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Cu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Sn||e.flags&512&&nm(e)}catch(f){Rt(e,e.return,f)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function gw(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function mw(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lf(4,e)}catch(l){Rt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Rt(e,i,l)}}var s=e.return;try{nm(e)}catch(l){Rt(e,s,l)}break;case 5:var o=e.return;try{nm(e)}catch(l){Rt(e,o,l)}}}catch(l){Rt(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var cN=Math.ceil,pd=Hi.ReactCurrentDispatcher,qy=Hi.ReactCurrentOwner,vr=Hi.ReactCurrentBatchConfig,ze=0,Yt=null,Ot=null,ln=0,nr=0,ma=Ws(0),Ut=0,Mu=null,Ro=0,uf=0,Ky=0,au=null,Bn=null,Gy=0,ja=1/0,Ei=null,gd=!1,sm=null,Rs=null,th=!1,_s=null,md=0,lu=0,om=null,Rh=-1,xh=0;function Nn(){return ze&6?At():Rh!==-1?Rh:Rh=At()}function xs(t){return t.mode&1?ze&2&&ln!==0?ln&-ln:Kk.transition!==null?(xh===0&&(xh=w1()),xh):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:x1(t.type)),t):1}function $r(t,e,n,r){if(50<lu)throw lu=0,om=null,Error(J(185));ic(t,n,r),(!(ze&2)||t!==Yt)&&(t===Yt&&(!(ze&2)&&(uf|=n),Ut===4&&fs(t,ln)),qn(t,r),n===1&&ze===0&&!(e.mode&1)&&(ja=At()+500,sf&&Hs()))}function qn(t,e){var n=t.callbackNode;KP(t,e);var r=Zh(t,t===Yt?ln:0);if(r===0)n!==null&&C0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C0(n),e===1)t.tag===0?qk(yw.bind(null,t)):q1(yw.bind(null,t)),$k(function(){!(ze&6)&&Hs()}),n=null;else{switch(E1(r)){case 1:n=wy;break;case 4:n=_1;break;case 16:n=Jh;break;case 536870912:n=v1;break;default:n=Jh}n=WI(n,jI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jI(t,e){if(Rh=-1,xh=0,ze&6)throw Error(J(327));var n=t.callbackNode;if(Ia()&&t.callbackNode!==n)return null;var r=Zh(t,t===Yt?ln:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yd(t,r);else{e=r;var i=ze;ze|=2;var s=VI();(Yt!==t||ln!==e)&&(Ei=null,ja=At()+500,_o(t,e));do try{fN();break}catch(a){FI(t,a)}while(!0);Oy(),pd.current=s,ze=i,Ot!==null?e=0:(Yt=null,ln=0,e=Ut)}if(e!==0){if(e===2&&(i=Og(t),i!==0&&(r=i,e=am(t,i))),e===1)throw n=Mu,_o(t,0),fs(t,r),qn(t,At()),n;if(e===6)fs(t,r);else{if(i=t.current.alternate,!(r&30)&&!hN(i)&&(e=yd(t,r),e===2&&(s=Og(t),s!==0&&(r=s,e=am(t,s))),e===1))throw n=Mu,_o(t,0),fs(t,r),qn(t,At()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:ro(t,Bn,Ei);break;case 3:if(fs(t,r),(r&130023424)===r&&(e=Gy+500-At(),10<e)){if(Zh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bg(ro.bind(null,t,Bn,Ei),e);break}ro(t,Bn,Ei);break;case 4:if(fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Br(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cN(r/1960))-r,10<r){t.timeoutHandle=Bg(ro.bind(null,t,Bn,Ei),r);break}ro(t,Bn,Ei);break;case 5:ro(t,Bn,Ei);break;default:throw Error(J(329))}}}return qn(t,At()),t.callbackNode===n?jI.bind(null,t):null}function am(t,e){var n=au;return t.current.memoizedState.isDehydrated&&(_o(t,e).flags|=256),t=yd(t,e),t!==2&&(e=Bn,Bn=n,e!==null&&lm(e)),t}function lm(t){Bn===null?Bn=t:Bn.push.apply(Bn,t)}function hN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fs(t,e){for(e&=~Ky,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Br(e),r=1<<n;t[n]=-1,e&=~r}}function yw(t){if(ze&6)throw Error(J(327));Ia();var e=Zh(t,0);if(!(e&1))return qn(t,At()),null;var n=yd(t,e);if(t.tag!==0&&n===2){var r=Og(t);r!==0&&(e=r,n=am(t,r))}if(n===1)throw n=Mu,_o(t,0),fs(t,e),qn(t,At()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,Bn,Ei),qn(t,At()),null}function Qy(t,e){var n=ze;ze|=1;try{return t(e)}finally{ze=n,ze===0&&(ja=At()+500,sf&&Hs())}}function xo(t){_s!==null&&_s.tag===0&&!(ze&6)&&Ia();var e=ze;ze|=1;var n=vr.transition,r=Xe;try{if(vr.transition=null,Xe=1,t)return t()}finally{Xe=r,vr.transition=n,ze=e,!(ze&6)&&Hs()}}function Yy(){nr=ma.current,pt(ma)}function _o(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bk(n)),Ot!==null)for(n=Ot.return;n!==null;){var r=n;switch(Py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&id();break;case 3:La(),pt(Wn),pt(An),Vy();break;case 5:Fy(r);break;case 4:La();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:Dy(r.type._context);break;case 22:case 23:Yy()}n=n.return}if(Yt=t,Ot=t=bs(t.current,null),ln=nr=e,Ut=0,Mu=null,Ky=uf=Ro=0,Bn=au=null,co!==null){for(e=0;e<co.length;e++)if(n=co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}co=null}return t}function FI(t,e){do{var n=Ot;try{if(Oy(),Sh.current=fd,dd){for(var r=Tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dd=!1}if(Co=0,Kt=Vt=Tt=null,su=!1,Ou=0,qy.current=null,n===null||n.return===null){Ut=1,Mu=e,Ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ln,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=iw(o);if(_!==null){_.flags&=-257,sw(_,o,a,s,e),_.mode&1&&rw(s,c,e),e=_,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){rw(s,c,e),Xy();break e}l=Error(J(426))}}else if(vt&&a.mode&1){var C=iw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),sw(C,o,a,s,e),ky(Ma(l,a));break e}}s=l=Ma(l,a),Ut!==4&&(Ut=2),au===null?au=[s]:au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=EI(s,l,e);X0(s,S);break e;case 1:a=l;var E=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Rs===null||!Rs.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=TI(s,a,e);X0(s,M);break e}}s=s.return}while(s!==null)}BI(n)}catch(V){e=V,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function VI(){var t=pd.current;return pd.current=fd,t===null?fd:t}function Xy(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Yt===null||!(Ro&268435455)&&!(uf&268435455)||fs(Yt,ln)}function yd(t,e){var n=ze;ze|=2;var r=VI();(Yt!==t||ln!==e)&&(Ei=null,_o(t,e));do try{dN();break}catch(i){FI(t,i)}while(!0);if(Oy(),ze=n,pd.current=r,Ot!==null)throw Error(J(261));return Yt=null,ln=0,Ut}function dN(){for(;Ot!==null;)UI(Ot)}function fN(){for(;Ot!==null&&!FP();)UI(Ot)}function UI(t){var e=zI(t.alternate,t,nr);t.memoizedProps=t.pendingProps,e===null?BI(t):Ot=e,qy.current=null}function BI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oN(n,e),n!==null){n.flags&=32767,Ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,Ot=null;return}}else if(n=sN(n,e,nr),n!==null){Ot=n;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);Ut===0&&(Ut=5)}function ro(t,e,n){var r=Xe,i=vr.transition;try{vr.transition=null,Xe=1,pN(t,e,n,r)}finally{vr.transition=i,Xe=r}return null}function pN(t,e,n,r){do Ia();while(_s!==null);if(ze&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(GP(t,s),t===Yt&&(Ot=Yt=null,ln=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||th||(th=!0,WI(Jh,function(){return Ia(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vr.transition,vr.transition=null;var o=Xe;Xe=1;var a=ze;ze|=4,qy.current=null,lN(t,n),LI(n,t),Dk(Vg),ed=!!Fg,Vg=Fg=null,t.current=n,uN(n),VP(),ze=a,Xe=o,vr.transition=s}else t.current=n;if(th&&(th=!1,_s=t,md=i),s=t.pendingLanes,s===0&&(Rs=null),$P(n.stateNode),qn(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gd)throw gd=!1,t=sm,sm=null,t;return md&1&&t.tag!==0&&Ia(),s=t.pendingLanes,s&1?t===om?lu++:(lu=0,om=t):lu=0,Hs(),null}function Ia(){if(_s!==null){var t=E1(md),e=vr.transition,n=Xe;try{if(vr.transition=null,Xe=16>t?16:t,_s===null)var r=!1;else{if(t=_s,_s=null,md=0,ze&6)throw Error(J(331));var i=ze;for(ze|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var h=oe;switch(h.tag){case 0:case 11:case 15:ou(8,h,s)}var d=h.child;if(d!==null)d.return=h,oe=d;else for(;oe!==null;){h=oe;var f=h.sibling,_=h.return;if(NI(h),h===c){oe=null;break}if(f!==null){f.return=_,oe=f;break}oe=_}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ou(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,oe=S;break e}oe=s.return}}var E=t.current;for(oe=E;oe!==null;){o=oe;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,oe=R;else e:for(o=E;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lf(9,a)}}catch(V){Rt(a,a.return,V)}if(a===o){oe=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,oe=M;break e}oe=a.return}}if(ze=i,Hs(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(Zd,t)}catch{}r=!0}return r}finally{Xe=n,vr.transition=e}}return!1}function _w(t,e,n){e=Ma(n,e),e=EI(t,e,1),t=Cs(t,e,1),e=Nn(),t!==null&&(ic(t,1,e),qn(t,e))}function Rt(t,e,n){if(t.tag===3)_w(t,t,n);else for(;e!==null;){if(e.tag===3){_w(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rs===null||!Rs.has(r))){t=Ma(n,t),t=TI(e,t,1),e=Cs(e,t,1),t=Nn(),e!==null&&(ic(e,1,t),qn(e,t));break}}e=e.return}}function gN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(ln&n)===n&&(Ut===4||Ut===3&&(ln&130023424)===ln&&500>At()-Gy?_o(t,0):Ky|=n),qn(t,e)}function $I(t,e){e===0&&(t.mode&1?(e=Hc,Hc<<=1,!(Hc&130023424)&&(Hc=4194304)):e=1);var n=Nn();t=Fi(t,e),t!==null&&(ic(t,e,n),qn(t,n))}function mN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$I(t,n)}function yN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),$I(t,n)}var zI;zI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)$n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $n=!1,iN(t,e,n);$n=!!(t.flags&131072)}else $n=!1,vt&&e.flags&1048576&&K1(e,ad,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ch(t,e),t=e.pendingProps;var i=Na(e,An.current);Sa(e,n),i=By(null,e,r,t,i,n);var s=$y();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(r)?(s=!0,sd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,My(e),i.updater=af,e.stateNode=i,i._reactInternals=e,Gg(e,r,t,n),e=Xg(null,e,r,!0,s,n)):(e.tag=0,vt&&s&&Ay(e),kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ch(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vN(r),t=Or(r,t),i){case 0:e=Yg(null,e,r,t,n);break e;case 1:e=lw(null,e,r,t,n);break e;case 11:e=ow(null,e,r,t,n);break e;case 14:e=aw(null,e,r,Or(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Yg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),lw(t,e,r,i,n);case 3:e:{if(RI(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Z1(t,e),cd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ma(Error(J(423)),e),e=uw(t,e,r,n,i);break e}else if(r!==i){i=Ma(Error(J(424)),e),e=uw(t,e,r,n,i);break e}else for(ir=Is(e.stateNode.containerInfo.firstChild),sr=e,vt=!0,Mr=null,n=X1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oa(),r===i){e=Vi(t,e,n);break e}kn(t,e,r,n)}e=e.child}return e;case 5:return eI(e),t===null&&Hg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ug(r,i)?o=null:s!==null&&Ug(r,s)&&(e.flags|=32),CI(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&Hg(e),null;case 13:return xI(t,e,n);case 4:return jy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Da(e,null,r,n):kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),ow(t,e,r,i,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ot(ld,r._currentValue),r._currentValue=o,s!==null)if(Hr(s.value,o)){if(s.children===i.children&&!Wn.current){e=Vi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ki(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sa(e,n),i=Er(i),r=r(i),e.flags|=1,kn(t,e,r,n),e.child;case 14:return r=e.type,i=Or(r,e.pendingProps),i=Or(r.type,i),aw(t,e,r,i,n);case 15:return SI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Ch(t,e),e.tag=1,Hn(r)?(t=!0,sd(e)):t=!1,Sa(e,n),wI(e,r,i),Gg(e,r,i,n),Xg(null,e,r,!0,t,n);case 19:return bI(t,e,n);case 22:return II(t,e,n)}throw Error(J(156,e.tag))};function WI(t,e){return y1(t,e)}function _N(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,n,r){return new _N(t,e,n,r)}function Jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vN(t){if(typeof t=="function")return Jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yy)return 11;if(t===_y)return 14}return 2}function bs(t,e){var n=t.alternate;return n===null?(n=yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oa:return vo(n.children,i,s,e);case my:o=8,i|=8;break;case _g:return t=yr(12,n,e,i|2),t.elementType=_g,t.lanes=s,t;case vg:return t=yr(13,n,e,i),t.elementType=vg,t.lanes=s,t;case wg:return t=yr(19,n,e,i),t.elementType=wg,t.lanes=s,t;case e1:return cf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JS:o=10;break e;case ZS:o=9;break e;case yy:o=11;break e;case _y:o=14;break e;case us:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=yr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vo(t,e,n,r){return t=yr(7,t,r,e),t.lanes=n,t}function cf(t,e,n,r){return t=yr(22,t,r,e),t.elementType=e1,t.lanes=n,t.stateNode={isHidden:!1},t}function Pp(t,e,n){return t=yr(6,t,null,e),t.lanes=n,t}function kp(t,e,n){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hp(0),this.expirationTimes=hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zy(t,e,n,r,i,s,o,a,l){return t=new wN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},My(s),t}function EN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HI(t){if(!t)return js;t=t._reactInternals;e:{if(Bo(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Hn(n))return H1(t,n,e)}return e}function qI(t,e,n,r,i,s,o,a,l){return t=Zy(n,r,!0,t,i,s,o,a,l),t.context=HI(null),n=t.current,r=Nn(),i=xs(n),s=ki(r,i),s.callback=e??null,Cs(n,s,i),t.current.lanes=i,ic(t,i,r),qn(t,r),t}function hf(t,e,n,r){var i=e.current,s=Nn(),o=xs(i);return n=HI(n),e.context===null?e.context=n:e.pendingContext=n,e=ki(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cs(i,e,o),t!==null&&($r(t,i,o,s),Th(t,i,o)),o}function _d(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function e_(t,e){vw(t,e),(t=t.alternate)&&vw(t,e)}function TN(){return null}var KI=typeof reportError=="function"?reportError:function(t){console.error(t)};function t_(t){this._internalRoot=t}df.prototype.render=t_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));hf(t,e,null,null)};df.prototype.unmount=t_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xo(function(){hf(null,t,null,null)}),e[ji]=null}};function df(t){this._internalRoot=t}df.prototype.unstable_scheduleHydration=function(t){if(t){var e=I1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ds.length&&e!==0&&e<ds[n].priority;n++);ds.splice(n,0,t),n===0&&R1(t)}};function n_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ww(){}function SN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_d(o);s.call(c)}}var o=qI(e,r,t,0,null,!1,!1,"",ww);return t._reactRootContainer=o,t[ji]=o.current,bu(t.nodeType===8?t.parentNode:t),xo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_d(l);a.call(c)}}var l=Zy(t,0,!1,null,null,!1,!1,"",ww);return t._reactRootContainer=l,t[ji]=l.current,bu(t.nodeType===8?t.parentNode:t),xo(function(){hf(e,l,n,r)}),l}function pf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_d(o);a.call(l)}}hf(e,o,t,i)}else o=SN(n,e,t,i,r);return _d(o)}T1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hl(e.pendingLanes);n!==0&&(Ey(e,n|1),qn(e,At()),!(ze&6)&&(ja=At()+500,Hs()))}break;case 13:xo(function(){var r=Fi(t,1);if(r!==null){var i=Nn();$r(r,t,1,i)}}),e_(t,1)}};Ty=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var n=Nn();$r(e,t,134217728,n)}e_(t,134217728)}};S1=function(t){if(t.tag===13){var e=xs(t),n=Fi(t,e);if(n!==null){var r=Nn();$r(n,t,e,r)}e_(t,e)}};I1=function(){return Xe};C1=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};Pg=function(t,e,n){switch(e){case"input":if(Sg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rf(r);if(!i)throw Error(J(90));n1(r),Sg(r,i)}}}break;case"textarea":i1(t,n);break;case"select":e=n.value,e!=null&&va(t,!!n.multiple,e,!1)}};h1=Qy;d1=xo;var IN={usingClientEntryPoint:!1,Events:[oc,ca,rf,u1,c1,Qy]},Pl={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CN={bundleType:Pl.bundleType,version:Pl.version,rendererPackageName:Pl.rendererPackageName,rendererConfig:Pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g1(t),t===null?null:t.stateNode},findFiberByHostInstance:Pl.findFiberByHostInstance||TN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Zd=nh.inject(CN),oi=nh}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IN;lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n_(e))throw Error(J(200));return EN(t,e,null,n)};lr.createRoot=function(t,e){if(!n_(t))throw Error(J(299));var n=!1,r="",i=KI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zy(t,1,!1,null,null,n,!1,r,i),t[ji]=e.current,bu(t.nodeType===8?t.parentNode:t),new t_(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=g1(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return xo(t)};lr.hydrate=function(t,e,n){if(!ff(e))throw Error(J(200));return pf(null,t,e,!0,n)};lr.hydrateRoot=function(t,e,n){if(!n_(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=KI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qI(e,null,t,1,n??null,i,!1,s,o),t[ji]=e.current,bu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new df(e)};lr.render=function(t,e,n){if(!ff(e))throw Error(J(200));return pf(null,t,e,!1,n)};lr.unmountComponentAtNode=function(t){if(!ff(t))throw Error(J(40));return t._reactRootContainer?(xo(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};lr.unstable_batchedUpdates=Qy;lr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ff(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return pf(t,e,n,!1,r)};lr.version="18.3.1-next-f1338f8080-20240426";function GI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GI)}catch(t){console.error(t)}}GI(),GS.exports=lr;var r_=GS.exports;const RN=MS(r_),xN=LS({__proto__:null,default:RN},[r_]);var QI,Ew=r_;QI=Ew.createRoot,Ew.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _t(){return _t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_t.apply(this,arguments)}var Nt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nt||(Nt={}));const Tw="popstate";function bN(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ju("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bo(i)}return PN(e,n,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AN(){return Math.random().toString(36).substr(2,8)}function Sw(t,e){return{usr:t.state,key:t.key,idx:e}}function ju(t,e,n,r){return n===void 0&&(n=null),_t({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qs(e):e,{state:n,key:e&&e.key||r||AN()})}function bo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function PN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Nt.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(_t({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Nt.Pop;let C=h(),S=C==null?null:C-c;c=C,l&&l({action:a,location:w.location,delta:S})}function f(C,S){a=Nt.Push;let E=ju(w.location,C,S);c=h()+1;let R=Sw(E,c),M=w.createHref(E);try{o.pushState(R,"",M)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(M)}s&&l&&l({action:a,location:w.location,delta:1})}function _(C,S){a=Nt.Replace;let E=ju(w.location,C,S);c=h();let R=Sw(E,c),M=w.createHref(E);o.replaceState(R,"",M),s&&l&&l({action:a,location:w.location,delta:0})}function y(C){let S=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof C=="string"?C:bo(C);return E=E.replace(/ $/,"%20"),Le(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let w={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Tw,d),l=C,()=>{i.removeEventListener(Tw,d),l=null}},createHref(C){return e(i,C)},createURL:y,encodeLocation(C){let S=y(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:_,go(C){return o.go(C)}};return w}var Ye;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ye||(Ye={}));const kN=new Set(["lazy","caseSensitive","path","id","index","children"]);function NN(t){return t.index===!0}function vd(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Le(i.index!==!0||!i.children,"Cannot specify children on an index route"),Le(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),NN(i)){let l=_t({},i,e(i),{id:a});return r[a]=l,l}else{let l=_t({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=vd(i.children,e,o,r)),l}})}function oo(t,e,n){return n===void 0&&(n="/"),Ah(t,e,n,!1)}function Ah(t,e,n,r){let i=typeof e=="string"?qs(e):e,s=tl(i.pathname||"/",n);if(s==null)return null;let o=YI(t);DN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=HN(s);a=zN(o[l],c,r)}return a}function ON(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function YI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Le(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ni([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Le(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),YI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:BN(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of XI(s.path))i(s,o,l)}),e}function XI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=XI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function DN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$N(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LN=/^:[\w-]+$/,MN=3,jN=2,FN=1,VN=10,UN=-2,Iw=t=>t==="*";function BN(t,e){let n=t.split("/"),r=n.length;return n.some(Iw)&&(r+=UN),e&&(r+=jN),n.filter(i=>!Iw(i)).reduce((i,s)=>i+(LN.test(s)?MN:s===""?FN:VN),r)}function $N(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function zN(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Cw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Cw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ni([s,d.pathname]),pathnameBase:GN(Ni([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ni([s,d.pathnameBase]))}return o}function Cw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:_}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const y=a[d];return _&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function WN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function HN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fa(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function tl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qs(t):t;return{pathname:n?n.startsWith("/")?n:KN(n,e):e,search:QN(r),hash:YN(i)}}function KN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Np(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function i_(t,e){let n=JI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function s_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qs(t):(i=_t({},t),Le(!i.pathname||!i.pathname.includes("?"),Np("?","pathname","search",i)),Le(!i.pathname||!i.pathname.includes("#"),Np("#","pathname","hash",i)),Le(!i.search||!i.search.includes("#"),Np("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=qN(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ni=t=>t.join("/").replace(/\/\/+/g,"/"),GN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class wd{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Fu(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ZI=["post","put","patch","delete"],XN=new Set(ZI),JN=["get",...ZI],ZN=new Set(JN),eO=new Set([301,302,303,307,308]),tO=new Set([307,308]),Op={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nO={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},o_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rO=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),eC="remix-router-transitions";function iO(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Le(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let D=t.detectErrorBoundary;i=L=>({hasErrorBoundary:D(L)})}else i=rO;let s={},o=vd(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.dataStrategy||lO,h=t.patchRoutesOnNavigation,d=_t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,_=new Set,y=null,w=null,C=null,S=t.hydrationData!=null,E=oo(o,t.history.location,l),R=!1,M=null;if(E==null&&!h){let D=Un(404,{pathname:t.history.location.pathname}),{matches:L,route:k}=Mw(o);E=L,M={[k.id]:D}}E&&!t.hydrationData&&Zn(E,o,t.history.location.pathname).active&&(E=null);let V;if(E)if(E.some(D=>D.route.lazy))V=!1;else if(!E.some(D=>D.route.loader))V=!0;else if(d.v7_partialHydration){let D=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null;if(L){let k=E.findIndex(q=>L[q.route.id]!==void 0);V=E.slice(0,k+1).every(q=>!cm(q.route,D,L))}else V=E.every(k=>!cm(k.route,D,L))}else V=t.hydrationData!=null;else if(V=!1,E=[],d.v7_partialHydration){let D=Zn(null,o,t.history.location.pathname);D.active&&D.matches&&(R=!0,E=D.matches)}let H,v={historyAction:t.history.action,location:t.history.location,matches:E,initialized:V,navigation:Op,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||M,fetchers:new Map,blockers:new Map},T=Nt.Pop,x=!1,b,P=!1,O=new Map,A=null,pe=!1,je=!1,re=[],Ae=new Set,Q=new Map,le=0,he=-1,Ee=new Map,ye=new Set,Pe=new Map,Ze=new Map,Ke=new Set,at=new Map,fe=new Map,$t;function Qn(){if(f=t.history.listen(D=>{let{action:L,location:k,delta:q}=D;if($t){$t(),$t=void 0;return}Fa(fe.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=mi({currentLocation:v.location,nextLocation:k,historyAction:L});if(G&&q!=null){let Z=new Promise(ue=>{$t=ue});t.history.go(q*-1),Xn(G,{state:"blocked",location:k,proceed(){Xn(G,{state:"proceeding",proceed:void 0,reset:void 0,location:k}),Z.then(()=>t.history.go(q))},reset(){let ue=new Map(v.blockers);ue.set(G,kl),Ve({blockers:ue})}});return}return Mt(L,k)}),n){TO(e,O);let D=()=>SO(e,O);e.addEventListener("pagehide",D),A=()=>e.removeEventListener("pagehide",D)}return v.initialized||Mt(Nt.Pop,v.location,{initialHydration:!0}),H}function Ln(){f&&f(),A&&A(),_.clear(),b&&b.abort(),v.fetchers.forEach((D,L)=>Yn(L)),v.blockers.forEach((D,L)=>Jr(L))}function wt(D){return _.add(D),()=>_.delete(D)}function Ve(D,L){L===void 0&&(L={}),v=_t({},v,D);let k=[],q=[];d.v7_fetcherPersist&&v.fetchers.forEach((G,Z)=>{G.state==="idle"&&(Ke.has(Z)?q.push(Z):k.push(Z))}),Ke.forEach(G=>{!v.fetchers.has(G)&&!Q.has(G)&&q.push(G)}),[..._].forEach(G=>G(v,{deletedFetchers:q,viewTransitionOpts:L.viewTransitionOpts,flushSync:L.flushSync===!0})),d.v7_fetcherPersist?(k.forEach(G=>v.fetchers.delete(G)),q.forEach(G=>Yn(G))):q.forEach(G=>Ke.delete(G))}function Jt(D,L,k){var q,G;let{flushSync:Z}=k===void 0?{}:k,ue=v.actionData!=null&&v.navigation.formMethod!=null&&Lr(v.navigation.formMethod)&&v.navigation.state==="loading"&&((q=D.state)==null?void 0:q._isRedirect)!==!0,te;L.actionData?Object.keys(L.actionData).length>0?te=L.actionData:te=null:ue?te=v.actionData:te=null;let se=L.loaderData?Dw(v.loaderData,L.loaderData,L.matches||[],L.errors):v.loaderData,ie=v.blockers;ie.size>0&&(ie=new Map(ie),ie.forEach((Te,It)=>ie.set(It,kl)));let K=x===!0||v.navigation.formMethod!=null&&Lr(v.navigation.formMethod)&&((G=D.state)==null?void 0:G._isRedirect)!==!0;a&&(o=a,a=void 0),pe||T===Nt.Pop||(T===Nt.Push?t.history.push(D,D.state):T===Nt.Replace&&t.history.replace(D,D.state));let _e;if(T===Nt.Pop){let Te=O.get(v.location.pathname);Te&&Te.has(D.pathname)?_e={currentLocation:v.location,nextLocation:D}:O.has(D.pathname)&&(_e={currentLocation:D,nextLocation:v.location})}else if(P){let Te=O.get(v.location.pathname);Te?Te.add(D.pathname):(Te=new Set([D.pathname]),O.set(v.location.pathname,Te)),_e={currentLocation:v.location,nextLocation:D}}Ve(_t({},L,{actionData:te,loaderData:se,historyAction:T,location:D,initialized:!0,navigation:Op,revalidation:"idle",restoreScrollPosition:jn(D,L.matches||v.matches),preventScrollReset:K,blockers:ie}),{viewTransitionOpts:_e,flushSync:Z===!0}),T=Nt.Pop,x=!1,P=!1,pe=!1,je=!1,re=[]}async function Gr(D,L){if(typeof D=="number"){t.history.go(D);return}let k=um(v.location,v.matches,l,d.v7_prependBasename,D,d.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:q,submission:G,error:Z}=Rw(d.v7_normalizeFormMethod,!1,k,L),ue=v.location,te=ju(v.location,q,L&&L.state);te=_t({},te,t.history.encodeLocation(te));let se=L&&L.replace!=null?L.replace:void 0,ie=Nt.Push;se===!0?ie=Nt.Replace:se===!1||G!=null&&Lr(G.formMethod)&&G.formAction===v.location.pathname+v.location.search&&(ie=Nt.Replace);let K=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,_e=(L&&L.flushSync)===!0,Te=mi({currentLocation:ue,nextLocation:te,historyAction:ie});if(Te){Xn(Te,{state:"blocked",location:te,proceed(){Xn(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:te}),Gr(D,L)},reset(){let It=new Map(v.blockers);It.set(Te,kl),Ve({blockers:It})}});return}return await Mt(ie,te,{submission:G,pendingError:Z,preventScrollReset:K,replace:L&&L.replace,enableViewTransition:L&&L.viewTransition,flushSync:_e})}function cr(){if(rt(),Ve({revalidation:"loading"}),v.navigation.state!=="submitting"){if(v.navigation.state==="idle"){Mt(v.historyAction,v.location,{startUninterruptedRevalidation:!0});return}Mt(T||v.historyAction,v.navigation.location,{overrideNavigation:v.navigation,enableViewTransition:P===!0})}}async function Mt(D,L,k){b&&b.abort(),b=null,T=D,pe=(k&&k.startUninterruptedRevalidation)===!0,es(v.location,v.matches),x=(k&&k.preventScrollReset)===!0,P=(k&&k.enableViewTransition)===!0;let q=a||o,G=k&&k.overrideNavigation,Z=k!=null&&k.initialHydration&&v.matches&&v.matches.length>0&&!R?v.matches:oo(q,L,l),ue=(k&&k.flushSync)===!0;if(Z&&v.initialized&&!je&&pO(v.location,L)&&!(k&&k.submission&&Lr(k.submission.formMethod))){Jt(L,{matches:Z},{flushSync:ue});return}let te=Zn(Z,q,L.pathname);if(te.active&&te.matches&&(Z=te.matches),!Z){let{error:We,notFoundMatches:ke,route:et}=Jn(L.pathname);Jt(L,{matches:ke,loaderData:{},errors:{[et.id]:We}},{flushSync:ue});return}b=new AbortController;let se=Zo(t.history,L,b.signal,k&&k.submission),ie;if(k&&k.pendingError)ie=[ao(Z).route.id,{type:Ye.error,error:k.pendingError}];else if(k&&k.submission&&Lr(k.submission.formMethod)){let We=await Xs(se,L,k.submission,Z,te.active,{replace:k.replace,flushSync:ue});if(We.shortCircuited)return;if(We.pendingActionResult){let[ke,et]=We.pendingActionResult;if(rr(et)&&Fu(et.error)&&et.error.status===404){b=null,Jt(L,{matches:We.matches,loaderData:{},errors:{[ke]:et.error}});return}}Z=We.matches||Z,ie=We.pendingActionResult,G=Dp(L,k.submission),ue=!1,te.active=!1,se=Zo(t.history,se.url,se.signal)}let{shortCircuited:K,matches:_e,loaderData:Te,errors:It}=await Qr(se,L,Z,te.active,G,k&&k.submission,k&&k.fetcherSubmission,k&&k.replace,k&&k.initialHydration===!0,ue,ie);K||(b=null,Jt(L,_t({matches:_e||Z},Lw(ie),{loaderData:Te,errors:It})))}async function Xs(D,L,k,q,G,Z){Z===void 0&&(Z={}),rt();let ue=wO(L,k);if(Ve({navigation:ue},{flushSync:Z.flushSync===!0}),G){let ie=await Fn(q,L.pathname,D.signal);if(ie.type==="aborted")return{shortCircuited:!0};if(ie.type==="error"){let K=ao(ie.partialMatches).route.id;return{matches:ie.partialMatches,pendingActionResult:[K,{type:Ye.error,error:ie.error}]}}else if(ie.matches)q=ie.matches;else{let{notFoundMatches:K,error:_e,route:Te}=Jn(L.pathname);return{matches:K,pendingActionResult:[Te.id,{type:Ye.error,error:_e}]}}}let te,se=Kl(q,L);if(!se.route.action&&!se.route.lazy)te={type:Ye.error,error:Un(405,{method:D.method,pathname:L.pathname,routeId:se.route.id})};else if(te=(await jt("action",v,D,[se],q,null))[se.route.id],D.signal.aborted)return{shortCircuited:!0};if(fo(te)){let ie;return Z&&Z.replace!=null?ie=Z.replace:ie=kw(te.response.headers.get("Location"),new URL(D.url),l)===v.location.pathname+v.location.search,await Zt(D,te,!0,{submission:k,replace:ie}),{shortCircuited:!0}}if(vs(te))throw Un(400,{type:"defer-action"});if(rr(te)){let ie=ao(q,se.route.id);return(Z&&Z.replace)!==!0&&(T=Nt.Push),{matches:q,pendingActionResult:[ie.route.id,te]}}return{matches:q,pendingActionResult:[se.route.id,te]}}async function Qr(D,L,k,q,G,Z,ue,te,se,ie,K){let _e=G||Dp(L,Z),Te=Z||ue||Fw(_e),It=!pe&&(!d.v7_partialHydration||!se);if(q){if(It){let tt=fi(K);Ve(_t({navigation:_e},tt!==void 0?{actionData:tt}:{}),{flushSync:ie})}let Oe=await Fn(k,L.pathname,D.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){let tt=ao(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,loaderData:{},errors:{[tt]:Oe.error}}}else if(Oe.matches)k=Oe.matches;else{let{error:tt,notFoundMatches:Pr,route:mt}=Jn(L.pathname);return{matches:Pr,loaderData:{},errors:{[mt.id]:tt}}}}let We=a||o,[ke,et]=bw(t.history,v,k,Te,L,d.v7_partialHydration&&se===!0,d.v7_skipActionErrorRevalidation,je,re,Ae,Ke,Pe,ye,We,l,K);if(Rr(Oe=>!(k&&k.some(tt=>tt.route.id===Oe))||ke&&ke.some(tt=>tt.route.id===Oe)),he=++le,ke.length===0&&et.length===0){let Oe=Xr();return Jt(L,_t({matches:k,loaderData:{},errors:K&&rr(K[1])?{[K[0]]:K[1].error}:null},Lw(K),Oe?{fetchers:new Map(v.fetchers)}:{}),{flushSync:ie}),{shortCircuited:!0}}if(It){let Oe={};if(!q){Oe.navigation=_e;let tt=fi(K);tt!==void 0&&(Oe.actionData=tt)}et.length>0&&(Oe.fetchers=Yr(et)),Ve(Oe,{flushSync:ie})}et.forEach(Oe=>{zt(Oe.key),Oe.controller&&Q.set(Oe.key,Oe.controller)});let xr=()=>et.forEach(Oe=>zt(Oe.key));b&&b.signal.addEventListener("abort",xr);let{loaderResults:br,fetcherResults:Vn}=await lt(v,k,ke,et,D);if(D.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",xr),et.forEach(Oe=>Q.delete(Oe.key));let tn=rh(br);if(tn)return await Zt(D,tn.result,!0,{replace:te}),{shortCircuited:!0};if(tn=rh(Vn),tn)return ye.add(tn.key),await Zt(D,tn.result,!0,{replace:te}),{shortCircuited:!0};let{loaderData:ts,errors:Ar}=Ow(v,k,br,K,et,Vn,at);at.forEach((Oe,tt)=>{Oe.subscribe(Pr=>{(Pr||Oe.done)&&at.delete(tt)})}),d.v7_partialHydration&&se&&v.errors&&(Ar=_t({},v.errors,Ar));let pn=Xr(),gn=Ji(he),Zr=pn||gn||et.length>0;return _t({matches:k,loaderData:ts,errors:Ar},Zr?{fetchers:new Map(v.fetchers)}:{})}function fi(D){if(D&&!rr(D[1]))return{[D[0]]:D[1].data};if(v.actionData)return Object.keys(v.actionData).length===0?null:v.actionData}function Yr(D){return D.forEach(L=>{let k=v.fetchers.get(L.key),q=Nl(void 0,k?k.data:void 0);v.fetchers.set(L.key,q)}),new Map(v.fetchers)}function Xi(D,L,k,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");zt(D);let G=(q&&q.flushSync)===!0,Z=a||o,ue=um(v.location,v.matches,l,d.v7_prependBasename,k,d.v7_relativeSplatPath,L,q==null?void 0:q.relative),te=oo(Z,ue,l),se=Zn(te,Z,ue);if(se.active&&se.matches&&(te=se.matches),!te){dn(D,L,Un(404,{pathname:ue}),{flushSync:G});return}let{path:ie,submission:K,error:_e}=Rw(d.v7_normalizeFormMethod,!0,ue,q);if(_e){dn(D,L,_e,{flushSync:G});return}let Te=Kl(te,ie),It=(q&&q.preventScrollReset)===!0;if(K&&Lr(K.formMethod)){pi(D,L,ie,Te,te,se.active,G,It,K);return}Pe.set(D,{routeId:L,path:ie}),Cr(D,L,ie,Te,te,se.active,G,It,K)}async function pi(D,L,k,q,G,Z,ue,te,se){rt(),Pe.delete(D);function ie(j){if(!j.route.action&&!j.route.lazy){let B=Un(405,{method:se.formMethod,pathname:k,routeId:L});return dn(D,L,B,{flushSync:ue}),!0}return!1}if(!Z&&ie(q))return;let K=v.fetchers.get(D);en(D,EO(se,K),{flushSync:ue});let _e=new AbortController,Te=Zo(t.history,k,_e.signal,se);if(Z){let j=await Fn(G,new URL(Te.url).pathname,Te.signal,D);if(j.type==="aborted")return;if(j.type==="error"){dn(D,L,j.error,{flushSync:ue});return}else if(j.matches){if(G=j.matches,q=Kl(G,k),ie(q))return}else{dn(D,L,Un(404,{pathname:k}),{flushSync:ue});return}}Q.set(D,_e);let It=le,ke=(await jt("action",v,Te,[q],G,D))[q.route.id];if(Te.signal.aborted){Q.get(D)===_e&&Q.delete(D);return}if(d.v7_fetcherPersist&&Ke.has(D)){if(fo(ke)||rr(ke)){en(D,ls(void 0));return}}else{if(fo(ke))if(Q.delete(D),he>It){en(D,ls(void 0));return}else return ye.add(D),en(D,Nl(se)),Zt(Te,ke,!1,{fetcherSubmission:se,preventScrollReset:te});if(rr(ke)){dn(D,L,ke.error);return}}if(vs(ke))throw Un(400,{type:"defer-action"});let et=v.navigation.location||v.location,xr=Zo(t.history,et,_e.signal),br=a||o,Vn=v.navigation.state!=="idle"?oo(br,v.navigation.location,l):v.matches;Le(Vn,"Didn't find any matches after fetcher action");let tn=++le;Ee.set(D,tn);let ts=Nl(se,ke.data);v.fetchers.set(D,ts);let[Ar,pn]=bw(t.history,v,Vn,se,et,!1,d.v7_skipActionErrorRevalidation,je,re,Ae,Ke,Pe,ye,br,l,[q.route.id,ke]);pn.filter(j=>j.key!==D).forEach(j=>{let B=j.key,z=v.fetchers.get(B),de=Nl(void 0,z?z.data:void 0);v.fetchers.set(B,de),zt(B),j.controller&&Q.set(B,j.controller)}),Ve({fetchers:new Map(v.fetchers)});let gn=()=>pn.forEach(j=>zt(j.key));_e.signal.addEventListener("abort",gn);let{loaderResults:Zr,fetcherResults:Oe}=await lt(v,Vn,Ar,pn,xr);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",gn),Ee.delete(D),Q.delete(D),pn.forEach(j=>Q.delete(j.key));let tt=rh(Zr);if(tt)return Zt(xr,tt.result,!1,{preventScrollReset:te});if(tt=rh(Oe),tt)return ye.add(tt.key),Zt(xr,tt.result,!1,{preventScrollReset:te});let{loaderData:Pr,errors:mt}=Ow(v,Vn,Zr,void 0,pn,Oe,at);if(v.fetchers.has(D)){let j=ls(ke.data);v.fetchers.set(D,j)}Ji(tn),v.navigation.state==="loading"&&tn>he?(Le(T,"Expected pending action"),b&&b.abort(),Jt(v.navigation.location,{matches:Vn,loaderData:Pr,errors:mt,fetchers:new Map(v.fetchers)})):(Ve({errors:mt,loaderData:Dw(v.loaderData,Pr,Vn,mt),fetchers:new Map(v.fetchers)}),je=!1)}async function Cr(D,L,k,q,G,Z,ue,te,se){let ie=v.fetchers.get(D);en(D,Nl(se,ie?ie.data:void 0),{flushSync:ue});let K=new AbortController,_e=Zo(t.history,k,K.signal);if(Z){let ke=await Fn(G,new URL(_e.url).pathname,_e.signal,D);if(ke.type==="aborted")return;if(ke.type==="error"){dn(D,L,ke.error,{flushSync:ue});return}else if(ke.matches)G=ke.matches,q=Kl(G,k);else{dn(D,L,Un(404,{pathname:k}),{flushSync:ue});return}}Q.set(D,K);let Te=le,We=(await jt("loader",v,_e,[q],G,D))[q.route.id];if(vs(We)&&(We=await a_(We,_e.signal,!0)||We),Q.get(D)===K&&Q.delete(D),!_e.signal.aborted){if(Ke.has(D)){en(D,ls(void 0));return}if(fo(We))if(he>Te){en(D,ls(void 0));return}else{ye.add(D),await Zt(_e,We,!1,{preventScrollReset:te});return}if(rr(We)){dn(D,L,We.error);return}Le(!vs(We),"Unhandled fetcher deferred data"),en(D,ls(We.data))}}async function Zt(D,L,k,q){let{submission:G,fetcherSubmission:Z,preventScrollReset:ue,replace:te}=q===void 0?{}:q;L.response.headers.has("X-Remix-Revalidate")&&(je=!0);let se=L.response.headers.get("Location");Le(se,"Expected a Location header on the redirect Response"),se=kw(se,new URL(D.url),l);let ie=ju(v.location,se,{_isRedirect:!0});if(n){let ke=!1;if(L.response.headers.has("X-Remix-Reload-Document"))ke=!0;else if(o_.test(se)){const et=t.history.createURL(se);ke=et.origin!==e.location.origin||tl(et.pathname,l)==null}if(ke){te?e.location.replace(se):e.location.assign(se);return}}b=null;let K=te===!0||L.response.headers.has("X-Remix-Replace")?Nt.Replace:Nt.Push,{formMethod:_e,formAction:Te,formEncType:It}=v.navigation;!G&&!Z&&_e&&Te&&It&&(G=Fw(v.navigation));let We=G||Z;if(tO.has(L.response.status)&&We&&Lr(We.formMethod))await Mt(K,ie,{submission:_t({},We,{formAction:se}),preventScrollReset:ue||x,enableViewTransition:k?P:void 0});else{let ke=Dp(ie,G);await Mt(K,ie,{overrideNavigation:ke,fetcherSubmission:Z,preventScrollReset:ue||x,enableViewTransition:k?P:void 0})}}async function jt(D,L,k,q,G,Z){let ue,te={};try{ue=await uO(c,D,L,k,q,G,Z,s,i)}catch(se){return q.forEach(ie=>{te[ie.route.id]={type:Ye.error,error:se}}),te}for(let[se,ie]of Object.entries(ue))if(gO(ie)){let K=ie.result;te[se]={type:Ye.redirect,response:dO(K,k,se,G,l,d.v7_relativeSplatPath)}}else te[se]=await hO(ie);return te}async function lt(D,L,k,q,G){let Z=D.matches,ue=jt("loader",D,G,k,L,null),te=Promise.all(q.map(async K=>{if(K.matches&&K.match&&K.controller){let Te=(await jt("loader",D,Zo(t.history,K.path,K.controller.signal),[K.match],K.matches,K.key))[K.match.route.id];return{[K.key]:Te}}else return Promise.resolve({[K.key]:{type:Ye.error,error:Un(404,{pathname:K.path})}})})),se=await ue,ie=(await te).reduce((K,_e)=>Object.assign(K,_e),{});return await Promise.all([_O(L,se,G.signal,Z,D.loaderData),vO(L,ie,q)]),{loaderResults:se,fetcherResults:ie}}function rt(){je=!0,re.push(...Rr()),Pe.forEach((D,L)=>{Q.has(L)&&Ae.add(L),zt(L)})}function en(D,L,k){k===void 0&&(k={}),v.fetchers.set(D,L),Ve({fetchers:new Map(v.fetchers)},{flushSync:(k&&k.flushSync)===!0})}function dn(D,L,k,q){q===void 0&&(q={});let G=ao(v.matches,L);Yn(D),Ve({errors:{[G.route.id]:k},fetchers:new Map(v.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function gi(D){return Ze.set(D,(Ze.get(D)||0)+1),Ke.has(D)&&Ke.delete(D),v.fetchers.get(D)||nO}function Yn(D){let L=v.fetchers.get(D);Q.has(D)&&!(L&&L.state==="loading"&&Ee.has(D))&&zt(D),Pe.delete(D),Ee.delete(D),ye.delete(D),d.v7_fetcherPersist&&Ke.delete(D),Ae.delete(D),v.fetchers.delete(D)}function Mn(D){let L=(Ze.get(D)||0)-1;L<=0?(Ze.delete(D),Ke.add(D),d.v7_fetcherPersist||Yn(D)):Ze.set(D,L),Ve({fetchers:new Map(v.fetchers)})}function zt(D){let L=Q.get(D);L&&(L.abort(),Q.delete(D))}function hr(D){for(let L of D){let k=gi(L),q=ls(k.data);v.fetchers.set(L,q)}}function Xr(){let D=[],L=!1;for(let k of ye){let q=v.fetchers.get(k);Le(q,"Expected fetcher: "+k),q.state==="loading"&&(ye.delete(k),D.push(k),L=!0)}return hr(D),L}function Ji(D){let L=[];for(let[k,q]of Ee)if(q<D){let G=v.fetchers.get(k);Le(G,"Expected fetcher: "+k),G.state==="loading"&&(zt(k),Ee.delete(k),L.push(k))}return hr(L),L.length>0}function Zi(D,L){let k=v.blockers.get(D)||kl;return fe.get(D)!==L&&fe.set(D,L),k}function Jr(D){v.blockers.delete(D),fe.delete(D)}function Xn(D,L){let k=v.blockers.get(D)||kl;Le(k.state==="unblocked"&&L.state==="blocked"||k.state==="blocked"&&L.state==="blocked"||k.state==="blocked"&&L.state==="proceeding"||k.state==="blocked"&&L.state==="unblocked"||k.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+k.state+" -> "+L.state);let q=new Map(v.blockers);q.set(D,L),Ve({blockers:q})}function mi(D){let{currentLocation:L,nextLocation:k,historyAction:q}=D;if(fe.size===0)return;fe.size>1&&Fa(!1,"A router only supports one blocker at a time");let G=Array.from(fe.entries()),[Z,ue]=G[G.length-1],te=v.blockers.get(Z);if(!(te&&te.state==="proceeding")&&ue({currentLocation:L,nextLocation:k,historyAction:q}))return Z}function Jn(D){let L=Un(404,{pathname:D}),k=a||o,{matches:q,route:G}=Mw(k);return Rr(),{notFoundMatches:q,route:G,error:L}}function Rr(D){let L=[];return at.forEach((k,q)=>{(!D||D(q))&&(k.cancel(),L.push(q),at.delete(q))}),L}function yi(D,L,k){if(y=D,C=L,w=k||null,!S&&v.navigation===Op){S=!0;let q=jn(v.location,v.matches);q!=null&&Ve({restoreScrollPosition:q})}return()=>{y=null,C=null,w=null}}function fn(D,L){return w&&w(D,L.map(q=>ON(q,v.loaderData)))||D.key}function es(D,L){if(y&&C){let k=fn(D,L);y[k]=C()}}function jn(D,L){if(y){let k=fn(D,L),q=y[k];if(typeof q=="number")return q}return null}function Zn(D,L,k){if(h)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:Ah(L,k,l,!0)}}else return{active:!0,matches:Ah(L,k,l,!0)||[]};return{active:!1,matches:null}}async function Fn(D,L,k,q){if(!h)return{type:"success",matches:D};let G=D;for(;;){let Z=a==null,ue=a||o,te=s;try{await h({signal:k,path:L,matches:G,fetcherKey:q,patch:(K,_e)=>{k.aborted||Pw(K,_e,ue,te,i)}})}catch(K){return{type:"error",error:K,partialMatches:G}}finally{Z&&!k.aborted&&(o=[...o])}if(k.aborted)return{type:"aborted"};let se=oo(ue,L,l);if(se)return{type:"success",matches:se};let ie=Ah(ue,L,l,!0);if(!ie||G.length===ie.length&&G.every((K,_e)=>K.route.id===ie[_e].route.id))return{type:"success",matches:null};G=ie}}function U(D){s={},a=vd(D,i,void 0,s)}function st(D,L){let k=a==null;Pw(D,L,a||o,s,i),k&&(o=[...o],Ve({}))}return H={get basename(){return l},get future(){return d},get state(){return v},get routes(){return o},get window(){return e},initialize:Qn,subscribe:wt,enableScrollRestoration:yi,navigate:Gr,fetch:Xi,revalidate:cr,createHref:D=>t.history.createHref(D),encodeLocation:D=>t.history.encodeLocation(D),getFetcher:gi,deleteFetcher:Mn,dispose:Ln,getBlocker:Zi,deleteBlocker:Jr,patchRoutes:st,_internalFetchControllers:Q,_internalActiveDeferreds:at,_internalSetRoutes:U},H}function sO(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function um(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let h=s_(i||".",i_(l,s),tl(t.pathname,n)||t.pathname,a==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c){let d=l_(h.search);if(c.route.index&&!d)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let f=new URLSearchParams(h.search),_=f.getAll("index");f.delete("index"),_.filter(w=>w).forEach(w=>f.append("index",w));let y=f.toString();h.search=y?"?"+y:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ni([n,h.pathname])),bo(h)}function Rw(t,e,n,r){if(!r||!sO(r))return{path:n};if(r.formMethod&&!yO(r.formMethod))return{path:n,error:Un(405,{method:r.formMethod})};let i=()=>({path:n,error:Un(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=rC(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Lr(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,y)=>{let[w,C]=y;return""+_+w+"="+C+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Lr(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Le(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=hm(r.formData),c=r.formData;else if(r.body instanceof FormData)l=hm(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Nw(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Nw(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Lr(h.formMethod))return{path:n,submission:h};let d=qs(n);return e&&d.search&&l_(d.search)&&l.append("index",""),d.search="?"+l,{path:bo(d),submission:h}}function xw(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function bw(t,e,n,r,i,s,o,a,l,c,h,d,f,_,y,w){let C=w?rr(w[1])?w[1].error:w[1].data:void 0,S=t.createURL(e.location),E=t.createURL(i),R=n;s&&e.errors?R=xw(n,Object.keys(e.errors)[0],!0):w&&rr(w[1])&&(R=xw(n,w[0]));let M=w?w[1].statusCode:void 0,V=o&&M&&M>=400,H=R.filter((T,x)=>{let{route:b}=T;if(b.lazy)return!0;if(b.loader==null)return!1;if(s)return cm(b,e.loaderData,e.errors);if(oO(e.loaderData,e.matches[x],T)||l.some(A=>A===T.route.id))return!0;let P=e.matches[x],O=T;return Aw(T,_t({currentUrl:S,currentParams:P.params,nextUrl:E,nextParams:O.params},r,{actionResult:C,actionStatus:M,defaultShouldRevalidate:V?!1:a||S.pathname+S.search===E.pathname+E.search||S.search!==E.search||tC(P,O)}))}),v=[];return d.forEach((T,x)=>{if(s||!n.some(pe=>pe.route.id===T.routeId)||h.has(x))return;let b=oo(_,T.path,y);if(!b){v.push({key:x,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(x),O=Kl(b,T.path),A=!1;f.has(x)?A=!1:c.has(x)?(c.delete(x),A=!0):P&&P.state!=="idle"&&P.data===void 0?A=a:A=Aw(O,_t({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:C,actionStatus:M,defaultShouldRevalidate:V?!1:a})),A&&v.push({key:x,routeId:T.routeId,path:T.path,matches:b,match:O,controller:new AbortController})}),[H,v]}function cm(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function oO(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function tC(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Aw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Pw(t,e,n,r,i){var s;let o;if(t){let c=r[t];Le(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(h=>nC(c,h))),l=vd(a,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...l)}function nC(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>nC(n,s))}):!1}async function aO(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Le(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Fa(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!kN.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,_t({},e(i),{lazy:void 0}))}async function lO(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function uO(t,e,n,r,i,s,o,a,l,c){let h=s.map(_=>_.route.lazy?aO(_.route,l,a):void 0),d=s.map((_,y)=>{let w=h[y],C=i.some(E=>E.route.id===_.route.id);return _t({},_,{shouldLoad:C,resolve:async E=>(E&&r.method==="GET"&&(_.route.lazy||_.route.loader)&&(C=!0),C?cO(e,r,_,w,E,c):Promise.resolve({type:Ye.data,result:void 0}))})}),f=await t({matches:d,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return f}async function cO(t,e,n,r,i,s){let o,a,l=c=>{let h,d=new Promise((y,w)=>h=w);a=()=>h(),e.signal.addEventListener("abort",a);let f=y=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),_=(async()=>{try{return{type:"data",result:await(i?i(w=>f(w)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([_,d])};try{let c=n.route[t];if(r)if(c){let h,[d]=await Promise.all([l(c).catch(f=>{h=f}),r]);if(h!==void 0)throw h;o=d}else if(await r,c=n.route[t],c)o=await l(c);else if(t==="action"){let h=new URL(e.url),d=h.pathname+h.search;throw Un(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:Ye.data,result:void 0};else if(c)o=await l(c);else{let h=new URL(e.url),d=h.pathname+h.search;throw Un(404,{pathname:d})}Le(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Ye.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function hO(t){let{result:e,type:n}=t;if(iC(e)){let d;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(f){return{type:Ye.error,error:f}}return n===Ye.error?{type:Ye.error,error:new wd(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:Ye.data,data:d,statusCode:e.status,headers:e.headers}}if(n===Ye.error){if(jw(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Ye.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Ye.error,error:new wd(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Fu(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Ye.error,error:e,statusCode:Fu(e)?e.status:void 0}}if(mO(e)){var a,l;return{type:Ye.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(jw(e)){var c,h;return{type:Ye.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:Ye.data,data:e}}function dO(t,e,n,r,i,s){let o=t.headers.get("Location");if(Le(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!o_.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=um(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function kw(t,e,n){if(o_.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=tl(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Zo(t,e,n,r){let i=t.createURL(rC(e)).toString(),s={signal:n};if(r&&Lr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=hm(r.formData):s.body=r.formData}return new Request(i,s)}function hm(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Nw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function fO(t,e,n,r,i){let s={},o=null,a,l=!1,c={},h=n&&rr(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,_=e[f];if(Le(!fo(_),"Cannot handle redirect results in processLoaderData"),rr(_)){let y=_.error;h!==void 0&&(y=h,h=void 0),o=o||{};{let w=ao(t,f);o[w.route.id]==null&&(o[w.route.id]=y)}s[f]=void 0,l||(l=!0,a=Fu(_.error)?_.error.status:500),_.headers&&(c[f]=_.headers)}else vs(_)?(r.set(f,_.deferredData),s[f]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!l&&(a=_.statusCode),_.headers&&(c[f]=_.headers)):(s[f]=_.data,_.statusCode&&_.statusCode!==200&&!l&&(a=_.statusCode),_.headers&&(c[f]=_.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function Ow(t,e,n,r,i,s,o){let{loaderData:a,errors:l}=fO(e,n,r,o);return i.forEach(c=>{let{key:h,match:d,controller:f}=c,_=s[h];if(Le(_,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(rr(_)){let y=ao(t.matches,d==null?void 0:d.route.id);l&&l[y.route.id]||(l=_t({},l,{[y.route.id]:_.error})),t.fetchers.delete(h)}else if(fo(_))Le(!1,"Unhandled fetcher revalidation redirect");else if(vs(_))Le(!1,"Unhandled fetcher deferred data");else{let y=ls(_.data);t.fetchers.set(h,y)}}),{loaderData:a,errors:l}}function Dw(t,e,n,r){let i=_t({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Lw(t){return t?rr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ao(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Mw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Un(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new wd(t||500,a,new Error(l),!0)}function rh(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(fo(i))return{key:r,result:i}}}function rC(t){let e=typeof t=="string"?qs(t):t;return bo(_t({},e,{hash:""}))}function pO(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function gO(t){return iC(t.result)&&eO.has(t.result.status)}function vs(t){return t.type===Ye.deferred}function rr(t){return t.type===Ye.error}function fo(t){return(t&&t.type)===Ye.redirect}function jw(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function mO(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function iC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function yO(t){return ZN.has(t.toLowerCase())}function Lr(t){return XN.has(t.toLowerCase())}async function _O(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=t.find(f=>(f==null?void 0:f.route.id)===a);if(!c)continue;let h=r.find(f=>f.route.id===c.route.id),d=h!=null&&!tC(h,c)&&(i&&i[c.route.id])!==void 0;vs(l)&&d&&await a_(l,n,!1).then(f=>{f&&(e[a]=f)})}}async function vO(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&vs(a)&&(Le(o,"Expected an AbortController for revalidating fetcher deferred result"),await a_(a,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function a_(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ye.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ye.error,error:i}}return{type:Ye.data,data:t.deferredData.data}}}function l_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Kl(t,e){let n=typeof e=="string"?qs(e).search:e.search;if(t[t.length-1].route.index&&l_(n||""))return t[t.length-1];let r=JI(t);return r[r.length-1]}function Fw(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Dp(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wO(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Nl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function EO(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ls(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function TO(t,e){try{let n=t.sessionStorage.getItem(eC);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function SO(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(eC,JSON.stringify(n))}catch(r){Fa(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}const gf=N.createContext(null),sC=N.createContext(null),$o=N.createContext(null),u_=N.createContext(null),Ks=N.createContext({outlet:null,matches:[],isDataRoute:!1}),oC=N.createContext(null);function IO(t,e){let{relative:n}=e===void 0?{}:e;lc()||Le(!1);let{basename:r,navigator:i}=N.useContext($o),{hash:s,pathname:o,search:a}=lC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ni([r,o])),i.createHref({pathname:l,search:a,hash:s})}function lc(){return N.useContext(u_)!=null}function mf(){return lc()||Le(!1),N.useContext(u_).location}function aC(t){N.useContext($o).static||N.useLayoutEffect(t)}function c_(){let{isDataRoute:t}=N.useContext(Ks);return t?FO():CO()}function CO(){lc()||Le(!1);let t=N.useContext(gf),{basename:e,future:n,navigator:r}=N.useContext($o),{matches:i}=N.useContext(Ks),{pathname:s}=mf(),o=JSON.stringify(i_(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return aC(()=>{a.current=!0}),N.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=s_(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ni([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const RO=N.createContext(null);function xO(t){let e=N.useContext(Ks).outlet;return e&&N.createElement(RO.Provider,{value:t},e)}function lC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext($o),{matches:i}=N.useContext(Ks),{pathname:s}=mf(),o=JSON.stringify(i_(i,r.v7_relativeSplatPath));return N.useMemo(()=>s_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function bO(t,e,n,r){lc()||Le(!1);let{navigator:i}=N.useContext($o),{matches:s}=N.useContext(Ks),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=mf(),h;h=c;let d=h.pathname||"/",f=d;if(l!=="/"){let w=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=oo(t,{pathname:f});return OO(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ni([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Ni([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r)}function AO(){let t=jO(),e=Fu(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const PO=N.createElement(AO,null);class kO extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Ks.Provider,{value:this.props.routeContext},N.createElement(oC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NO(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(gf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Ks.Provider,{value:e},r)}function OO(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Le(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:_}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let _,y=!1,w=null,C=null;n&&(_=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||PO,l&&(c<0&&f===0?(VO("route-fallback"),y=!0,C=null):c===f&&(y=!0,C=d.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,f+1)),E=()=>{let R;return _?R=w:y?R=C:d.route.Component?R=N.createElement(d.route.Component,null):d.route.element?R=d.route.element:R=h,N.createElement(NO,{match:d,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:R})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?N.createElement(kO,{location:n.location,revalidation:n.revalidation,component:w,error:_,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var uC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uC||{}),cC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cC||{});function DO(t){let e=N.useContext(gf);return e||Le(!1),e}function LO(t){let e=N.useContext(sC);return e||Le(!1),e}function MO(t){let e=N.useContext(Ks);return e||Le(!1),e}function hC(t){let e=MO(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function jO(){var t;let e=N.useContext(oC),n=LO(cC.UseRouteError),r=hC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function FO(){let{router:t}=DO(uC.UseNavigateStable),e=hC(),n=N.useRef(!1);return aC(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ed({fromRouteId:e},s)))},[t,e])}const Vw={};function VO(t,e,n){Vw[t]||(Vw[t]=!0)}function UO(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function BO(t){return xO(t.context)}function $O(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Nt.Pop,navigator:s,static:o=!1,future:a}=t;lc()&&Le(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Ed({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=qs(r));let{pathname:h="/",search:d="",hash:f="",state:_=null,key:y="default"}=r,w=N.useMemo(()=>{let C=tl(h,l);return C==null?null:{location:{pathname:C,search:d,hash:f,state:_,key:y},navigationType:i}},[l,h,d,f,_,y,i]);return w==null?null:N.createElement($o.Provider,{value:c},N.createElement(u_.Provider,{children:n,value:w}))}new Promise(()=>{});function zO(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:N.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:N.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:N.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vu.apply(this,arguments)}function WO(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function HO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qO(t,e){return t.button===0&&(!e||e==="_self")&&!HO(t)}const KO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GO="6";try{window.__reactRouterVersion=GO}catch{}function QO(t,e){return iO({basename:void 0,future:Vu({},void 0,{v7_prependBasename:!0}),history:bN({window:void 0}),hydrationData:YO(),routes:t,mapRouteProperties:zO,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function YO(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Vu({},e,{errors:XO(e.errors)})),e}function XO(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new wd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const JO=N.createContext({isTransitioning:!1}),ZO=N.createContext(new Map),eD="startTransition",Uw=gP[eD],tD="flushSync",Bw=xN[tD];function nD(t){Uw?Uw(t):t()}function Ol(t){Bw?Bw(t):t()}let rD=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function iD(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=N.useState(n.state),[o,a]=N.useState(),[l,c]=N.useState({isTransitioning:!1}),[h,d]=N.useState(),[f,_]=N.useState(),[y,w]=N.useState(),C=N.useRef(new Map),{v7_startTransition:S}=r||{},E=N.useCallback(T=>{S?nD(T):T()},[S]),R=N.useCallback((T,x)=>{let{deletedFetchers:b,flushSync:P,viewTransitionOpts:O}=x;T.fetchers.forEach((pe,je)=>{pe.data!==void 0&&C.current.set(je,pe.data)}),b.forEach(pe=>C.current.delete(pe));let A=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!O||A){P?Ol(()=>s(T)):E(()=>s(T));return}if(P){Ol(()=>{f&&(h&&h.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let pe=n.window.document.startViewTransition(()=>{Ol(()=>s(T))});pe.finished.finally(()=>{Ol(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),Ol(()=>_(pe));return}f?(h&&h.resolve(),f.skipTransition(),w({state:T,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(a(T),c({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[n.window,f,h,C,E]);N.useLayoutEffect(()=>n.subscribe(R),[n,R]),N.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new rD)},[l]),N.useEffect(()=>{if(h&&o&&n.window){let T=o,x=h.promise,b=n.window.document.startViewTransition(async()=>{E(()=>s(T)),await x});b.finished.finally(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(b)}},[E,o,h,n.window]),N.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,f,i.location,o]),N.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),w(void 0))},[l.isTransitioning,y]),N.useEffect(()=>{},[]);let M=N.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,x,b)=>n.navigate(T,{state:x,preventScrollReset:b==null?void 0:b.preventScrollReset}),replace:(T,x,b)=>n.navigate(T,{replace:!0,state:x,preventScrollReset:b==null?void 0:b.preventScrollReset})}),[n]),V=n.basename||"/",H=N.useMemo(()=>({router:n,navigator:M,static:!1,basename:V}),[n,M,V]),v=N.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return N.useEffect(()=>UO(r,n.future),[r,n.future]),N.createElement(N.Fragment,null,N.createElement(gf.Provider,{value:H},N.createElement(sC.Provider,{value:i},N.createElement(ZO.Provider,{value:C.current},N.createElement(JO.Provider,{value:l},N.createElement($O,{basename:V,location:i.location,navigationType:i.historyAction,navigator:M,future:v},i.initialized||n.future.v7_partialHydration?N.createElement(sD,{routes:n.routes,future:n.future,state:i}):e))))),null)}const sD=N.memo(oD);function oD(t){let{routes:e,future:n,state:r}=t;return bO(e,void 0,r,n)}const aD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Si=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=WO(e,KO),{basename:_}=N.useContext($o),y,w=!1;if(typeof c=="string"&&lD.test(c)&&(y=c,aD))try{let R=new URL(window.location.href),M=c.startsWith("//")?new URL(R.protocol+c):new URL(c),V=tl(M.pathname,_);M.origin===R.origin&&V!=null?c=V+M.search+M.hash:w=!0}catch{}let C=IO(c,{relative:i}),S=uD(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function E(R){r&&r(R),R.defaultPrevented||S(R)}return N.createElement("a",Vu({},f,{href:y||C,onClick:w||s?r:E,ref:n,target:l}))});var $w;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($w||($w={}));var zw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zw||(zw={}));function uD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=c_(),c=mf(),h=lC(t,{relative:o});return N.useCallback(d=>{if(qO(d,n)){d.preventDefault();let f=r!==void 0?r:bo(c)===bo(h);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var Ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw nl(e)},nl=function(t){return new Error("Firebase Database ("+dC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(f=64)),r.push(n[h],n[d],n[f],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new hD;const f=s<<2|a>>4;if(r.push(f),c!==64){const _=a<<4&240|c>>2;if(r.push(_),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pC=function(t){const e=fC(t);return h_.encodeByteArray(e,!0)},Td=function(t){return pC(t).replace(/\./g,"")},Sd=function(t){try{return h_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){return gC(void 0,t)}function gC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!fD(n)||(t[n]=gC(t[n],e[n]));return t}function fD(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=()=>pD().__FIREBASE_DEFAULTS__,mD=()=>{if(typeof process>"u"||typeof Ww>"u")return;const t=Ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sd(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return gD()||mD()||yD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mC=t=>{var e,n;return(n=(e=yf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yC=t=>{const e=mC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_C=()=>{var t;return(t=yf())===null||t===void 0?void 0:t.config},vC=t=>{var e;return(e=yf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Td(JSON.stringify(n)),Td(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function _D(){var t;const e=(t=yf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ED(){const t=Pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TD(){return dC.NODE_ADMIN===!0}function SD(){return!_D()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ID(){try{return typeof indexedDB=="object"}catch{return!1}}function CD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="FirebaseError";class qi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RD,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qi(i,a,r)}}function xD(t,e){return t.replace(bD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return JSON.parse(t)}function on(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Uu(Sd(s[0])||""),n=Uu(Sd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},AD=function(t){const e=TC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},PD=function(t){const e=TC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Va(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function dm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Id(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Cd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Hw(s)&&Hw(o)){if(!Cd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Hw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ql(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const f=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function ND(t,e){const n=new OD(t,e);return n.subscribe.bind(n)}class OD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lp),i.error===void 0&&(i.error=Lp),i.complete===void 0&&(i.complete=Lp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lp(){}function LD(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_f=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jD=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new d_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VD(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FD(t){return t===io?void 0:t}function VD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const BD={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},$D=De.INFO,zD={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},WD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vf{constructor(e){this.name=e,this._logLevel=$D,this._logHandler=WD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const HD=(t,e)=>e.some(n=>t instanceof n);let qw,Kw;function qD(){return qw||(qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KD(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SC=new WeakMap,fm=new WeakMap,IC=new WeakMap,Mp=new WeakMap,p_=new WeakMap;function GD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(As(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SC.set(n,t)}).catch(()=>{}),p_.set(e,t),e}function QD(t){if(fm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fm.set(t,e)}let pm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YD(t){pm=t(pm)}function XD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jp(this),e,...n);return IC.set(r,e.sort?e.sort():[e]),As(r)}:KD().includes(t)?function(...e){return t.apply(jp(this),e),As(SC.get(this))}:function(...e){return As(t.apply(jp(this),e))}}function JD(t){return typeof t=="function"?XD(t):(t instanceof IDBTransaction&&QD(t),HD(t,qD())?new Proxy(t,pm):t)}function As(t){if(t instanceof IDBRequest)return GD(t);if(Mp.has(t))return Mp.get(t);const e=JD(t);return e!==t&&(Mp.set(t,e),p_.set(e,t)),e}const jp=t=>p_.get(t);function ZD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=As(o);return r&&o.addEventListener("upgradeneeded",l=>{r(As(o.result),l.oldVersion,l.newVersion,As(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const e2=["get","getKey","getAll","getAllKeys","count"],t2=["put","add","delete","clear"],Fp=new Map;function Gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fp.get(e))return Fp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=t2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Fp.set(e,s),s}YD(t=>({...t,get:(e,n,r)=>Gw(e,n)||t.get(e,n,r),has:(e,n)=>!!Gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gm="@firebase/app",Qw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new vf("@firebase/app"),i2="@firebase/app-compat",s2="@firebase/analytics-compat",o2="@firebase/analytics",a2="@firebase/app-check-compat",l2="@firebase/app-check",u2="@firebase/auth",c2="@firebase/auth-compat",h2="@firebase/database",d2="@firebase/data-connect",f2="@firebase/database-compat",p2="@firebase/functions",g2="@firebase/functions-compat",m2="@firebase/installations",y2="@firebase/installations-compat",_2="@firebase/messaging",v2="@firebase/messaging-compat",w2="@firebase/performance",E2="@firebase/performance-compat",T2="@firebase/remote-config",S2="@firebase/remote-config-compat",I2="@firebase/storage",C2="@firebase/storage-compat",R2="@firebase/firestore",x2="@firebase/vertexai-preview",b2="@firebase/firestore-compat",A2="firebase",P2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",k2={[gm]:"fire-core",[i2]:"fire-core-compat",[o2]:"fire-analytics",[s2]:"fire-analytics-compat",[l2]:"fire-app-check",[a2]:"fire-app-check-compat",[u2]:"fire-auth",[c2]:"fire-auth-compat",[h2]:"fire-rtdb",[d2]:"fire-data-connect",[f2]:"fire-rtdb-compat",[p2]:"fire-fn",[g2]:"fire-fn-compat",[m2]:"fire-iid",[y2]:"fire-iid-compat",[_2]:"fire-fcm",[v2]:"fire-fcm-compat",[w2]:"fire-perf",[E2]:"fire-perf-compat",[T2]:"fire-rc",[S2]:"fire-rc-compat",[I2]:"fire-gcs",[C2]:"fire-gcs-compat",[R2]:"fire-fst",[b2]:"fire-fst-compat",[x2]:"fire-vertex","fire-js":"fire-js",[A2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,N2=new Map,ym=new Map;function Yw(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ao(t){const e=t.name;if(ym.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;ym.set(e,t);for(const n of Rd.values())Yw(n,t);for(const n of N2.values())Yw(n,t);return!0}function wf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new uc("app","Firebase",O2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=P2;function CC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(n||(n=_C()),!n)throw Ps.create("no-options");const s=Rd.get(i);if(s){if(Cd(n,s.options)&&Cd(r,s.config))return s;throw Ps.create("duplicate-app",{appName:i})}const o=new UD(i);for(const l of ym.values())o.addComponent(l);const a=new D2(n,r,o);return Rd.set(i,a),a}function g_(t=mm){const e=Rd.get(t);if(!e&&t===mm&&_C())return CC();if(!e)throw Ps.create("no-app",{appName:t});return e}function li(t,e,n){var r;let i=(r=k2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(a.join(" "));return}Ao(new Fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="firebase-heartbeat-database",M2=1,Bu="firebase-heartbeat-store";let Vp=null;function RC(){return Vp||(Vp=ZD(L2,M2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),Vp}async function j2(t){try{const n=(await RC()).transaction(Bu),r=await n.objectStore(Bu).get(xC(t));return await n.done,r}catch(e){if(e instanceof qi)Ui.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function Xw(t,e){try{const r=(await RC()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(e,xC(t)),await r.done}catch(n){if(n instanceof qi)Ui.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(r.message)}}}function xC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=1024,V2=30*24*60*60*1e3;class U2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=V2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jw(),{heartbeatsToSend:r,unsentEntries:i}=B2(this._heartbeatsCache.heartbeats),s=Td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ui.warn(n),""}}}function Jw(){return new Date().toISOString().substring(0,10)}function B2(t,e=F2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Zw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ID()?CD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await j2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zw(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){Ao(new Fs("platform-logger",e=>new n2(e),"PRIVATE")),Ao(new Fs("heartbeat",e=>new U2(e),"PRIVATE")),li(gm,Qw,t),li(gm,Qw,"esm2017"),li("fire-js","")}z2("");function m_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W2=bC,AC=new uc("auth","Firebase",bC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new vf("@firebase/auth");function H2(t,...e){xd.logLevel<=De.WARN&&xd.warn(`Auth (${zo}): ${t}`,...e)}function Ph(t,...e){xd.logLevel<=De.ERROR&&xd.error(`Auth (${zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,...e){throw __(t,...e)}function zr(t,...e){return __(t,...e)}function y_(t,e,n){const r=Object.assign(Object.assign({},W2()),{[e]:n});return new uc("auth","Firebase",r).create(e,{appName:t.name})}function Oi(t){return y_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sr(t,"argument-error"),y_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function __(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AC.create(t,...e)}function we(t,e,...n){if(!t)throw __(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ph(e),new Error(e)}function Bi(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K2(){return eE()==="http:"||eE()==="https:"}function eE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K2()||wD()||"connection"in navigator)?navigator.onLine:!0}function Q2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=f_()||EC()}get(){return G2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new cc(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gi(t,e,n,r,i={}){return kC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=rl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return vD()||(c.referrerPolicy="no-referrer"),PC.fetch()(NC(t,t.config.apiHost,n,a),c)})}async function kC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Y2),e);try{const i=new Z2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ih(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ih(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ih(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw y_(t,h,c);Sr(t,h)}}catch(i){if(i instanceof qi)throw i;Sr(t,"network-request-failed",{message:String(i)})}}async function hc(t,e,n,r,i={}){const s=await Gi(t,e,n,r,i);return"mfaPendingCredential"in s&&Sr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function NC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?v_(t.config,i):`${t.config.apiScheme}://${i}`}function J2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zr(this.auth,"network-request-failed")),X2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ih(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zr(t,e,r);return i.customData._tokenResponse=n,i}function tE(t){return t!==void 0&&t.enterprise!==void 0}class eL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return J2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tL(t,e){return Gi(t,"GET","/v2/recaptchaConfig",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e){return Gi(t,"POST","/v1/accounts:delete",e)}async function OC(t,e){return Gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rL(t,e=!1){const n=Xt(t),r=await n.getIdToken(e),i=w_(r);we(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:uu(Up(i.auth_time)),issuedAtTime:uu(Up(i.iat)),expirationTime:uu(Up(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Up(t){return Number(t)*1e3}function w_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const i=Sd(n);return i?JSON.parse(i):(Ph("Failed to decode base64 JWT payload"),null)}catch(i){return Ph("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nE(t){const e=w_(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qi&&iL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ua(t,OC(n,{idToken:r}));we(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?DC(s.providerUserInfo):[],a=aL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function oL(t){const e=Xt(t);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DC(t){return t.map(e=>{var{providerId:n}=e,r=m_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e){const n=await kC(t,{},async()=>{const r=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=NC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",PC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uL(t,e){return Gi(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=nE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await lL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ca;return r&&(we(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(we(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(we(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=m_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rL(this,e)}reload(){return oL(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Ua(this,nL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:R,emailVerified:M,isAnonymous:V,providerData:H,stsTokenManager:v}=n;we(R&&v,e,"internal-error");const T=Ca.fromJSON(this.name,v);we(typeof R=="string",e,"internal-error"),ss(d,e.name),ss(f,e.name),we(typeof M=="boolean",e,"internal-error"),we(typeof V=="boolean",e,"internal-error"),ss(_,e.name),ss(y,e.name),ss(w,e.name),ss(C,e.name),ss(S,e.name),ss(E,e.name);const x=new bi({uid:R,auth:e,email:f,emailVerified:M,displayName:d,isAnonymous:V,photoURL:y,phoneNumber:_,tenantId:w,stsTokenManager:T,createdAt:S,lastLoginAt:E});return H&&Array.isArray(H)&&(x.providerData=H.map(b=>Object.assign({},b))),C&&(x._redirectEventId=C),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ca;i.updateFromServerResponse(n);const s=new bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];we(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?DC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ca;a.updateFromIdToken(r);const l=new bi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;function Ai(t){Bi(t instanceof Function,"Expected a class definition");let e=rE.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LC.type="NONE";const iE=LC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ra{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=kh(this.userKey,i.apiKey,s),this.fullPersistenceKey=kh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ra(Ai(iE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ai(iE);const o=kh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=bi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ra(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ra(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BC(e))return"Blackberry";if($C(e))return"Webos";if(jC(e))return"Safari";if((e.includes("chrome/")||FC(e))&&!e.includes("edge/"))return"Chrome";if(UC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MC(t=Pn()){return/firefox\//i.test(t)}function jC(t=Pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FC(t=Pn()){return/crios\//i.test(t)}function VC(t=Pn()){return/iemobile/i.test(t)}function UC(t=Pn()){return/android/i.test(t)}function BC(t=Pn()){return/blackberry/i.test(t)}function $C(t=Pn()){return/webos/i.test(t)}function E_(t=Pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cL(t=Pn()){var e;return E_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hL(){return ED()&&document.documentMode===10}function zC(t=Pn()){return E_(t)||UC(t)||$C(t)||BC(t)||/windows phone/i.test(t)||VC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e=[]){let n;switch(t){case"Browser":n=sE(Pn());break;case"Worker":n=`${sE(Pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e={}){return Gi(t,"GET","/v2/passwordPolicy",Gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=6;class gL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new dL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await OC(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(Oi(this));const n=e?Xt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fL(this),n=new gL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&H2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qs(t){return Xt(t)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ND(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yL(t){Ef=t}function HC(t){return Ef.loadJS(t)}function _L(){return Ef.recaptchaEnterpriseScript}function vL(){return Ef.gapiScript}function wL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const EL="recaptcha-enterprise",TL="NO_RECAPTCHA";class SL{constructor(e){this.type=EL,this.auth=Qs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{tL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new eL(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;tE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(TL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&tE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_L();l.length!==0&&(l+=a),HC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function aE(t,e,n,r=!1){const i=new SL(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await aE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await aE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e){const n=wf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Cd(s,e??{}))return i;Sr(i,"already-initialized")}return n.initialize({options:e})}function CL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RL(t,e,n){const r=Qs(t);we(r._canInitEmulator,r,"emulator-config-failed"),we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=qC(e),{host:o,port:a}=xL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),bL()}function qC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xL(t){const e=qC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:lE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:lE(o)}}}function lE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}async function AL(t,e){return Gi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function NL(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends T_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new $u(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $u(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wm(e,n,"signInWithPassword",PL);case"emailLink":return kL(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wm(e,r,"signUpPassword",AL);case"emailLink":return NL(e,{idToken:n,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="http://localhost";class Po extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=m_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Po(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xa(e,n)}buildRequest(){const e={requestUri:OL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LL(t){const e=Gl(Ql(t)).link,n=e?Gl(Ql(e)).deep_link_id:null,r=Gl(Ql(t)).deep_link_id;return(r?Gl(Ql(r)).link:null)||r||n||e||t}class S_{constructor(e){var n,r,i,s,o,a;const l=Gl(Ql(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=DL((i=l.mode)!==null&&i!==void 0?i:null);we(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=LL(e);try{return new S_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,n){return $u._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=S_.parseLink(n);return we(r,"argument-error"),$u._fromEmailAndCode(e,r.code,r.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends I_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends dc{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Po._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ii.credential(n,r)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends dc{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends dc{constructor(){super("twitter.com")}static credential(e,n){return Po._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ms.credential(n,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e){return hc(t,"POST","/v1/accounts:signUp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await bi._fromIdTokenResponse(e,r,i),o=uE(r);return new ko({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=uE(r);return new ko({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function uE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends qi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ad(e,n,r,i)}}function KC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,s,e,r):s})}async function jL(t,e,n=!1){const r=await Ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ko._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e,n=!1){const{auth:r}=t;if(Fr(r.app))return Promise.reject(Oi(r));const i="reauthenticate";try{const s=await Ua(t,KC(r,i,e,t),n);we(s.idToken,r,"internal-error");const o=w_(s.idToken);we(o,r,"internal-error");const{sub:a}=o;return we(t.uid===a,r,"user-mismatch"),ko._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e,n=!1){if(Fr(t.app))return Promise.reject(Oi(t));const r="signIn",i=await KC(t,r,e),s=await ko._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function VL(t,e){return GC(Qs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(t){const e=Qs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UL(t,e,n){if(Fr(t.app))return Promise.reject(Oi(t));const r=Qs(t),o=await wm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ML).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&QC(t),l}),a=await ko._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function BL(t,e,n){return Fr(t.app)?Promise.reject(Oi(t)):VL(Xt(t),il.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,e){return Gi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Xt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ua(r,$L(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function WL(t,e,n,r){return Xt(t).onIdTokenChanged(e,n,r)}function HL(t,e,n){return Xt(t).beforeAuthStateChanged(e,n)}function YC(t,e,n,r){return Xt(t).onAuthStateChanged(e,n,r)}function XC(t){return Xt(t).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=1e3,KL=10;class ZC extends JC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZC.type="LOCAL";const GL=ZC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends JC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eR.type="SESSION";const tR=eR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Tf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await QL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=C_("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return window}function XL(t){ui().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}async function JL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eM(){return nR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="firebaseLocalStorageDb",tM=1,kd="firebaseLocalStorage",iR="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sf(t,e){return t.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function nM(){const t=indexedDB.deleteDatabase(rR);return new fc(t).toPromise()}function Em(){const t=indexedDB.open(rR,tM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kd,{keyPath:iR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kd)?e(r):(r.close(),await nM(),e(await Em()))})})}async function cE(t,e,n){const r=Sf(t,!0).put({[iR]:e,value:n});return new fc(r).toPromise()}async function rM(t,e){const n=Sf(t,!1).get(e),r=await new fc(n).toPromise();return r===void 0?null:r.value}function hE(t,e){const n=Sf(t,!0).delete(e);return new fc(n).toPromise()}const iM=800,sM=3;class sR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(eM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await JL(),!this.activeServiceWorker)return;this.sender=new YL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await cE(e,Pd,"1"),await hE(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sf(i,!1).getAll();return new fc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sR.type="LOCAL";const oM=sR;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t,e){return e?Ai(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends T_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aM(t){return GC(t.auth,new R_(t),t.bypassAuthState)}function lM(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),FL(n,new R_(t),t.bypassAuthState)}async function uM(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),jL(n,new R_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aM;case"linkViaPopup":case"linkViaRedirect":return uM;case"reauthViaPopup":case"reauthViaRedirect":return lM;default:Sr(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new cc(2e3,1e4);async function hM(t,e,n){if(Fr(t.app))return Promise.reject(zr(t,"operation-not-supported-in-this-environment"));const r=Qs(t);q2(t,e,I_);const i=oR(r,n);return new po(r,"signInViaPopup",e,i).executeNotNull()}class po extends aR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cM.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="pendingRedirect",Nh=new Map;class fM extends aR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nh.get(this.auth._key());if(!e){try{const r=await pM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pM(t,e){const n=yM(e),r=mM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function gM(t,e){Nh.set(t._key(),e)}function mM(t){return Ai(t._redirectPersistence)}function yM(t){return kh(dM,t.config.apiKey,t.name)}async function _M(t,e,n=!1){if(Fr(t.app))return Promise.reject(Oi(t));const r=Qs(t),i=oR(r,e),o=await new fM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=10*60*1e3;class wM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vM&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e={}){return Gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IM=/^https?/;async function CM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TM(t);for(const n of e)try{if(RM(n))return}catch{}Sr(t,"unauthorized-domain")}function RM(t){const e=_m(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IM.test(n))return!1;if(SM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=new cc(3e4,6e4);function fE(){const t=ui().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bM(t){return new Promise((e,n)=>{var r,i,s;function o(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(zr(t,"network-request-failed"))},timeout:xM.get()})}if(!((i=(r=ui().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ui().gapi)===null||s===void 0)&&s.load)o();else{const a=wL("iframefcb");return ui()[a]=()=>{gapi.load?o():n(zr(t,"network-request-failed"))},HC(`${vL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Oh=null,e})}let Oh=null;function AM(t){return Oh=Oh||bM(t),Oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new cc(5e3,15e3),kM="__/auth/iframe",NM="emulator/auth/iframe",OM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LM(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v_(e,NM):`https://${t.config.authDomain}/${kM}`,r={apiKey:e.apiKey,appName:t.name,v:zo},i=DM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rl(r).slice(1)}`}async function MM(t){const e=await AM(t),n=ui().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:LM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=zr(t,"network-request-failed"),a=ui().setTimeout(()=>{s(o)},PM.get());function l(){ui().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FM=500,VM=600,UM="_blank",BM="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $M(t,e,n,r=FM,i=VM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},jM),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Pn().toLowerCase();n&&(a=FC(c)?UM:n),MC(c)&&(e=e||BM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[_,y])=>`${f}${_}=${y},`,"");if(cL(c)&&a!=="_self")return zM(e||"",a),new pE(null);const d=window.open(e||"",a,h);we(d,t,"popup-blocked");try{d.focus()}catch{}return new pE(d)}function zM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="__/auth/handler",HM="emulator/auth/handler",qM=encodeURIComponent("fac");async function gE(t,e,n,r,i,s){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zo,eventId:i};if(e instanceof I_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof dc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${qM}=${encodeURIComponent(l)}`:"";return`${KM(t)}?${rl(a).slice(1)}${c}`}function KM({config:t}){return t.emulator?v_(t,HM):`https://${t.authDomain}/${WM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="webStorageSupport";class GM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tR,this._completeRedirectFn=_M,this._overrideRedirectResult=gM}async _openPopup(e,n,r,i){var s;Bi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gE(e,n,r,_m(),i);return $M(e,o,C_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gE(e,n,r,_m(),i);return XL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Bi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MM(e),r=new wM(e);return n.register("authEvent",i=>(we(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bp];o!==void 0&&n(!!o),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zC()||jC()||E_()}}const QM=GM;var mE="@firebase/auth",yE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JM(t){Ao(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WC(t)},c=new mL(r,i,s,l);return CL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ao(new Fs("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(r=>new YM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(mE,yE,XM(t)),li(mE,yE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=5*60,e5=vC("authIdTokenMaxAge")||ZM;let _E=null;const t5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e5)return;const i=n==null?void 0:n.token;_E!==i&&(_E=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function n5(t=g_()){const e=wf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IL(t,{popupRedirectResolver:QM,persistence:[oM,GL,tR]}),r=vC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=t5(s.toString());HL(n,o,()=>o(n.currentUser)),WL(n,a=>o(a))}}const i=mC("auth");return i&&RL(n,`http://${i}`),n}function r5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",r5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JM("Browser");var i5="firebase",s5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(i5,s5,"app");var vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,uR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,T){function x(){}x.prototype=T.prototype,v.D=T.prototype,v.prototype=new x,v.prototype.constructor=v,v.C=function(b,P,O){for(var A=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)A[pe-2]=arguments[pe];return T.prototype[P].apply(b,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,T,x){x||(x=0);var b=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)b[P]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(P=0;16>P;++P)b[P]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=v.g[0],x=v.g[1],P=v.g[2];var O=v.g[3],A=T+(O^x&(P^O))+b[0]+3614090360&4294967295;T=x+(A<<7&4294967295|A>>>25),A=O+(P^T&(x^P))+b[1]+3905402710&4294967295,O=T+(A<<12&4294967295|A>>>20),A=P+(x^O&(T^x))+b[2]+606105819&4294967295,P=O+(A<<17&4294967295|A>>>15),A=x+(T^P&(O^T))+b[3]+3250441966&4294967295,x=P+(A<<22&4294967295|A>>>10),A=T+(O^x&(P^O))+b[4]+4118548399&4294967295,T=x+(A<<7&4294967295|A>>>25),A=O+(P^T&(x^P))+b[5]+1200080426&4294967295,O=T+(A<<12&4294967295|A>>>20),A=P+(x^O&(T^x))+b[6]+2821735955&4294967295,P=O+(A<<17&4294967295|A>>>15),A=x+(T^P&(O^T))+b[7]+4249261313&4294967295,x=P+(A<<22&4294967295|A>>>10),A=T+(O^x&(P^O))+b[8]+1770035416&4294967295,T=x+(A<<7&4294967295|A>>>25),A=O+(P^T&(x^P))+b[9]+2336552879&4294967295,O=T+(A<<12&4294967295|A>>>20),A=P+(x^O&(T^x))+b[10]+4294925233&4294967295,P=O+(A<<17&4294967295|A>>>15),A=x+(T^P&(O^T))+b[11]+2304563134&4294967295,x=P+(A<<22&4294967295|A>>>10),A=T+(O^x&(P^O))+b[12]+1804603682&4294967295,T=x+(A<<7&4294967295|A>>>25),A=O+(P^T&(x^P))+b[13]+4254626195&4294967295,O=T+(A<<12&4294967295|A>>>20),A=P+(x^O&(T^x))+b[14]+2792965006&4294967295,P=O+(A<<17&4294967295|A>>>15),A=x+(T^P&(O^T))+b[15]+1236535329&4294967295,x=P+(A<<22&4294967295|A>>>10),A=T+(P^O&(x^P))+b[1]+4129170786&4294967295,T=x+(A<<5&4294967295|A>>>27),A=O+(x^P&(T^x))+b[6]+3225465664&4294967295,O=T+(A<<9&4294967295|A>>>23),A=P+(T^x&(O^T))+b[11]+643717713&4294967295,P=O+(A<<14&4294967295|A>>>18),A=x+(O^T&(P^O))+b[0]+3921069994&4294967295,x=P+(A<<20&4294967295|A>>>12),A=T+(P^O&(x^P))+b[5]+3593408605&4294967295,T=x+(A<<5&4294967295|A>>>27),A=O+(x^P&(T^x))+b[10]+38016083&4294967295,O=T+(A<<9&4294967295|A>>>23),A=P+(T^x&(O^T))+b[15]+3634488961&4294967295,P=O+(A<<14&4294967295|A>>>18),A=x+(O^T&(P^O))+b[4]+3889429448&4294967295,x=P+(A<<20&4294967295|A>>>12),A=T+(P^O&(x^P))+b[9]+568446438&4294967295,T=x+(A<<5&4294967295|A>>>27),A=O+(x^P&(T^x))+b[14]+3275163606&4294967295,O=T+(A<<9&4294967295|A>>>23),A=P+(T^x&(O^T))+b[3]+4107603335&4294967295,P=O+(A<<14&4294967295|A>>>18),A=x+(O^T&(P^O))+b[8]+1163531501&4294967295,x=P+(A<<20&4294967295|A>>>12),A=T+(P^O&(x^P))+b[13]+2850285829&4294967295,T=x+(A<<5&4294967295|A>>>27),A=O+(x^P&(T^x))+b[2]+4243563512&4294967295,O=T+(A<<9&4294967295|A>>>23),A=P+(T^x&(O^T))+b[7]+1735328473&4294967295,P=O+(A<<14&4294967295|A>>>18),A=x+(O^T&(P^O))+b[12]+2368359562&4294967295,x=P+(A<<20&4294967295|A>>>12),A=T+(x^P^O)+b[5]+4294588738&4294967295,T=x+(A<<4&4294967295|A>>>28),A=O+(T^x^P)+b[8]+2272392833&4294967295,O=T+(A<<11&4294967295|A>>>21),A=P+(O^T^x)+b[11]+1839030562&4294967295,P=O+(A<<16&4294967295|A>>>16),A=x+(P^O^T)+b[14]+4259657740&4294967295,x=P+(A<<23&4294967295|A>>>9),A=T+(x^P^O)+b[1]+2763975236&4294967295,T=x+(A<<4&4294967295|A>>>28),A=O+(T^x^P)+b[4]+1272893353&4294967295,O=T+(A<<11&4294967295|A>>>21),A=P+(O^T^x)+b[7]+4139469664&4294967295,P=O+(A<<16&4294967295|A>>>16),A=x+(P^O^T)+b[10]+3200236656&4294967295,x=P+(A<<23&4294967295|A>>>9),A=T+(x^P^O)+b[13]+681279174&4294967295,T=x+(A<<4&4294967295|A>>>28),A=O+(T^x^P)+b[0]+3936430074&4294967295,O=T+(A<<11&4294967295|A>>>21),A=P+(O^T^x)+b[3]+3572445317&4294967295,P=O+(A<<16&4294967295|A>>>16),A=x+(P^O^T)+b[6]+76029189&4294967295,x=P+(A<<23&4294967295|A>>>9),A=T+(x^P^O)+b[9]+3654602809&4294967295,T=x+(A<<4&4294967295|A>>>28),A=O+(T^x^P)+b[12]+3873151461&4294967295,O=T+(A<<11&4294967295|A>>>21),A=P+(O^T^x)+b[15]+530742520&4294967295,P=O+(A<<16&4294967295|A>>>16),A=x+(P^O^T)+b[2]+3299628645&4294967295,x=P+(A<<23&4294967295|A>>>9),A=T+(P^(x|~O))+b[0]+4096336452&4294967295,T=x+(A<<6&4294967295|A>>>26),A=O+(x^(T|~P))+b[7]+1126891415&4294967295,O=T+(A<<10&4294967295|A>>>22),A=P+(T^(O|~x))+b[14]+2878612391&4294967295,P=O+(A<<15&4294967295|A>>>17),A=x+(O^(P|~T))+b[5]+4237533241&4294967295,x=P+(A<<21&4294967295|A>>>11),A=T+(P^(x|~O))+b[12]+1700485571&4294967295,T=x+(A<<6&4294967295|A>>>26),A=O+(x^(T|~P))+b[3]+2399980690&4294967295,O=T+(A<<10&4294967295|A>>>22),A=P+(T^(O|~x))+b[10]+4293915773&4294967295,P=O+(A<<15&4294967295|A>>>17),A=x+(O^(P|~T))+b[1]+2240044497&4294967295,x=P+(A<<21&4294967295|A>>>11),A=T+(P^(x|~O))+b[8]+1873313359&4294967295,T=x+(A<<6&4294967295|A>>>26),A=O+(x^(T|~P))+b[15]+4264355552&4294967295,O=T+(A<<10&4294967295|A>>>22),A=P+(T^(O|~x))+b[6]+2734768916&4294967295,P=O+(A<<15&4294967295|A>>>17),A=x+(O^(P|~T))+b[13]+1309151649&4294967295,x=P+(A<<21&4294967295|A>>>11),A=T+(P^(x|~O))+b[4]+4149444226&4294967295,T=x+(A<<6&4294967295|A>>>26),A=O+(x^(T|~P))+b[11]+3174756917&4294967295,O=T+(A<<10&4294967295|A>>>22),A=P+(T^(O|~x))+b[2]+718787259&4294967295,P=O+(A<<15&4294967295|A>>>17),A=x+(O^(P|~T))+b[9]+3951481745&4294967295,v.g[0]=v.g[0]+T&4294967295,v.g[1]=v.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+P&4294967295,v.g[3]=v.g[3]+O&4294967295}r.prototype.u=function(v,T){T===void 0&&(T=v.length);for(var x=T-this.blockSize,b=this.B,P=this.h,O=0;O<T;){if(P==0)for(;O<=x;)i(this,v,O),O+=this.blockSize;if(typeof v=="string"){for(;O<T;)if(b[P++]=v.charCodeAt(O++),P==this.blockSize){i(this,b),P=0;break}}else for(;O<T;)if(b[P++]=v[O++],P==this.blockSize){i(this,b),P=0;break}}this.h=P,this.o+=T},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var T=1;T<v.length-8;++T)v[T]=0;var x=8*this.o;for(T=v.length-8;T<v.length;++T)v[T]=x&255,x/=256;for(this.u(v),v=Array(16),T=x=0;4>T;++T)for(var b=0;32>b;b+=8)v[x++]=this.g[T]>>>b&255;return v};function s(v,T){var x=a;return Object.prototype.hasOwnProperty.call(x,v)?x[v]:x[v]=T(v)}function o(v,T){this.h=T;for(var x=[],b=!0,P=v.length-1;0<=P;P--){var O=v[P]|0;b&&O==T||(x[P]=O,b=!1)}this.g=x}var a={};function l(v){return-128<=v&&128>v?s(v,function(T){return new o([T|0],0>T?-1:0)}):new o([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return d;if(0>v)return C(c(-v));for(var T=[],x=1,b=0;v>=x;b++)T[b]=v/x|0,x*=4294967296;return new o(T,0)}function h(v,T){if(v.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v.charAt(0)=="-")return C(h(v.substring(1),T));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(T,8)),b=d,P=0;P<v.length;P+=8){var O=Math.min(8,v.length-P),A=parseInt(v.substring(P,P+O),T);8>O?(O=c(Math.pow(T,O)),b=b.j(O).add(c(A))):(b=b.j(x),b=b.add(c(A)))}return b}var d=l(0),f=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-C(this).m();for(var v=0,T=1,x=0;x<this.g.length;x++){var b=this.i(x);v+=(0<=b?b:4294967296+b)*T,T*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y(this))return"0";if(w(this))return"-"+C(this).toString(v);for(var T=c(Math.pow(v,6)),x=this,b="";;){var P=M(x,T).g;x=S(x,P.j(T));var O=((0<x.g.length?x.g[0]:x.h)>>>0).toString(v);if(x=P,y(x))return O+b;for(;6>O.length;)O="0"+O;b=O+b}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function y(v){if(v.h!=0)return!1;for(var T=0;T<v.g.length;T++)if(v.g[T]!=0)return!1;return!0}function w(v){return v.h==-1}t.l=function(v){return v=S(this,v),w(v)?-1:y(v)?0:1};function C(v){for(var T=v.g.length,x=[],b=0;b<T;b++)x[b]=~v.g[b];return new o(x,~v.h).add(f)}t.abs=function(){return w(this)?C(this):this},t.add=function(v){for(var T=Math.max(this.g.length,v.g.length),x=[],b=0,P=0;P<=T;P++){var O=b+(this.i(P)&65535)+(v.i(P)&65535),A=(O>>>16)+(this.i(P)>>>16)+(v.i(P)>>>16);b=A>>>16,O&=65535,A&=65535,x[P]=A<<16|O}return new o(x,x[x.length-1]&-2147483648?-1:0)};function S(v,T){return v.add(C(T))}t.j=function(v){if(y(this)||y(v))return d;if(w(this))return w(v)?C(this).j(C(v)):C(C(this).j(v));if(w(v))return C(this.j(C(v)));if(0>this.l(_)&&0>v.l(_))return c(this.m()*v.m());for(var T=this.g.length+v.g.length,x=[],b=0;b<2*T;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<v.g.length;P++){var O=this.i(b)>>>16,A=this.i(b)&65535,pe=v.i(P)>>>16,je=v.i(P)&65535;x[2*b+2*P]+=A*je,E(x,2*b+2*P),x[2*b+2*P+1]+=O*je,E(x,2*b+2*P+1),x[2*b+2*P+1]+=A*pe,E(x,2*b+2*P+1),x[2*b+2*P+2]+=O*pe,E(x,2*b+2*P+2)}for(b=0;b<T;b++)x[b]=x[2*b+1]<<16|x[2*b];for(b=T;b<2*T;b++)x[b]=0;return new o(x,0)};function E(v,T){for(;(v[T]&65535)!=v[T];)v[T+1]+=v[T]>>>16,v[T]&=65535,T++}function R(v,T){this.g=v,this.h=T}function M(v,T){if(y(T))throw Error("division by zero");if(y(v))return new R(d,d);if(w(v))return T=M(C(v),T),new R(C(T.g),C(T.h));if(w(T))return T=M(v,C(T)),new R(C(T.g),T.h);if(30<v.g.length){if(w(v)||w(T))throw Error("slowDivide_ only works with positive integers.");for(var x=f,b=T;0>=b.l(v);)x=V(x),b=V(b);var P=H(x,1),O=H(b,1);for(b=H(b,2),x=H(x,2);!y(b);){var A=O.add(b);0>=A.l(v)&&(P=P.add(x),O=A),b=H(b,1),x=H(x,1)}return T=S(v,P.j(T)),new R(P,T)}for(P=d;0<=v.l(T);){for(x=Math.max(1,Math.floor(v.m()/T.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),O=c(x),A=O.j(T);w(A)||0<A.l(v);)x-=b,O=c(x),A=O.j(T);y(O)&&(O=f),P=P.add(O),v=S(v,A)}return new R(P,v)}t.A=function(v){return M(this,v).h},t.and=function(v){for(var T=Math.max(this.g.length,v.g.length),x=[],b=0;b<T;b++)x[b]=this.i(b)&v.i(b);return new o(x,this.h&v.h)},t.or=function(v){for(var T=Math.max(this.g.length,v.g.length),x=[],b=0;b<T;b++)x[b]=this.i(b)|v.i(b);return new o(x,this.h|v.h)},t.xor=function(v){for(var T=Math.max(this.g.length,v.g.length),x=[],b=0;b<T;b++)x[b]=this.i(b)^v.i(b);return new o(x,this.h^v.h)};function V(v){for(var T=v.g.length+1,x=[],b=0;b<T;b++)x[b]=v.i(b)<<1|v.i(b-1)>>>31;return new o(x,v.h)}function H(v,T){var x=T>>5;T%=32;for(var b=v.g.length-x,P=[],O=0;O<b;O++)P[O]=0<T?v.i(O+x)>>>T|v.i(O+x+1)<<32-T:v.i(O+x);return new o(P,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,wo=o}).apply(typeof vE<"u"?vE:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cR,Yl,hR,Dh,Tm,dR,fR,pR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var F=u[I];if(!(F in g))break e;g=g[F]}u=u[u.length-1],I=g[u],p=p(I),p!=I&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,I=!1,F={next:function(){if(!I&&g<u.length){var W=g++;return{value:p(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function _(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function y(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(I,F,W){for(var ee=Array(arguments.length-2),it=2;it<arguments.length;it++)ee[it-2]=arguments[it];return p.prototype[F].apply(I,ee)}}function w(u){const p=u.length;if(0<p){const g=Array(p);for(let I=0;I<p;I++)g[I]=u[I];return g}return[]}function C(u,p){for(let g=1;g<arguments.length;g++){const I=arguments[g];if(l(I)){const F=u.length||0,W=I.length||0;u.length=F+W;for(let ee=0;ee<W;ee++)u[F+ee]=I[ee]}else u.push(I)}}class S{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var V=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(u,p,g){for(const I in u)p.call(g,u[I],I,u)}function v(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function T(u){const p={};for(const g in u)p[g]=u[g];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,p){let g,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(g in I)u[g]=I[g];for(let W=0;W<x.length;W++)g=x[W],Object.prototype.hasOwnProperty.call(I,g)&&(u[g]=I[g])}}function P(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function A(){var u=le;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class pe{constructor(){this.h=this.g=null}add(p,g){const I=je.get();I.set(p,g),this.h?this.h.next=I:this.g=I,this.h=I}}var je=new S(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Q=!1,le=new pe,he=()=>{const u=a.Promise.resolve(void 0);Ae=()=>{u.then(Ee)}};var Ee=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(g){O(g)}var p=je;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Q=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Ke(u,p){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(V){e:{try{M(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:at[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ke.aa.h.call(this)}}y(Ke,Pe);var at={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),$t=0;function Qn(u,p,g,I,F){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!I,this.ha=F,this.key=++$t,this.da=this.fa=!1}function Ln(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wt(u){this.src=u,this.g={},this.h=0}wt.prototype.add=function(u,p,g,I,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ee=Jt(u,p,I,F);return-1<ee?(p=u[ee],g||(p.fa=!1)):(p=new Qn(p,this.src,W,!!I,F),p.fa=g,u.push(p)),p};function Ve(u,p){var g=p.type;if(g in u.g){var I=u.g[g],F=Array.prototype.indexOf.call(I,p,void 0),W;(W=0<=F)&&Array.prototype.splice.call(I,F,1),W&&(Ln(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Jt(u,p,g,I){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==p&&W.capture==!!g&&W.ha==I)return F}return-1}var Gr="closure_lm_"+(1e6*Math.random()|0),cr={};function Mt(u,p,g,I,F){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Mt(u,p[W],g,I,F);return null}return g=jt(g),u&&u[fe]?u.K(p,g,c(I)?!!I.capture:!1,F):Xs(u,p,g,!1,I,F)}function Xs(u,p,g,I,F,W){if(!p)throw Error("Invalid event type");var ee=c(F)?!!F.capture:!!F,it=Cr(u);if(it||(u[Gr]=it=new wt(u)),g=it.add(p,g,I,ee,W),g.proxy)return g;if(I=Qr(),g.proxy=I,I.src=u,I.listener=g,u.addEventListener)Ze||(F=ee),F===void 0&&(F=!1),u.addEventListener(p.toString(),I,F);else if(u.attachEvent)u.attachEvent(Xi(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Qr(){function u(g){return p.call(u.src,u.listener,g)}const p=pi;return u}function fi(u,p,g,I,F){if(Array.isArray(p))for(var W=0;W<p.length;W++)fi(u,p[W],g,I,F);else I=c(I)?!!I.capture:!!I,g=jt(g),u&&u[fe]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],g=Jt(W,g,I,F),-1<g&&(Ln(W[g]),Array.prototype.splice.call(W,g,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=Cr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Jt(p,g,I,F)),(g=-1<u?p[u]:null)&&Yr(g))}function Yr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[fe])Ve(p.i,u);else{var g=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(g,I,u.capture):p.detachEvent?p.detachEvent(Xi(g),I):p.addListener&&p.removeListener&&p.removeListener(I),(g=Cr(p))?(Ve(g,u),g.h==0&&(g.src=null,p[Gr]=null)):Ln(u)}}}function Xi(u){return u in cr?cr[u]:cr[u]="on"+u}function pi(u,p){if(u.da)u=!0;else{p=new Ke(p,this);var g=u.listener,I=u.ha||u.src;u.fa&&Yr(u),u=g.call(I,p)}return u}function Cr(u){return u=u[Gr],u instanceof wt?u:null}var Zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(u){return typeof u=="function"?u:(u[Zt]||(u[Zt]=function(p){return u.handleEvent(p)}),u[Zt])}function lt(){ye.call(this),this.i=new wt(this),this.M=this,this.F=null}y(lt,ye),lt.prototype[fe]=!0,lt.prototype.removeEventListener=function(u,p,g,I){fi(this,u,p,g,I)};function rt(u,p){var g,I=u.F;if(I)for(g=[];I;I=I.F)g.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new Pe(p,u);else if(p instanceof Pe)p.target=p.target||u;else{var F=p;p=new Pe(I,u),b(p,F)}if(F=!0,g)for(var W=g.length-1;0<=W;W--){var ee=p.g=g[W];F=en(ee,I,!0,p)&&F}if(ee=p.g=u,F=en(ee,I,!0,p)&&F,F=en(ee,I,!1,p)&&F,g)for(W=0;W<g.length;W++)ee=p.g=g[W],F=en(ee,I,!1,p)&&F}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],I=0;I<g.length;I++)Ln(g[I]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,g,I){return this.i.add(String(u),p,!1,g,I)},lt.prototype.L=function(u,p,g,I){return this.i.add(String(u),p,!0,g,I)};function en(u,p,g,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,W=0;W<p.length;++W){var ee=p[W];if(ee&&!ee.da&&ee.capture==g){var it=ee.listener,nn=ee.ha||ee.src;ee.fa&&Ve(u.i,ee),F=it.call(nn,I)!==!1&&F}}return F&&!I.defaultPrevented}function dn(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function gi(u){u.g=dn(()=>{u.g=null,u.i&&(u.i=!1,gi(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Yn extends ye{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:gi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(u){ye.call(this),this.h=u,this.g={}}y(Mn,ye);var zt=[];function hr(u){H(u.g,function(p,g){this.g.hasOwnProperty(g)&&Yr(p)},u),u.g={}}Mn.prototype.N=function(){Mn.aa.N.call(this),hr(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=a.JSON.stringify,Ji=a.JSON.parse,Zi=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Jr(){}Jr.prototype.h=null;function Xn(u){return u.h||(u.h=u.i())}function mi(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){Pe.call(this,"d")}y(Rr,Pe);function yi(){Pe.call(this,"c")}y(yi,Pe);var fn={},es=null;function jn(){return es=es||new lt}fn.La="serverreachability";function Zn(u){Pe.call(this,fn.La,u)}y(Zn,Pe);function Fn(u){const p=jn();rt(p,new Zn(p))}fn.STAT_EVENT="statevent";function U(u,p){Pe.call(this,fn.STAT_EVENT,u),this.stat=p}y(U,Pe);function st(u){const p=jn();rt(p,new U(p,u))}fn.Ma="timingevent";function D(u,p){Pe.call(this,fn.Ma,u),this.size=p}y(D,Pe);function L(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function k(){this.g=!0}k.prototype.xa=function(){this.g=!1};function q(u,p,g,I,F,W){u.info(function(){if(u.g)if(W)for(var ee="",it=W.split("&"),nn=0;nn<it.length;nn++){var He=it[nn].split("=");if(1<He.length){var mn=He[0];He=He[1];var yn=mn.split("_");ee=2<=yn.length&&yn[1]=="type"?ee+(mn+"="+He+"&"):ee+(mn+"=redacted&")}}else ee=null;else ee=W;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+p+`
`+g+`
`+ee})}function G(u,p,g,I,F,W,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+p+`
`+g+`
`+W+" "+ee})}function Z(u,p,g,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+te(u,g)+(I?" "+I:"")})}function ue(u,p){u.info(function(){return"TIMEOUT: "+p})}k.prototype.info=function(){};function te(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var I=g[u];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return Xr(g)}catch{return p}}var se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ie={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},K;function _e(){}y(_e,Jr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},K=new _e;function Te(u,p,g,I){this.j=u,this.i=p,this.l=g,this.R=I||1,this.U=new Mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var We={},ke={};function et(u,p,g){u.L=1,u.v=kc(_i(p)),u.m=g,u.P=!0,xr(u,null)}function xr(u,p){u.F=Date.now(),tn(u),u.A=_i(u.v);var g=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Hv(g.i,"t",I),u.C=0,g=u.j.J,u.h=new It,u.g=u0(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Yn(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,I=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(zt[0]=F.toString()),F=zt);for(var W=0;W<F.length;W++){var ee=Mt(g,F[W],I||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Fn(),q(u.i,u.u,u.A,u.l,u.R,u.m)}Te.prototype.ca=function(u){u=u.target;const p=this.M;p&&vi(u)==3?p.j():this.Y(u)},Te.prototype.Y=function(u){try{if(u==this.g)e:{const yn=vi(this.g);var p=this.g.Ba();const Xo=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Jv(this.g)))){this.J||yn!=4||p==7||(p==8||0>=Xo?Fn(3):Fn(2)),Ar(this);var g=this.g.Z();this.X=g;t:if(br(this)){var I=Jv(this.g);u="";var F=I.length,W=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),pn(this);var ee="";break t}this.h.i=new a.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(W&&p==F-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=g==200,G(this.i,this.u,this.A,this.l,this.R,yn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var it,nn=this.g;if((it=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(it)){var He=it;break t}}He=null}if(g=He)Z(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,g);else{this.o=!1,this.s=3,st(12),gn(this),pn(this);break e}}if(this.P){g=!0;let kr;for(;!this.J&&this.C<ee.length;)if(kr=Vn(this,ee),kr==ke){yn==4&&(this.s=4,st(14),g=!1),Z(this.i,this.l,null,"[Incomplete Response]");break}else if(kr==We){this.s=4,st(15),Z(this.i,this.l,ee,"[Invalid Chunk]"),g=!1;break}else Z(this.i,this.l,kr,null),Zr(this,kr);if(br(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||ee.length!=0||this.h.h||(this.s=1,st(16),g=!1),this.o=this.o&&g,!g)Z(this.i,this.l,ee,"[Invalid Chunked Response]"),gn(this),pn(this);else if(0<ee.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),ip(mn),mn.M=!0,st(11))}}else Z(this.i,this.l,ee,null),Zr(this,ee);yn==4&&gn(this),this.o&&!this.J&&(yn==4?s0(this.j,this):(this.o=!1,tn(this)))}else QA(this.g),g==400&&0<ee.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),gn(this),pn(this)}}}catch{}finally{}};function br(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Vn(u,p){var g=u.C,I=p.indexOf(`
`,g);return I==-1?ke:(g=Number(p.substring(g,I)),isNaN(g)?We:(I+=1,I+g>p.length?ke:(p=p.slice(I,I+g),u.C=I+g,p)))}Te.prototype.cancel=function(){this.J=!0,gn(this)};function tn(u){u.S=Date.now()+u.I,ts(u,u.I)}function ts(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=L(f(u.ba,u),p)}function Ar(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Te.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ue(this.i,this.A),this.L!=2&&(Fn(),st(17)),gn(this),this.s=2,pn(this)):ts(this,this.S-u)};function pn(u){u.j.G==0||u.J||s0(u.j,u)}function gn(u){Ar(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,hr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Zr(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||j(g.h,u))){if(!u.K&&j(g.h,u)&&g.G==3){try{var I=g.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)jc(g),Lc(g);else break e;rp(g),st(18)}}else g.za=F[1],0<g.za-g.T&&37500>F[2]&&g.F&&g.v==0&&!g.C&&(g.C=L(f(g.Za,g),6e3));if(1>=mt(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else eo(g,11)}else if((u.K||g.g==u)&&jc(g),!E(p))for(F=g.Da.g.parse(p),p=0;p<F.length;p++){let He=F[p];if(g.T=He[0],He=He[1],g.G==2)if(He[0]=="c"){g.K=He[1],g.ia=He[2];const mn=He[3];mn!=null&&(g.la=mn,g.j.info("VER="+g.la));const yn=He[4];yn!=null&&(g.Aa=yn,g.j.info("SVER="+g.Aa));const Xo=He[5];Xo!=null&&typeof Xo=="number"&&0<Xo&&(I=1.5*Xo,g.L=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const kr=u.g;if(kr){const Vc=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vc){var W=I.h;W.g||Vc.indexOf("spdy")==-1&&Vc.indexOf("quic")==-1&&Vc.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(B(W,W.h),W.h=null))}if(I.D){const sp=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;sp&&(I.ya=sp,ut(I.I,I.D,sp))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),I=g;var ee=u;if(I.qa=l0(I,I.J?I.ia:null,I.W),ee.K){z(I.h,ee);var it=ee,nn=I.L;nn&&(it.I=nn),it.B&&(Ar(it),tn(it)),I.g=ee}else r0(I);0<g.i.length&&Mc(g)}else He[0]!="stop"&&He[0]!="close"||eo(g,7);else g.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?eo(g,7):np(g):He[0]!="noop"&&g.l&&g.l.ta(He),g.v=0)}}Fn(4)}catch{}}var Oe=class{constructor(u,p){this.g=u,this.map=p}};function tt(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function mt(u){return u.h?1:u.g?u.g.size:0}function j(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function B(u,p){u.g?u.g.add(p):u.h=p}function z(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}tt.prototype.cancel=function(){if(this.i=de(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function de(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return w(u.i)}function me(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,I=0;I<g;I++)p.push(u[I]);return p}p=[],g=0;for(I in u)p[g++]=u[I];return p}function Ge(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const I in u)p[g++]=I;return p}}}function ei(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=Ge(u),I=me(u),F=I.length,W=0;W<F;W++)p.call(void 0,I[W],g&&g[W],u)}var Js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MA(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var I=u[g].indexOf("="),F=null;if(0<=I){var W=u[g].substring(0,I);F=u[g].substring(I+1)}else W=u[g];p(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Zs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Zs){this.h=u.h,Ac(this,u.j),this.o=u.o,this.g=u.g,Pc(this,u.s),this.l=u.l;var p=u.i,g=new _l;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Bv(this,g),this.m=u.m}else u&&(p=String(u).match(Js))?(this.h=!1,Ac(this,p[1]||"",!0),this.o=ml(p[2]||""),this.g=ml(p[3]||"",!0),Pc(this,p[4]),this.l=ml(p[5]||"",!0),Bv(this,p[6]||"",!0),this.m=ml(p[7]||"")):(this.h=!1,this.i=new _l(null,this.h))}Zs.prototype.toString=function(){var u=[],p=this.j;p&&u.push(yl(p,$v,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(yl(p,$v,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(yl(g,g.charAt(0)=="/"?VA:FA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",yl(g,BA)),u.join("")};function _i(u){return new Zs(u)}function Ac(u,p,g){u.j=g?ml(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Pc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Bv(u,p,g){p instanceof _l?(u.i=p,$A(u.i,u.h)):(g||(p=yl(p,UA)),u.i=new _l(p,u.h))}function ut(u,p,g){u.i.set(p,g)}function kc(u){return ut(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ml(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yl(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,jA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function jA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $v=/[#\/\?@]/g,FA=/[#\?:]/g,VA=/[#\?]/g,UA=/[#\?@]/g,BA=/#/g;function _l(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ns(u){u.g||(u.g=new Map,u.h=0,u.i&&MA(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=_l.prototype,t.add=function(u,p){ns(this),this.i=null,u=Qo(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function zv(u,p){ns(u),p=Qo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Wv(u,p){return ns(u),p=Qo(u,p),u.g.has(p)}t.forEach=function(u,p){ns(this),this.g.forEach(function(g,I){g.forEach(function(F){u.call(p,F,I,this)},this)},this)},t.na=function(){ns(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let I=0;I<p.length;I++){const F=u[I];for(let W=0;W<F.length;W++)g.push(p[I])}return g},t.V=function(u){ns(this);let p=[];if(typeof u=="string")Wv(this,u)&&(p=p.concat(this.g.get(Qo(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return ns(this),this.i=null,u=Qo(this,u),Wv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Hv(u,p,g){zv(u,p),0<g.length&&(u.i=null,u.g.set(Qo(u,p),w(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var I=p[g];const W=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var F=W;ee[I]!==""&&(F+="="+encodeURIComponent(String(ee[I]))),u.push(F)}}return this.i=u.join("&")};function Qo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function $A(u,p){p&&!u.j&&(ns(u),u.i=null,u.g.forEach(function(g,I){var F=I.toLowerCase();I!=F&&(zv(this,I),Hv(this,F,g))},u)),u.j=p}function zA(u,p){const g=new k;if(a.Image){const I=new Image;I.onload=_(rs,g,"TestLoadImage: loaded",!0,p,I),I.onerror=_(rs,g,"TestLoadImage: error",!1,p,I),I.onabort=_(rs,g,"TestLoadImage: abort",!1,p,I),I.ontimeout=_(rs,g,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function WA(u,p){const g=new k,I=new AbortController,F=setTimeout(()=>{I.abort(),rs(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(F),W.ok?rs(g,"TestPingServer: ok",!0,p):rs(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),rs(g,"TestPingServer: error",!1,p)})}function rs(u,p,g,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(g)}catch{}}function HA(){this.g=new Zi}function qA(u,p,g){const I=g||"";try{ei(u,function(F,W){let ee=F;c(F)&&(ee=Xr(F)),p.push(I+W+"="+encodeURIComponent(ee))})}catch(F){throw p.push(I+"type="+encodeURIComponent("_badmap")),F}}function Nc(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Nc,Jr),Nc.prototype.g=function(){return new Oc(this.l,this.j)},Nc.prototype.i=function(u){return function(){return u}}({});function Oc(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Oc,lt),t=Oc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,wl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wl(this)),this.g&&(this.readyState=3,wl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?vl(this):wl(this),this.readyState==3&&qv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,vl(this))},t.Qa=function(u){this.g&&(this.response=u,vl(this))},t.ga=function(){this.g&&vl(this)};function vl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wl(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function wl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kv(u){let p="";return H(u,function(g,I){p+=I,p+=":",p+=g,p+=`\r
`}),p}function tp(u,p,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=Kv(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):ut(u,p,g))}function Ct(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ct,lt);var KA=/^https?$/i,GA=["POST","PUT"];t=Ct.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():K.g(),this.v=this.o?Xn(this.o):Xn(K),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){Gv(this,W);return}if(u=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)g.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())g.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(W=>W.toLowerCase()=="content-type"),F=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GA,p,void 0))||I||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of g)this.g.setRequestHeader(W,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xv(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Gv(this,W)}};function Gv(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Qv(u),Dc(u)}function Qv(u){u.A||(u.A=!0,rt(u,"complete"),rt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rt(this,"complete"),rt(this,"abort"),Dc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dc(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yv(this):this.bb())},t.bb=function(){Yv(this)};function Yv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||vi(u)!=4||u.Z()!=2)){if(u.u&&vi(u)==4)dn(u.Ea,0,u);else if(rt(u,"readystatechange"),vi(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var I;if(I=ee===0){var F=String(u.D).match(Js)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),I=!KA.test(F?F.toLowerCase():"")}g=I}if(g)rt(u,"complete"),rt(u,"success");else{u.m=6;try{var W=2<vi(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Qv(u)}}finally{Dc(u)}}}}function Dc(u,p){if(u.g){Xv(u);const g=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||rt(u,"ready");try{g.onreadystatechange=I}catch{}}}function Xv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function vi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ji(p)}};function Jv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function QA(u){const p={};u=(u.g&&2<=vi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(E(u[I]))continue;var g=P(u[I]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const W=p[F]||[];p[F]=W,W.push(g)}v(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function El(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function Zv(u){this.Aa=0,this.i=[],this.j=new k,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=El("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=El("baseRetryDelayMs",5e3,u),this.cb=El("retryDelaySeedMs",1e4,u),this.Wa=El("forwardChannelMaxRetries",2,u),this.wa=El("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new tt(u&&u.concurrentRequestLimit),this.Da=new HA,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zv.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,I){st(0),this.W=u,this.H=p||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.I=l0(this,null,this.W),Mc(this)};function np(u){if(e0(u),u.G==3){var p=u.U++,g=_i(u.I);if(ut(g,"SID",u.K),ut(g,"RID",p),ut(g,"TYPE","terminate"),Tl(u,g),p=new Te(u,u.j,p),p.L=2,p.v=kc(_i(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=u0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),tn(p)}a0(u)}function Lc(u){u.g&&(ip(u),u.g.cancel(),u.g=null)}function e0(u){Lc(u),u.u&&(a.clearTimeout(u.u),u.u=null),jc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Mc(u){if(!Pr(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ae||he(),Q||(Ae(),Q=!0),le.add(p,u),u.B=0}}function YA(u,p){return mt(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=L(f(u.Ga,u,p),o0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Te(this,this.j,u);let W=this.o;if(this.S&&(W?(W=T(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=n0(this,F,p),g=_i(this.I),ut(g,"RID",u),ut(g,"CVER",22),this.D&&ut(g,"X-HTTP-Session-Id",this.D),Tl(this,g),W&&(this.O?p="headers="+encodeURIComponent(String(Kv(W)))+"&"+p:this.m&&tp(g,this.m,W)),B(this.h,F),this.Ua&&ut(g,"TYPE","init"),this.P?(ut(g,"$req",p),ut(g,"SID","null"),F.T=!0,et(F,g,null)):et(F,g,p),this.G=2}}else this.G==3&&(u?t0(this,u):this.i.length==0||Pr(this.h)||t0(this))};function t0(u,p){var g;p?g=p.l:g=u.U++;const I=_i(u.I);ut(I,"SID",u.K),ut(I,"RID",g),ut(I,"AID",u.T),Tl(u,I),u.m&&u.o&&tp(I,u.m,u.o),g=new Te(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=n0(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),B(u.h,g),et(g,I,p)}function Tl(u,p){u.H&&H(u.H,function(g,I){ut(p,I,g)}),u.l&&ei({},function(g,I){ut(p,I,g)})}function n0(u,p,g){g=Math.min(u.i.length,g);var I=u.l?f(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ee=["count="+g];W==-1?0<g?(W=F[0].g,ee.push("ofs="+W)):W=0:ee.push("ofs="+W);let it=!0;for(let nn=0;nn<g;nn++){let He=F[nn].g;const mn=F[nn].map;if(He-=W,0>He)W=Math.max(0,F[nn].g-100),it=!1;else try{qA(mn,ee,"req"+He+"_")}catch{I&&I(mn)}}if(it){I=ee.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,I}function r0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ae||he(),Q||(Ae(),Q=!0),le.add(p,u),u.v=0}}function rp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=L(f(u.Fa,u),o0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,i0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=L(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Lc(this),i0(this))};function ip(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function i0(u){u.g=new Te(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=_i(u.qa);ut(p,"RID","rpc"),ut(p,"SID",u.K),ut(p,"AID",u.T),ut(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&ut(p,"TO",u.ja),ut(p,"TYPE","xmlhttp"),Tl(u,p),u.m&&u.o&&tp(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=kc(_i(p)),g.m=null,g.P=!0,xr(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Lc(this),rp(this),st(19))};function jc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function s0(u,p){var g=null;if(u.g==p){jc(u),ip(u),u.g=null;var I=2}else if(j(u.h,p))g=p.D,z(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;I=jn(),rt(I,new D(I,g)),Mc(u)}else r0(u);else if(F=p.s,F==3||F==0&&0<p.X||!(I==1&&YA(u,p)||I==2&&rp(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),F){case 1:eo(u,5);break;case 4:eo(u,10);break;case 3:eo(u,6);break;default:eo(u,2)}}}function o0(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function eo(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),I=u.Xa;const F=!I;I=new Zs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ac(I,"https"),kc(I),F?zA(I.toString(),g):WA(I.toString(),g)}else st(2);u.G=0,u.l&&u.l.sa(p),a0(u),e0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function a0(u){if(u.G=0,u.ka=[],u.l){const p=de(u.h);(p.length!=0||u.i.length!=0)&&(C(u.ka,p),C(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function l0(u,p,g){var I=g instanceof Zs?_i(g):new Zs(g);if(I.g!="")p&&(I.g=p+"."+I.g),Pc(I,I.s);else{var F=a.location;I=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var W=new Zs(null);I&&Ac(W,I),p&&(W.g=p),F&&Pc(W,F),g&&(W.l=g),I=W}return g=u.D,p=u.ya,g&&p&&ut(I,g,p),ut(I,"VER",u.la),Tl(u,I),I}function u0(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ct(new Nc({eb:g})):new Ct(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function c0(){}t=c0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fc(){}Fc.prototype.g=function(u,p){return new er(u,p)};function er(u,p){lt.call(this),this.g=new Zv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!E(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Yo(this)}y(er,lt),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){np(this.g)},er.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Xr(u),u=g);p.i.push(new Oe(p.Ya++,u)),p.G==3&&Mc(p)},er.prototype.N=function(){this.g.l=null,delete this.j,np(this.g),delete this.g,er.aa.N.call(this)};function h0(u){Rr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}y(h0,Rr);function d0(){yi.call(this),this.status=1}y(d0,yi);function Yo(u){this.g=u}y(Yo,c0),Yo.prototype.ua=function(){rt(this.g,"a")},Yo.prototype.ta=function(u){rt(this.g,new h0(u))},Yo.prototype.sa=function(u){rt(this.g,new d0)},Yo.prototype.ra=function(){rt(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,pR=function(){return new Fc},fR=function(){return jn()},dR=fn,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,Dh=se,ie.COMPLETE="complete",hR=ie,mi.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Yl=mi,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,cR=Ct}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const wE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new vf("@firebase/firestore");function Dl(){return No.logLevel}function ce(t,...e){if(No.logLevel<=De.DEBUG){const n=e.map(x_);No.debug(`Firestore (${sl}): ${t}`,...n)}}function $i(t,...e){if(No.logLevel<=De.ERROR){const n=e.map(x_);No.error(`Firestore (${sl}): ${t}`,...n)}}function Ba(t,...e){if(No.logLevel<=De.WARN){const n=e.map(x_);No.warn(`Firestore (${sl}): ${t}`,...n)}}function x_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t="Unexpected state"){const e=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: `+t;throw $i(e),new Error(e)}function Je(t,e){t||Ie()}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tn.UNAUTHENTICATED))}shutdown(){}}class a5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l5{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ks,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ks)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new gR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new Tn(e)}}class u5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class c5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new u5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Je(this.o===void 0);const r=s=>{s.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Je(typeof n.token=="string"),this.R=n.token,new h5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=f5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function $a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Bt(0,0))}static max(){return new Ce(new Bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(),r===void 0?r=e.length-n:r>e.length-n&&Ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends zu{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const p5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends zu{construct(e,n,r){return new an(e,n,r)}static isValidIdentifier(e){return p5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new an(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ae(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ae(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(n)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ft.fromString(e))}static fromName(e){return new ge(ft.fromString(e).popFirst(5))}static empty(){return new ge(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ft(e.slice()))}}function g5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Bt(n+1,0):new Bt(n,r));return new Vs(i,ge.empty(),e)}function m5(t){return new Vs(t.readTime,t.key,-1)}class Vs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vs(Ce.min(),ge.empty(),-1)}static max(){return new Vs(Ce.max(),ge.empty(),-1)}}function y5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==_5)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(i=>i?X.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new X((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new X((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function w5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}b_.oe=-1;function If(t){return t==null}function Nd(t){return t===0&&1/t==-1/0}function E5(t){return typeof t=="number"&&Number.isInteger(t)&&!Nd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ol(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lt=class Sm{constructor(e,n){this.comparator=e,this.root=n||Ns.EMPTY}insert(e,n){return new Sm(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ns.BLACK,null,null))}remove(e){return new Sm(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ns.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}},oh=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ns=class wi{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wi.RED,this.left=i??wi.EMPTY,this.right=s??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wi(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}};Ns.EMPTY=null,Ns.RED=!0,Ns.BLACK=!1;Ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ns(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new TE(this.data.getIterator())}getIteratorFrom(e){return new TE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class TE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Vr([])}unionWith(e){let n=new un(an.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _R("Invalid base64 string: "+s):s}}(e);return new hn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const T5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(t){if(Je(!!t),typeof t=="string"){let e=0;const n=T5.exec(t);if(Je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oo(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function P_(t){const e=t.mapValue.fields.__previous_value__;return A_(e)?P_(e):e}function Wu(t){const e=Us(t.mapValue.fields.__local_write_time__.timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Hu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah={mapValue:{}};function Do(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?A_(t)?4:C5(t)?9007199254740991:I5(t)?10:11:Ie()}function di(t,e){if(t===e)return!0;const n=Do(t);if(n!==Do(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Us(i.timestampValue),a=Us(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Oo(i.bytesValue).isEqual(Oo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bt(i.doubleValue),a=bt(s.doubleValue);return o===a?Nd(o)===Nd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(EE(o)!==EE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!di(o[l],a[l])))return!1;return!0}(t,e);default:return Ie()}}function qu(t,e){return(t.values||[]).find(n=>di(n,e))!==void 0}function za(t,e){if(t===e)return 0;const n=Do(t),r=Do(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=bt(s.integerValue||s.doubleValue),l=bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return SE(t.timestampValue,e.timestampValue);case 4:return SE(Wu(t),Wu(e));case 5:return qe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Oo(s),l=Oo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=qe(a[c],l[c]);if(h!==0)return h}return qe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=qe(bt(s.latitude),bt(o.latitude));return a!==0?a:qe(bt(s.longitude),bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return IE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},_=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=qe(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:IE(_,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ah.mapValue&&o===ah.mapValue)return 0;if(s===ah.mapValue)return 1;if(o===ah.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=qe(l[d],h[d]);if(f!==0)return f;const _=za(a[l[d]],c[h[d]]);if(_!==0)return _}return qe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie()}}function SE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Us(t),r=Us(e),i=qe(n.seconds,r.seconds);return i!==0?i:qe(n.nanos,r.nanos)}function IE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=za(n[i],r[i]);if(s)return s}return qe(n.length,r.length)}function Wa(t){return Im(t)}function Im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Im(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Im(n.fields[o])}`;return i+"}"}(t.mapValue):Ie()}function CE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cm(t){return!!t&&"integerValue"in t}function k_(t){return!!t&&"arrayValue"in t}function RE(t){return!!t&&"nullValue"in t}function xE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}function I5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ol(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function C5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=an.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=cu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ol(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mr(cu(this.value))}}function vR(t){const e=[];return ol(t.fields,(n,r)=>{const i=new an([n]);if(Lh(r)){const s=vR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new In(e,0,Ce.min(),Ce.min(),Ce.min(),mr.empty(),0)}static newFoundDocument(e,n,r,i){return new In(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new In(e,2,n,Ce.min(),Ce.min(),mr.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,Ce.min(),Ce.min(),mr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this.position=e,this.inclusive=n}}function bE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),n.key):r=za(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function AE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function R5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{}class Dt extends wR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new b5(e,n,r):n==="array-contains"?new k5(e,r):n==="in"?new N5(e,r):n==="not-in"?new O5(e,r):n==="array-contains-any"?new D5(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new A5(e,r):new P5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(za(n,this.value)):n!==null&&Do(this.value)===Do(n)&&this.matchesComparison(za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends wR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qr(e,n)}matches(e){return ER(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ER(t){return t.op==="and"}function TR(t){return x5(t)&&ER(t)}function x5(t){for(const e of t.filters)if(e instanceof qr)return!1;return!0}function Rm(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(TR(t))return t.filters.map(e=>Rm(e)).join(",");{const e=t.filters.map(n=>Rm(n)).join(",");return`${t.op}(${e})`}}function SR(t,e){return t instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(t,e):t instanceof qr?function(r,i){return i instanceof qr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&SR(o,i.filters[a]),!0):!1}(t,e):void Ie()}function IR(t){return t instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`}(t):t instanceof qr?function(n){return n.op.toString()+" {"+n.getFilters().map(IR).join(" ,")+"}"}(t):"Filter"}class b5 extends Dt{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class A5 extends Dt{constructor(e,n){super(e,"in",n),this.keys=CR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class P5 extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=CR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class k5 extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return k_(n)&&qu(n.arrayValue,this.value)}}class N5 extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qu(this.value.arrayValue,n)}}class O5 extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qu(this.value.arrayValue,n)}}class D5 extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!k_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function PE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new L5(t,e,n,r,i,s,o)}function N_(t){const e=Re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wa(r)).join(",")),e.ue=n}return e.ue}function O_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AE(t.startAt,e.startAt)&&AE(t.endAt,e.endAt)}function xm(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function M5(t,e,n,r,i,s,o,a){return new al(t,e,n,r,i,s,o,a)}function RR(t){return new al(t)}function kE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xR(t){return t.collectionGroup!==null}function hu(t){const e=Re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new un(an.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ku(s,r))}),n.has(an.keyField().canonicalString())||e.ce.push(new Ku(an.keyField(),r))}return e.ce}function ci(t){const e=Re(t);return e.le||(e.le=j5(e,hu(t))),e.le}function j5(t,e){if(t.limitType==="F")return PE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ku(i.field,s)});const n=t.endAt?new Od(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Od(t.startAt.position,t.startAt.inclusive):null;return PE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bm(t,e){const n=t.filters.concat([e]);return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dd(t,e,n){return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cf(t,e){return O_(ci(t),ci(e))&&t.limitType===e.limitType}function bR(t){return`${N_(ci(t))}|lt:${t.limitType}`}function na(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IR(i)).join(", ")}]`),If(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wa(i)).join(",")),`Target(${r})`}(ci(t))}; limitType=${t.limitType})`}function Rf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=bE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hu(r),i)||r.endAt&&!function(o,a,l){const c=bE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hu(r),i))}(t,e)}function F5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AR(t){return(e,n)=>{let r=!1;for(const i of hu(t)){const s=V5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function V5(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?za(l,c):Ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return yR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=new Lt(ge.comparator);function zi(){return U5}const PR=new Lt(ge.comparator);function Xl(...t){let e=PR;for(const n of t)e=e.insert(n.key,n);return e}function kR(t){let e=PR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function go(){return du()}function NR(){return du()}function du(){return new ll(t=>t.toString(),(t,e)=>t.isEqual(e))}const B5=new Lt(ge.comparator),$5=new un(ge.comparator);function Me(...t){let e=$5;for(const n of t)e=e.add(n);return e}const z5=new un(qe);function W5(){return z5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function OR(t){return{integerValue:""+t}}function H5(t,e){return E5(e)?OR(e):D_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function q5(t,e,n){return t instanceof Gu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&A_(s)&&(s=P_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qu?LR(t,e):t instanceof Yu?MR(t,e):function(i,s){const o=DR(i,s),a=NE(o)+NE(i.Pe);return Cm(o)&&Cm(i.Pe)?OR(a):D_(i.serializer,a)}(t,e)}function K5(t,e,n){return t instanceof Qu?LR(t,e):t instanceof Yu?MR(t,e):n}function DR(t,e){return t instanceof Ld?function(r){return Cm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Gu extends xf{}class Qu extends xf{constructor(e){super(),this.elements=e}}function LR(t,e){const n=jR(e);for(const r of t.elements)n.some(i=>di(i,r))||n.push(r);return{arrayValue:{values:n}}}class Yu extends xf{constructor(e){super(),this.elements=e}}function MR(t,e){let n=jR(e);for(const r of t.elements)n=n.filter(i=>!di(i,r));return{arrayValue:{values:n}}}class Ld extends xf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function NE(t){return bt(t.integerValue||t.doubleValue)}function jR(t){return k_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n){this.field=e,this.transform=n}}function Q5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qu&&i instanceof Qu||r instanceof Yu&&i instanceof Yu?$a(r.elements,i.elements,di):r instanceof Ld&&i instanceof Ld?di(r.Pe,i.Pe):r instanceof Gu&&i instanceof Gu}(t.transform,e.transform)}class Y5{constructor(e,n){this.version=e,this.transformResults=n}}class Di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Di}static exists(e){return new Di(void 0,e)}static updateTime(e){return new Di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bf{}function FR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new UR(t.key,Di.none()):new mc(t.key,t.data,Di.none());{const n=t.data,r=mr.empty();let i=new un(an.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wo(t.key,r,new Vr(i.toArray()),Di.none())}}function X5(t,e,n){t instanceof mc?function(i,s,o){const a=i.value.clone(),l=DE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Wo?function(i,s,o){if(!Mh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=DE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(VR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fu(t,e,n,r){return t instanceof mc?function(s,o,a,l){if(!Mh(s.precondition,o))return a;const c=s.value.clone(),h=LE(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wo?function(s,o,a,l){if(!Mh(s.precondition,o))return a;const c=LE(s.fieldTransforms,l,o),h=o.data;return h.setAll(VR(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Mh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function J5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=DR(r.transform,i||null);s!=null&&(n===null&&(n=mr.empty()),n.set(r.field,s))}return n||null}function OE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$a(r,i,(s,o)=>Q5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mc extends bf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wo extends bf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function DE(t,e,n){const r=new Map;Je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,K5(o,a,n[i]))}return r}function LE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,q5(s,o,e))}return r}class UR extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z5 extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&X5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=FR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,r)=>OE(n,r))&&$a(this.baseMutations,e.baseMutations,(n,r)=>OE(n,r))}}class L_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Je(e.mutations.length===r.length);let i=function(){return B5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new L_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ue;function r4(t){switch(t){default:return Ie();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function BR(t){if(t===void 0)return $i("GRPC error has no .code"),Y.UNKNOWN;switch(t){case kt.OK:return Y.OK;case kt.CANCELLED:return Y.CANCELLED;case kt.UNKNOWN:return Y.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Y.INTERNAL;case kt.UNAVAILABLE:return Y.UNAVAILABLE;case kt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case kt.NOT_FOUND:return Y.NOT_FOUND;case kt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case kt.ABORTED:return Y.ABORTED;case kt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case kt.DATA_LOSS:return Y.DATA_LOSS;default:return Ie()}}(Ue=kt||(kt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new wo([4294967295,4294967295],0);function ME(t){const e=i4().encode(t),n=new uR;return n.update(e),new Uint8Array(n.digest())}function jE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wo([n,r],0),new wo([i,s],0)]}class M_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wo.fromNumber(r)));return i.compare(s4)===1&&(i=new wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ME(e),[r,i]=jE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new M_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ME(e),[r,i]=jE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Af(Ce.min(),i,new Lt(qe),zi(),Me())}}class yc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yc(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $R{constructor(e,n){this.targetId=e,this.me=n}}class zR{constructor(e,n,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FE{constructor(){this.fe=0,this.ge=UE(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),n=Me(),r=Me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ie()}}),new yc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=UE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class o4{constructor(e){this.Le=e,this.Be=new Map,this.ke=zi(),this.qe=VE(),this.Qe=new Lt(qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(xm(s))if(r===0){const o=new ge(s.path);this.Ue(n,o,In.newNoDocument(o,Ce.min()))}else Je(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Oo(r).toUint8Array()}catch(l){if(l instanceof _R)return Ba("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new M_(o,i,s)}catch(l){return Ba(l instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&xm(a.target)){const l=new ge(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,In.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Me();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Af(e,n,this.Qe,this.ke,r);return this.ke=zi(),this.qe=VE(),this.Qe=new Lt(qe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new FE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new un(qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new FE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function VE(){return new Lt(ge.comparator)}function UE(){return new Lt(ge.comparator)}const a4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u4={and:"AND",or:"OR"};class c4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Am(t,e){return t.useProto3Json||If(e)?e:{value:e}}function Md(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h4(t,e){return Md(t,e.toTimestamp())}function hi(t){return Je(!!t),Ce.fromTimestamp(function(n){const r=Us(n);return new Bt(r.seconds,r.nanos)}(t))}function j_(t,e){return Pm(t,e).canonicalString()}function Pm(t,e){const n=function(i){return new ft(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HR(t){const e=ft.fromString(t);return Je(YR(e)),e}function km(t,e){return j_(t.databaseId,e.path)}function $p(t,e){const n=HR(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(KR(n))}function qR(t,e){return j_(t.databaseId,e)}function d4(t){const e=HR(t);return e.length===4?ft.emptyPath():KR(e)}function Nm(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KR(t){return Je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function BE(t,e,n){return{name:km(t,e),fields:n.value.mapValue.fields}}function f4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Je(h===void 0||typeof h=="string"),hn.fromBase64String(h||"")):(Je(h===void 0||h instanceof Buffer||h instanceof Uint8Array),hn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Y.UNKNOWN:BR(c.code);return new ae(h,c.message||"")}(o);n=new zR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$p(t,r.document.name),s=hi(r.document.updateTime),o=r.document.createTime?hi(r.document.createTime):Ce.min(),a=new mr({mapValue:{fields:r.document.fields}}),l=In.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new jh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$p(t,r.document),s=r.readTime?hi(r.readTime):Ce.min(),o=In.newNoDocument(i,s),a=r.removedTargetIds||[];n=new jh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$p(t,r.document),s=r.removedTargetIds||[];n=new jh([],s,i,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new n4(i,s),a=r.targetId;n=new $R(a,o)}}return n}function p4(t,e){let n;if(e instanceof mc)n={update:BE(t,e.key,e.value)};else if(e instanceof UR)n={delete:km(t,e.key)};else if(e instanceof Wo)n={update:BE(t,e.key,e.data),updateMask:S4(e.fieldMask)};else{if(!(e instanceof Z5))return Ie();n={verify:km(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:h4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie()}(t,e.precondition)),n}function g4(t,e){return t&&t.length>0?(Je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hi(i.updateTime):hi(s);return o.isEqual(Ce.min())&&(o=hi(s)),new Y5(o,i.transformResults||[])}(n,e))):[]}function m4(t,e){return{documents:[qR(t,e.path)]}}function y4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qR(t,i);const s=function(c){if(c.length!==0)return QR(qr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:ra(f.field),direction:w4(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Am(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _4(t){let e=d4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Je(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=GR(d);return f instanceof qr&&TR(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Ku(ia(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,If(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,_=d.values||[];return new Od(_,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,_=d.values||[];return new Od(_,f)}(n.endAt)),M5(e,i,o,s,a,"F",l,c)}function v4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ia(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ia(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ia(n.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ia(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(t):t.fieldFilter!==void 0?function(n){return Dt.create(ia(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qr.create(n.compositeFilter.filters.map(r=>GR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(t):Ie()}function w4(t){return a4[t]}function E4(t){return l4[t]}function T4(t){return u4[t]}function ra(t){return{fieldPath:t.canonicalString()}}function ia(t){return an.fromServerFormat(t.fieldPath)}function QR(t){return t instanceof Dt?function(n){if(n.op==="=="){if(xE(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NAN"}};if(RE(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xE(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NAN"}};if(RE(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(n.field),op:E4(n.op),value:n.value}}}(t):t instanceof qr?function(n){const r=n.getFilters().map(i=>QR(i));return r.length===1?r[0]:{compositeFilter:{op:T4(n.op),filters:r}}}(t):Ie()}function S4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r,i,s=Ce.min(),o=Ce.min(),a=hn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.ct=e}}function C4(t){const e=_4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.un=new x4}addToCollectionParentIndex(e,n){return this.un.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Vs.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class x4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new un(ft.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ha(0)}static kn(){return new Ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.changes=new ll(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fu(r.mutation,i,Vr.empty(),Bt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const i=go();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=go();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zi();const o=du(),a=function(){return du()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Wo)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),fu(h.mutation,c,h.mutation.getFieldMask(),Bt.now())):o.set(c.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new A4(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=du();let i=new Lt((o,a)=>o-a),s=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Vr.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Me()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=NR();h.forEach(f=>{if(!s.has(f)){const _=FR(n.get(f),r.get(f));_!==null&&d.set(f,_),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):X.resolve(go());let a=-1,l=s;return o.next(c=>X.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Me())).next(h=>({batchId:a,changes:kR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let i=Xl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Xl();return this.indexManager.getCollectionParents(e,s).next(a=>X.forEach(a,l=>{const c=function(d,f){return new al(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,In.newInvalidDocument(h)))});let a=Xl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&fu(h.mutation,c,Vr.empty(),Bt.now()),Rf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return X.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hi(i.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:C4(i.bundledQuery),readTime:hi(i.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.overlays=new Lt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=go();return X.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const i=go(),s=n.length+1,o=new ge(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return X.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Lt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=go(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=go(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return X.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t4(n,r));let s=this.Ir.get(n);s===void 0&&(s=Me(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.Tr=new un(qt.Er),this.dr=new un(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new ft([])),r=new qt(n,e),i=new qt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new ft([])),r=new qt(n,e),i=new qt(n,e+1);let s=Me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||qe(e.wr,n.wr)}static Ar(e,n){return qe(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new un(qt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),i=new qt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(qe);return n.forEach(i=>{const s=new qt(i,0),o=new qt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),X.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ge.isDocumentKey(s)||(s=s.child(""));const o=new qt(new ge(s),0);let a=new un(qe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),X.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Je(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return X.forEach(n.mutations,i=>{const s=new qt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qt(n,0),i=this.br.firstAfterOrEqual(r);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.Mr=e,this.docs=function(){return new Lt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=zi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():In.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zi();const o=n.path,a=new ge(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||y5(m5(h),r)<=0||(i.has(h.key)||Rf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return X.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ie()}Or(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new M4(this)}getSize(e){return X.resolve(this.size)}}class M4 extends b4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.persistence=e,this.Nr=new ll(n=>N_(n),O_),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new F_,this.targetCount=0,this.kr=Ha.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),X.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ha(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Kn(n),X.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),X.waitFor(s).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),X.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new b_(0),this.Kr=!1,this.Kr=!0,this.$r=new O4,this.referenceDelegate=e(this),this.Ur=new j4(this),this.indexManager=new R4,this.remoteDocumentCache=function(i){return new L4(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new I4(n),this.Gr=new k4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new D4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ce("MemoryPersistence","Starting transaction:",e);const i=new V4(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return X.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class V4 extends v5{constructor(e){super(),this.currentSequenceNumber=e}}class V_{constructor(e){this.persistence=e,this.Jr=new F_,this.Yr=null}static Zr(e){return new V_(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),X.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,r=>{const i=ge.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return X.or([()=>X.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Me(),i=Me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new U_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return SD()?8:w5(Pn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new U4;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Dl()<=De.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",na(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Dl()<=De.DEBUG&&ce("QueryEngine","Query:",na(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Dl()<=De.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",na(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(n))):X.resolve())}Yi(e,n){if(kE(n))return X.resolve(null);let r=ci(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dd(n,null,"F"),r=ci(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Me(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Dd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return kE(n)||i.isEqual(Ce.min())?X.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?X.resolve(null):(Dl()<=De.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),na(n)),this.rs(e,o,n,g5(i,-1)).next(a=>a))})}ts(e,n){let r=new un(AR(e));return n.forEach((i,s)=>{Rf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Dl()<=De.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",na(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Lt(qe),this._s=new ll(s=>N_(s),O_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function z4(t,e,n,r){return new $4(t,e,n,r)}async function XR(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Me();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function W4(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let _=X.resolve();return f.forEach(y=>{_=_.next(()=>h.getEntry(l,y)).next(w=>{const C=c.docVersions.get(y);Je(C!==null),w.version.compareTo(C)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function JR(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function H4(t,e){const n=Re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let _=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(hn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(d,_),function(w,C,S){return w.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(f,_,h)&&a.push(n.Ur.updateTargetData(s,_))});let l=zi(),c=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(q4(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(Ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return X.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function q4(t,e,n){let r=Me(),i=Me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function K4(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G4(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,X.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Om(t,e,n){const r=Re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gc(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function $E(t,e,n){const r=Re(t);let i=Ce.min(),s=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Re(l),f=d._s.get(h);return f!==void 0?X.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,ci(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ce.min(),n?s:Me())).next(a=>(Q4(r,F5(e),a),{documents:a,Ts:s})))}function Q4(t,e,n){let r=t.us.get(e)||Ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class zE{constructor(){this.activeTargetIds=W5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y4{constructor(){this.so=new zE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function zp(){return lh===null?lh=function(){return 268435456+Math.round(2147483648*Math.random())}():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class e3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=zp(),l=this.xo(n,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(ce("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ba("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=J4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=zp();return new Promise((o,a)=>{const l=new cR;l.setWithCredentials(!0),l.listenOnce(hR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Dh.NO_ERROR:const h=l.getResponseJson();ce(wn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Dh.TIMEOUT:ce(wn,`RPC '${e}' ${s} timed out`),a(new ae(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const d=l.getStatus();if(ce(wn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const _=f==null?void 0:f.error;if(_&&_.status&&_.message){const y=function(C){const S=C.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(S)>=0?S:Y.UNKNOWN}(_.status);a(new ae(y,_.message))}else a(new ae(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ae(Y.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ce(wn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ce(wn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=zp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pR(),a=fR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ce(wn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,_=!1;const y=new Z4({Io:C=>{_?ce(wn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(f||(ce(wn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ce(wn,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},To:()=>d.close()}),w=(C,S,E)=>{C.listen(S,R=>{try{E(R)}catch(M){setTimeout(()=>{throw M},0)}})};return w(d,Yl.EventType.OPEN,()=>{_||(ce(wn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),w(d,Yl.EventType.CLOSE,()=>{_||(_=!0,ce(wn,`RPC '${e}' stream ${i} transport closed`),y.So())}),w(d,Yl.EventType.ERROR,C=>{_||(_=!0,Ba(wn,`RPC '${e}' stream ${i} transport errored:`,C),y.So(new ae(Y.UNAVAILABLE,"The operation could not be completed")))}),w(d,Yl.EventType.MESSAGE,C=>{var S;if(!_){const E=C.data[0];Je(!!E);const R=E,M=R.error||((S=R[0])===null||S===void 0?void 0:S.error);if(M){ce(wn,`RPC '${e}' stream ${i} received error:`,M);const V=M.status;let H=function(x){const b=kt[x];if(b!==void 0)return BR(b)}(V),v=M.message;H===void 0&&(H=Y.INTERNAL,v="Unknown error status: "+V+" with message "+M.message),_=!0,y.So(new ae(H,v)),d.close()}else ce(wn,`RPC '${e}' stream ${i} received:`,E),y.bo(E)}}),w(a,dR.STAT_EVENT,C=>{C.stat===Tm.PROXY?ce(wn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Tm.NOPROXY&&ce(wn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){return new c4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?($i(n.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ae(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t3 extends ex{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=f4(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?hi(o.readTime):Ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=xm(l)?{documents:m4(s,l)}:{query:y4(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WR(s,o.resumeToken);const c=Am(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=Md(s,o.snapshotVersion.toTimestamp());const c=Am(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=v4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.a_(n)}}class n3 extends ex{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=g4(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>p4(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Pm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(Y.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Pm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class i3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($i(n),this.D_=!1):ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ho(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Re(l);c.L_.add(4),await _c(c),c.q_.set("Unknown"),c.L_.delete(4),await kf(c)}(this))})}),this.q_=new i3(r,i)}}async function kf(t){if(Ho(t))for(const e of t.B_)await e(!0)}async function _c(t){for(const e of t.B_)await e(!1)}function tx(t,e){const n=Re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),W_(n)?z_(n):ul(n).r_()&&$_(n,e))}function B_(t,e){const n=Re(t),r=ul(n);n.N_.delete(e),r.r_()&&nx(n,e),n.N_.size===0&&(r.r_()?r.o_():Ho(n)&&n.q_.set("Unknown"))}function $_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ul(t).A_(e)}function nx(t,e){t.Q_.xe(e),ul(t).R_(e)}function z_(t){t.Q_=new o4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ul(t).start(),t.q_.v_()}function W_(t){return Ho(t)&&!ul(t).n_()&&t.N_.size>0}function Ho(t){return Re(t).L_.size===0}function rx(t){t.Q_=void 0}async function o3(t){t.q_.set("Online")}async function a3(t){t.N_.forEach((e,n)=>{$_(t,e)})}async function l3(t,e){rx(t),W_(t)?(t.q_.M_(e),z_(t)):t.q_.set("Unknown")}async function u3(t,e,n){if(t.q_.set("Online"),e instanceof zR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jd(t,r)}else if(e instanceof jh?t.Q_.Ke(e):e instanceof $R?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ce.min()))try{const r=await JR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(hn.EMPTY_BYTE_STRING,h.snapshotVersion)),nx(s,l);const d=new ws(h.target,l,c,h.sequenceNumber);$_(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),await jd(t,r)}}async function jd(t,e,n){if(!gc(e))throw e;t.L_.add(1),await _c(t),t.q_.set("Offline"),n||(n=()=>JR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await kf(t)})}function ix(t,e){return e().catch(n=>jd(t,n,e))}async function Nf(t){const e=Re(t),n=Bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;c3(e);)try{const i=await K4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,h3(e,i)}catch(i){await jd(e,i)}sx(e)&&ox(e)}function c3(t){return Ho(t)&&t.O_.length<10}function h3(t,e){t.O_.push(e);const n=Bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sx(t){return Ho(t)&&!Bs(t).n_()&&t.O_.length>0}function ox(t){Bs(t).start()}async function d3(t){Bs(t).p_()}async function f3(t){const e=Bs(t);for(const n of t.O_)e.m_(n.mutations)}async function p3(t,e,n){const r=t.O_.shift(),i=L_.from(r,e,n);await ix(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Nf(t)}async function g3(t,e){e&&Bs(t).V_&&await async function(r,i){if(function(o){return r4(o)&&o!==Y.ABORTED}(i.code)){const s=r.O_.shift();Bs(r).s_(),await ix(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Nf(r)}}(t,e),sx(t)&&ox(t)}async function HE(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=Ho(n);n.L_.add(3),await _c(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await kf(n)}async function m3(t,e){const n=Re(t);e?(n.L_.delete(2),await kf(n)):e||(n.L_.add(2),await _c(n),n.q_.set("Unknown"))}function ul(t){return t.K_||(t.K_=function(n,r,i){const s=Re(n);return s.w_(),new t3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:o3.bind(null,t),Ro:a3.bind(null,t),mo:l3.bind(null,t),d_:u3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),W_(t)?z_(t):t.q_.set("Unknown")):(await t.K_.stop(),rx(t))})),t.K_}function Bs(t){return t.U_||(t.U_=function(n,r,i){const s=Re(n);return s.w_(),new n3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:d3.bind(null,t),mo:g3.bind(null,t),f_:f3.bind(null,t),g_:p3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Nf(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new H_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q_(t,e){if($i("AsyncQueue",`${e}: ${t}`),gc(t))return new ae(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=Xl(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new ba(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.W_=new Lt(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qa(e,n,ba.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _3{constructor(){this.queries=KE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Re(n),s=i.queries;i.queries=KE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ae(Y.ABORTED,"Firestore shutting down"))}}function KE(){return new ll(t=>bR(t),Cf)}async function v3(t,e){const n=Re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new y3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=q_(o,`Initialization of query '${na(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&K_(n)}async function w3(t,e){const n=Re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function E3(t,e){const n=Re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&K_(n)}function T3(t,e,n){const r=Re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function K_(t){t.Y_.forEach(e=>{e.next()})}var Dm,GE;(GE=Dm||(Dm={})).ea="default",GE.Cache="cache";class S3{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.key=e}}class lx{constructor(e){this.key=e}}class I3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=AR(e),this.Ra=new ba(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new qE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),_=Rf(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),w=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;f&&_?f.data.isEqual(_.data)?y!==w&&(r.track({type:3,doc:_}),C=!0):this.ga(f,_)||(r.track({type:2,doc:_}),C=!0,(l&&this.Aa(_,l)>0||c&&this.Aa(_,c)<0)&&(a=!0)):!f&&_?(r.track({type:0,doc:_}),C=!0):f&&!_&&(r.track({type:1,doc:f}),C=!0,(l||c)&&(a=!0)),C&&(_?(o=o.add(_),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(_,y){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return w(_)-w(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new qa(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new lx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ax(r))}),n}ba(e){this.Ta=e.Ts,this.da=Me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class C3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R3{constructor(e){this.key=e,this.va=!1}}class x3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ll(a=>bR(a),Cf),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(ge.comparator),this.Na=new Map,this.La=new F_,this.Ba={},this.ka=new Map,this.qa=Ha.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function b3(t,e,n=!0){const r=px(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ux(r,e,n,!0),i}async function A3(t,e){const n=px(t);await ux(n,e,!0,!1)}async function ux(t,e,n,r){const i=await G4(t.localStore,ci(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await P3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tx(t.remoteStore,i),a}async function P3(t,e,n,r,i){t.Ka=(d,f,_)=>async function(w,C,S,E){let R=C.view.ma(S);R.ns&&(R=await $E(w.localStore,C.query,!1).then(({documents:v})=>C.view.ma(v,R)));const M=E&&E.targetChanges.get(C.targetId),V=E&&E.targetMismatches.get(C.targetId)!=null,H=C.view.applyChanges(R,w.isPrimaryClient,M,V);return YE(w,C.targetId,H.wa),H.snapshot}(t,d,f,_);const s=await $E(t.localStore,e,!0),o=new I3(e,s.Ts),a=o.ma(s.documents),l=yc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);YE(t,n,c.wa);const h=new C3(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function k3(t,e,n){const r=Re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Cf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Om(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&B_(r.remoteStore,i.targetId),Lm(r,i.targetId)}).catch(pc)):(Lm(r,i.targetId),await Om(r.localStore,i.targetId,!0))}async function N3(t,e){const n=Re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),B_(n.remoteStore,r.targetId))}async function O3(t,e,n){const r=U3(t);try{const i=await function(o,a){const l=Re(o),c=Bt.now(),h=a.reduce((_,y)=>_.add(y.key),Me());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=zi(),w=Me();return l.cs.getEntries(_,h).next(C=>{y=C,y.forEach((S,E)=>{E.isValidDocument()||(w=w.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,y)).next(C=>{d=C;const S=[];for(const E of a){const R=J5(E,d.get(E.key).overlayedDocument);R!=null&&S.push(new Wo(E.key,R,vR(R.value.mapValue),Di.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,S,a)}).next(C=>{f=C;const S=C.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(_,C.batchId,S)})}).then(()=>({batchId:f.batchId,changes:kR(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Lt(qe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await vc(r,i.changes),await Nf(r.remoteStore)}catch(i){const s=q_(i,"Failed to persist write");n.reject(s)}}async function cx(t,e){const n=Re(t);try{const r=await H4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Je(o.va):i.removedDocuments.size>0&&(Je(o.va),o.va=!1))}),await vc(n,r,e)}catch(r){await pc(r)}}function QE(t,e,n){const r=Re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Re(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&K_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D3(t,e,n){const r=Re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Lt(ge.comparator);o=o.insert(s,In.newNoDocument(s,Ce.min()));const a=Me().add(s),l=new Af(Ce.min(),new Map,new Lt(qe),o,a);await cx(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),G_(r)}else await Om(r.localStore,e,!1).then(()=>Lm(r,e,n)).catch(pc)}async function L3(t,e){const n=Re(t),r=e.batch.batchId;try{const i=await W4(n.localStore,e);dx(n,r,null),hx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vc(n,i)}catch(i){await pc(i)}}async function M3(t,e,n){const r=Re(t);try{const i=await function(o,a){const l=Re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Je(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);dx(r,e,n),hx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vc(r,i)}catch(i){await pc(i)}}function hx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dx(t,e,n){const r=Re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Lm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fx(t,r)})}function fx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(B_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),G_(t))}function YE(t,e,n){for(const r of n)r instanceof ax?(t.La.addReference(r.key,e),j3(t,r)):r instanceof lx?(ce("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fx(t,r.key)):Ie()}function j3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ce("SyncEngine","New document in limbo: "+n),t.xa.add(r),G_(t))}function G_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(ft.fromString(e)),r=t.qa.next();t.Na.set(r,new R3(n)),t.Oa=t.Oa.insert(n,r),tx(t.remoteStore,new ws(ci(RR(n.path)),r,"TargetPurposeLimboResolution",b_.oe))}}async function vc(t,e,n){const r=Re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=U_.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=Re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>X.forEach(c,f=>X.forEach(f.$i,_=>h.persistence.referenceDelegate.addReference(d,f.targetId,_)).next(()=>X.forEach(f.Ui,_=>h.persistence.referenceDelegate.removeReference(d,f.targetId,_)))))}catch(d){if(!gc(d))throw d;ce("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const _=h.os.get(f),y=_.snapshotVersion,w=_.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(f,w)}}}(r.localStore,s))}async function F3(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=await XR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ae(Y.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(n,r.hs)}}function V3(t,e){const n=Re(t),r=n.Na.get(e);if(r&&r.va)return Me().add(r.key);{let i=Me();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function px(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D3.bind(null,e),e.Ca.d_=E3.bind(null,e.eventManager),e.Ca.$a=T3.bind(null,e.eventManager),e}function U3(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M3.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return z4(this.persistence,new B4,e.initialUser,this.serializer)}Ga(e){return new F4(V_.Zr,this.serializer)}Wa(e){return new Y4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F3.bind(null,this.syncEngine),await m3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _3}()}createDatastore(e){const n=Pf(e.databaseInfo.databaseId),r=function(s){return new e3(s)}(e.databaseInfo);return function(s,o,a,l){return new r3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new s3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>QE(this.syncEngine,n,0),function(){return WE.D()?new WE:new X4}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new x3(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Re(i);ce("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await _c(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$i("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tn.UNAUTHENTICATED,this.clientId=mR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=q_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hp(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function XE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z3(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>HE(e.remoteStore,i)),t._onlineComponents=e}async function z3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Y.FAILED_PRECONDITION||i.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ba("Error using user provided cache. Falling back to memory cache: "+n),await Hp(t,new Fd)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await Hp(t,new Fd);return t._offlineComponents}async function gx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await XE(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await XE(t,new Mm))),t._onlineComponents}function W3(t){return gx(t).then(e=>e.syncEngine)}async function H3(t){const e=await gx(t),n=e.eventManager;return n.onListen=b3.bind(null,e.syncEngine),n.onUnlisten=k3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=N3.bind(null,e.syncEngine),n}function q3(t,e,n={}){const r=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new B3({next:f=>{h.Za(),o.enqueueAndForget(()=>w3(s,d)),f.fromCache&&l.source==="server"?c.reject(new ae(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new S3(a,h,{includeMetadataChanges:!0,_a:!0});return v3(s,d)}(await H3(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e,n){if(!n)throw new ae(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K3(t,e,n,r){if(e===!0&&r===!0)throw new ae(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZE(t){if(!ge.isDocumentKey(t))throw new ae(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eT(t){if(ge.isDocumentKey(t))throw new ae(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Of(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie()}function Vd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Of(t);throw new ae(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function G3(t,e){if(e<=0)throw new ae(Y.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o5;switch(r.type){case"firstParty":return new c5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=JE.get(n);r&&(ce("ComponentProvider","Removing Datastore"),JE.delete(n),r.terminate())}(this),Promise.resolve()}}function Q3(t,e,n,r={}){var i;const s=(t=Vd(t,Df))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Tn.MOCK_USER;else{a=wC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ae(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tn(c)}t._authCredentials=new a5(new gR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class wr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class Os extends Ys{constructor(e,n,r){super(e,n,RR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new ge(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function Xu(t,e,...n){if(t=Xt(t),yx("collection","path",e),t instanceof Df){const r=ft.fromString(e,...n);return eT(r),new Os(t,null,r)}{if(!(t instanceof wr||t instanceof Os))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return eT(r),new Os(t.firestore,null,r)}}function Y3(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=mR.newId()),yx("doc","path",e),t instanceof Df){const r=ft.fromString(e,...n);return ZE(r),new wr(t,null,new ge(r))}{if(!(t instanceof wr||t instanceof Os))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return ZE(r),new wr(t.firestore,t instanceof Os?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ZR(this,"async_queue_retry"),this.Vu=()=>{const r=Wp();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Wp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ks;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gc(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $i("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=H_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Q_ extends Df{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nT(e),this._firestoreClient=void 0,await e}}}function X3(t,e){const n=typeof t=="object"?t:g_(),r=typeof t=="string"?t:"(default)",i=wf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=yC("firestore");s&&Q3(i,...s)}return i}function _x(t){if(t._terminated)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||J3(t),t._firestoreClient}function J3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new S5(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,mx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new $3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ka(hn.fromBase64String(e))}catch(n){throw new ae(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ka(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=/^__.*__$/;class ej{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wo(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}function vx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class ev{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ev(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ud(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vx(this.Cu)&&Z3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pf(e)}Qu(e,n,r,i=!1){return new ev({Cu:e,methodName:n,qu:r,path:an.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wx(t){const e=t._freezeSettings(),n=Pf(t._databaseId);return new tj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nj(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Sx("Data must be an object, but it was:",o,r);const a=Ex(r,o);let l,c;if(s.merge)l=new Vr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=ij(e,d,n);if(!o.contains(f))throw new ae(Y.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);oj(h,f)||h.push(f)}l=new Vr(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new ej(new mr(a),l,c)}class tv extends X_{_toFieldTransform(e){return new G5(e.path,new Gu)}isEqual(e){return e instanceof tv}}function rj(t,e,n,r=!1){return nv(n,t.Qu(r?4:3,e))}function nv(t,e){if(Tx(t=Xt(t)))return Sx("Unsupported field value:",e,t),Ex(t,e);if(t instanceof X_)return function(r,i){if(!vx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=nv(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Bt.fromDate(r);return{timestampValue:Md(i.serializer,s)}}if(r instanceof Bt){const s=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(i.serializer,s)}}if(r instanceof J_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ka)return{bytesValue:WR(i.serializer,r._byteString)};if(r instanceof wr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:j_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Z_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return D_(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Of(r)}`)}(t,e)}function Ex(t,e){const n={};return yR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(t,(r,i)=>{const s=nv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Tx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bt||t instanceof J_||t instanceof Ka||t instanceof wr||t instanceof X_||t instanceof Z_)}function Sx(t,e,n){if(!Tx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Of(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ij(t,e,n){if((e=Xt(e))instanceof Y_)return e._internalPath;if(typeof e=="string")return Ix(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const sj=new RegExp("[~\\*/\\[\\]]");function Ix(t,e,n){if(e.search(sj)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Y_(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ud(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ae(Y.INVALID_ARGUMENT,a+t+l)}function oj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aj extends Cx{data(){return super.data()}}function Lf(t,e){return typeof e=="string"?Ix(t,e):e instanceof Y_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rv{}class iv extends rv{}function Bd(t,e,...n){let r=[];e instanceof rv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof sv).length,a=s.filter(l=>l instanceof Mf).length;if(o>1||o>0&&a>0)throw new ae(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mf extends iv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mf(e,n,r)}_apply(e){const n=this._parse(e);return bx(e._query,n),new Ys(e.firestore,e.converter,bm(e._query,n))}_parse(e){const n=wx(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){iT(d,h);const _=[];for(const y of d)_.push(rT(l,s,y));f={arrayValue:{values:_}}}else f=rT(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||iT(d,h),f=rj(a,o,d,h==="in"||h==="not-in");return Dt.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fh(t,e,n){const r=e,i=Lf("where",t);return Mf._create(i,r,n)}class sv extends rv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)bx(o,l),o=bm(o,l)}(e._query,n),new Ys(e.firestore,e.converter,bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ov extends iv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ov(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ku(s,o)}(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new al(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Rx(t,e="asc"){const n=e,r=Lf("orderBy",t);return ov._create(r,n)}class av extends iv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new av(e,n,r)}_apply(e){return new Ys(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function xx(t){return G3("limit",t),av._create("limit",t,"F")}function rT(t,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new ae(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xR(e)&&n.indexOf("/")!==-1)throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!ge.isDocumentKey(r))throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CE(t,new ge(r))}if(n instanceof wr)return CE(t,n._key);throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(n)}.`)}function iT(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uj{convertValue(e,n="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ol(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>bt(o.doubleValue));return new Z_(s)}convertGeoPoint(e){return new J_(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=P_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=Us(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);Je(YR(r));const i=new Hu(r.get(1),r.get(3)),s=new ge(r.popFirst(5));return i.isEqual(n)||$i(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hj extends Cx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vh extends hj{data(e={}){return super.data(e)}}class dj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vh(this._firestore,this._userDataWriter,r.key,r,new uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Vh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Vh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:fj(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}class pj extends uj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ka(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,n)}}function lv(t){t=Vd(t,Ys);const e=Vd(t.firestore,Q_),n=_x(e),r=new pj(e);return lj(t._query),q3(n,t._query).then(i=>new dj(e,r,t,i))}function gj(t,e){const n=Vd(t.firestore,Q_),r=Y3(t),i=cj(t.converter,e);return mj(n,[nj(wx(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Di.exists(!1))]).then(()=>r)}function mj(t,e){return function(r,i){const s=new ks;return r.asyncQueue.enqueueAndForget(async()=>O3(await W3(r),i,s)),s.promise}(_x(t),e)}function yj(){return new tv("serverTimestamp")}(function(e,n=!0){(function(i){sl=i})(zo),Ao(new Fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Q_(new l5(r.getProvider("auth-internal")),new d5(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ae(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),li(wE,"4.7.3",e),li(wE,"4.7.3","esm2017")})();var sT={};const oT="@firebase/database",aT="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ax="";function _j(t){Ax=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),on(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Uu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ki(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vj(e)}}catch{}return new wj},mo=Px("localStorage"),Ej=Px("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new vf("@firebase/database"),Tj=function(){let t=1;return function(){return t++}}(),kx=function(t){const e=MD(t),n=new kD;n.update(e);const r=n.digest();return h_.encodeByteArray(r)},wc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=wc.apply(null,r):typeof r=="object"?e+=on(r):e+=r,e+=" "}return e};let pu=null,lT=!0;const Sj=function(t,e){ne(!0,"Can't turn on custom loggers persistently."),Aa.logLevel=De.VERBOSE,pu=Aa.log.bind(Aa)},Cn=function(...t){if(lT===!0&&(lT=!1,pu===null&&Ej.get("logging_enabled")===!0&&Sj()),pu){const e=wc.apply(null,t);pu(e)}},Ec=function(t){return function(...e){Cn(t,...e)}},jm=function(...t){const e="FIREBASE INTERNAL ERROR: "+wc(...t);Aa.error(e)},Wi=function(...t){const e=`FIREBASE FATAL ERROR: ${wc(...t)}`;throw Aa.error(e),new Error(e)},or=function(...t){const e="FIREBASE WARNING: "+wc(...t);Aa.warn(e)},Ij=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&or("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Nx=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Cj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ga="[MIN_NAME]",Lo="[MAX_NAME]",cl=function(t,e){if(t===e)return 0;if(t===Ga||e===Lo)return-1;if(e===Ga||t===Lo)return 1;{const n=uT(t),r=uT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Rj=function(t,e){return t===e?0:t<e?-1:1},Ll=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+on(e))},uv=function(t){if(typeof t!="object"||t===null)return on(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=on(e[r]),n+=":",n+=uv(t[e[r]]);return n+="}",n},Ox=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ir(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Dx=function(t){ne(!Nx(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},xj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},bj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Aj=new RegExp("^-?(0*)\\d{1,10}$"),Pj=-2147483648,kj=2147483647,uT=function(t){if(Aj.test(t)){const e=Number(t);if(e>=Pj&&e<=kj)return e}return null},Tc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw or("Exception was thrown by user callback.",n),e},Math.floor(0))}},Nj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){or(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',or(e)}}class Uh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Uh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="5",Lx="v",Mx="s",jx="r",Fx="f",Vx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ux="ls",Bx="p",Fm="ac",$x="websocket",zx="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Lj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Hx(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let r;if(e===$x)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===zx)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Lj(t)&&(n.ns=t.namespace);const i=[];return Ir(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.counters_={}}incrementCounter(e,n=1){Ki(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return dD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp={},Kp={};function hv(t){const e=t.toString();return qp[e]||(qp[e]=new Mj),qp[e]}function jj(t,e){const n=t.toString();return Kp[n]||(Kp[n]=e()),Kp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Tc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="start",Vj="close",Uj="pLPCommand",Bj="pRTLPCB",qx="id",Kx="pw",Gx="ser",$j="cb",zj="seg",Wj="ts",Hj="d",qj="dframe",Qx=1870,Yx=30,Kj=Qx-Yx,Gj=25e3,Qj=3e4;class ya{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ec(e),this.stats_=hv(n),this.urlFn=l=>(this.appCheckToken&&(l[Fm]=this.appCheckToken),Hx(n,zx,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Qj)),Cj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dv((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cT)this.id=a,this.password=l;else if(o===Vj)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[cT]="t",r[Gx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$j]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Lx]=cv,this.transportSessionId&&(r[Mx]=this.transportSessionId),this.lastSessionId&&(r[Ux]=this.lastSessionId),this.applicationId&&(r[Bx]=this.applicationId),this.appCheckToken&&(r[Fm]=this.appCheckToken),typeof location<"u"&&location.hostname&&Vx.test(location.hostname)&&(r[jx]=Fx);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ya.forceAllow_=!0}static forceDisallow(){ya.forceDisallow_=!0}static isAvailable(){return ya.forceAllow_?!0:!ya.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xj()&&!bj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=on(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=pC(n),i=Ox(r,Kj);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[qj]="t",r[qx]=e,r[Kx]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=on(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class dv{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Tj(),window[Uj+this.uniqueCallbackIdentifier]=e,window[Bj+this.uniqueCallbackIdentifier]=n,this.myIFrame=dv.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Cn("frame writing exception"),a.stack&&Cn(a.stack),Cn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Cn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[qx]=this.myID,e[Kx]=this.myPW,e[Gx]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Yx+r.length<=Qx;){const o=this.pendingSegs.shift();r=r+"&"+zj+i+"="+o.seg+"&"+Wj+i+"="+o.ts+"&"+Hj+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Gj)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=16384,Xj=45e3;let $d=null;typeof MozWebSocket<"u"?$d=MozWebSocket:typeof WebSocket<"u"&&($d=WebSocket);class jr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ec(this.connId),this.stats_=hv(n),this.connURL=jr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Lx]=cv,typeof location<"u"&&location.hostname&&Vx.test(location.hostname)&&(o[jx]=Fx),n&&(o[Mx]=n),r&&(o[Ux]=r),i&&(o[Fm]=i),s&&(o[Bx]=s),Hx(e,$x,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mo.set("previous_websocket_failure",!0);try{let r;TD(),this.mySock=new $d(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){jr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&$d!==null&&!jr.forceDisallow_}static previouslyFailed(){return mo.isInMemoryStorage||mo.get("previous_websocket_failure")===!0}markConnectionHealthy(){mo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Uu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=on(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Ox(n,Yj);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Xj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jr.responsesRequiredToBeHealthy=2;jr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ya,jr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=jr&&jr.isAvailable();let r=n&&!jr.previouslyFailed();if(e.webSocketOnly&&(n||or("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jr];else{const i=this.transports_=[];for(const s of Ju.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ju.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ju.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=6e4,Zj=5e3,eF=10*1024,tF=100*1024,Gp="t",hT="d",nF="s",dT="r",rF="e",fT="o",pT="a",gT="n",mT="p",iF="h";class sF{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ec("c:"+this.id+":"),this.transportManager_=new Ju(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Gp in e){const n=e[Gp];n===pT?this.upgradeIfSecondaryHealthy_():n===dT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ll("t",e),r=Ll("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ll("t",e),r=Ll("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ll(Gp,e);if(hT in e){const r=e[hT];if(n===iF){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===gT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===nF?this.onConnectionShutdown_(r):n===dT?this.onReset_(r):n===rF?jm("Server Error: "+r):n===fT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cv!==r&&or("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),gu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Zj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends Jx{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!f_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zd}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=32,_T=768;class gt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function nt(){return new gt("")}function Be(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $s(t){return t.pieces_.length-t.pieceNum_}function dt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new gt(t.pieces_,e)}function Zx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function oF(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function eb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function tb(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new gt(e,0)}function Qt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof gt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new gt(n,0)}function Fe(t){return t.pieceNum_>=t.pieces_.length}function _r(t,e){const n=Be(t),r=Be(e);if(n===null)return e;if(n===r)return _r(dt(t),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nb(t,e){if($s(t)!==$s(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ur(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($s(t)>$s(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class aF{constructor(e,n){this.errorPrefix_=n,this.parts_=eb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=_f(this.parts_[r]);rb(this)}}function lF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=_f(e),rb(t)}function uF(t){const e=t.parts_.pop();t.byteLength_-=_f(e),t.parts_.length>0&&(t.byteLength_-=1)}function rb(t){if(t.byteLength_>_T)throw new Error(t.errorPrefix_+"has a key path longer than "+_T+" bytes ("+t.byteLength_+").");if(t.parts_.length>yT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+yT+") or object contains a cycle "+so(t))}function so(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends Jx{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fv}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=1e3,cF=60*5*1e3,vT=30*1e3,hF=1.3,dF=3e4,fF="server_kill",wT=3;class Li extends Xx{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Li.nextPersistentConnectionId_++,this.log_=Ec("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ml,this.maxReconnectDelay_=cF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&zd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(on(s)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new d_,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Li.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ki(e,"w")){const r=Va(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();or(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||PD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=AD(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+on(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):jm("Unrecognized action received from server: "+on(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ml,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ml,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dF&&(this.reconnectDelay_=Ml),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hF)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Li.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Cn("getToken() completed but was canceled"):(Cn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new sF(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{or(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(fF)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&or(d),l())}}}interrupt(e){Cn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Cn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dm(this.interruptReasons_)&&(this.reconnectDelay_=Ml,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>uv(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new gt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Cn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wT&&(this.reconnectDelay_=vT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Cn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ax.replace(/\./g,"-")]=1,f_()?e["framework.cordova"]=1:EC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zd.getInstance().currentlyOnline();return dm(this.interruptReasons_)&&e}}Li.nextPersistentConnectionId_=0;Li.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new $e(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new $e(Ga,e),i=new $e(Ga,n);return this.compare(r,i)!==0}minPost(){return $e.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch;class ib extends jf{static get __EMPTY_NODE(){return ch}static set __EMPTY_NODE(e){ch=e}compare(e,n){return cl(e.name,n.name)}isDefinedOn(e){throw nl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return $e.MIN}maxPost(){return new $e(Lo,ch)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new $e(e,ch)}toString(){return".key"}}const Pa=new ib;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=i??zn.EMPTY_NODE,this.right=s??zn.EMPTY_NODE}copy(e,n,r,i,s){return new Gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return zn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return zn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Gt.RED=!0;Gt.BLACK=!1;class pF{copy(e,n,r,i,s){return this}insert(e,n,r){return new Gt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zn{constructor(e,n=zn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new zn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(e){return new zn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new hh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new hh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new hh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new hh(this.root_,null,this.comparator_,!0,e)}}zn.EMPTY_NODE=new pF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t,e){return cl(t.name,e.name)}function pv(t,e){return cl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm;function mF(t){Vm=t}const sb=function(t){return typeof t=="number"?"number:"+Dx(t):"string:"+t},ob=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ki(e,".sv"),"Priority must be a string or number.")}else ne(t===Vm||t.isEmpty(),"priority of unexpected type.");ne(t===Vm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ET;class Ht{constructor(e,n=Ht.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ob(this.priorityNode_)}static set __childrenNodeConstructor(e){ET=e}static get __childrenNodeConstructor(){return ET}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ht(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ht.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Fe(e)?this:Be(e)===".priority"?this.priorityNode_:Ht.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ht.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Be(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ne(r!==".priority"||$s(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ht.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Dx(this.value_):e+=this.value_,this.lazyHash_=kx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ht.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ht.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ht.VALUE_TYPE_ORDER.indexOf(n),s=Ht.VALUE_TYPE_ORDER.indexOf(r);return ne(i>=0,"Unknown leaf type: "+n),ne(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ht.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ab,lb;function yF(t){ab=t}function _F(t){lb=t}class vF extends jf{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?cl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return $e.MIN}maxPost(){return new $e(Lo,new Ht("[PRIORITY-POST]",lb))}makePost(e,n){const r=ab(e);return new $e(n,new Ht("[PRIORITY-POST]",r))}toString(){return".priority"}}const bn=new vF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=Math.log(2);class EF{constructor(e){const n=s=>parseInt(Math.log(s)/wF,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wd=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,f;if(h===0)return null;if(h===1)return d=t[l],f=n?n(d):d,new Gt(f,d.node,Gt.BLACK,null,null);{const _=parseInt(h/2,10)+l,y=i(l,_),w=i(_+1,c);return d=t[_],f=n?n(d):d,new Gt(f,d.node,Gt.BLACK,y,w)}},s=function(l){let c=null,h=null,d=t.length;const f=function(y,w){const C=d-y,S=d;d-=y;const E=i(C+1,S),R=t[C],M=n?n(R):R;_(new Gt(M,R.node,w,null,E))},_=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const w=l.nextBitIsOne(),C=Math.pow(2,l.count-(y+1));w?f(C,Gt.BLACK):(f(C,Gt.BLACK),f(C,Gt.RED))}return h},o=new EF(t.length),a=s(o);return new zn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp;const ea={};class Pi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ne(ea&&bn,"ChildrenNode.ts has not been loaded"),Qp=Qp||new Pi({".priority":ea},{".priority":bn}),Qp}get(e){const n=Va(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof zn?n:null}hasIndex(e){return Ki(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==Pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator($e.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Wd(r,e.getCompare()):a=ea;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Pi(h,c)}addToIndexes(e,n){const r=Id(this.indexes_,(i,s)=>{const o=Va(this.indexSet_,s);if(ne(o,"Missing index implementation for "+s),i===ea)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator($e.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Wd(a,o.getCompare())}else return ea;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new $e(e.name,a))),l.insert(e,e.node)}});return new Pi(r,this.indexSet_)}removeFromIndexes(e,n){const r=Id(this.indexes_,i=>{if(i===ea)return i;{const s=n.get(e.name);return s?i.remove(new $e(e.name,s)):i}});return new Pi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl;class Qe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ob(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return jl||(jl=new Qe(new zn(pv),null,Pi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jl}updatePriority(e){return this.children_.isEmpty()?this:new Qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?jl:n}}getChild(e){const n=Be(e);return n===null?this:this.getImmediateChild(n).getChild(dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new $e(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?jl:this.priorityNode_;return new Qe(i,o,s)}}updateChild(e,n){const r=Be(e);if(r===null)return n;{ne(Be(e)!==".priority"||$s(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(dt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(bn,(o,a)=>{n[o]=a.val(e),r++,s&&Qe.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sb(this.getPriority().val())+":"),this.forEachChild(bn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":kx(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new $e(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new $e(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new $e(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,$e.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,$e.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Sc?-1:0}withIndex(e){if(e===Pa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Qe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Pa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(bn),i=n.getIterator(bn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Pa?null:this.indexMap_.get(e.toString())}}Qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class TF extends Qe{constructor(){super(new zn(pv),Qe.EMPTY_NODE,Pi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qe.EMPTY_NODE}isEmpty(){return!1}}const Sc=new TF;Object.defineProperties($e,{MIN:{value:new $e(Ga,Qe.EMPTY_NODE)},MAX:{value:new $e(Lo,Sc)}});ib.__EMPTY_NODE=Qe.EMPTY_NODE;Ht.__childrenNodeConstructor=Qe;mF(Sc);_F(Sc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=!0;function Rn(t,e=null){if(t===null)return Qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ht(n,Rn(e))}if(!(t instanceof Array)&&SF){const n=[];let r=!1;if(Ir(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Rn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new $e(o,l)))}}),n.length===0)return Qe.EMPTY_NODE;const s=Wd(n,gF,o=>o.name,pv);if(r){const o=Wd(n,bn.getCompare());return new Qe(s,Rn(e),new Pi({".priority":o},{".priority":bn}))}else return new Qe(s,Rn(e),Pi.Default)}else{let n=Qe.EMPTY_NODE;return Ir(t,(r,i)=>{if(Ki(t,r)&&r.substring(0,1)!=="."){const s=Rn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Rn(e))}}yF(Rn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF extends jf{constructor(e){super(),this.indexPath_=e,ne(!Fe(e)&&Be(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?cl(e.name,n.name):s}makePost(e,n){const r=Rn(e),i=Qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new $e(n,i)}maxPost(){const e=Qe.EMPTY_NODE.updateChild(this.indexPath_,Sc);return new $e(Lo,e)}toString(){return eb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF extends jf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?cl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return $e.MIN}maxPost(){return $e.MAX}makePost(e,n){const r=Rn(e);return new $e(n,r)}toString(){return".value"}}const RF=new CF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){return{type:"value",snapshotNode:t}}function bF(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function AF(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function TT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function PF(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ga}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bn}copy(){const e=new gv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ST(t){const e={};if(t.isDefault())return e;let n;if(t.index_===bn?n="$priority":t.index_===RF?n="$value":t.index_===Pa?n="$key":(ne(t.index_ instanceof IF,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=on(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=on(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+on(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=on(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+on(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function IT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==bn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Xx{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ec("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Hd.getListenId_(e,r),a={};this.listens_[o]=a;const l=ST(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Va(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){const r=Hd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ST(e._queryParams),r=e._path.toString(),i=new d_;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Uu(a.responseText)}catch{or("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&or("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(){return{value:null,children:new Map}}function ub(t,e,n){if(Fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Be(e);t.children.has(r)||t.children.set(r,qd());const i=t.children.get(r);e=dt(e),ub(i,e,n)}}function Um(t,e,n){t.value!==null?n(e,t.value):NF(t,(r,i)=>{const s=new gt(e.toString()+"/"+r);Um(i,s,n)})}function NF(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ir(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=10*1e3,DF=30*1e3,LF=5*60*1e3;class MF{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new OF(e);const r=CT+(DF-CT)*Math.random();gu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ir(e,(i,s)=>{s>0&&Ki(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),gu(this.reportStats_.bind(this),Math.floor(Math.random()*2*LF))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(si||(si={}));function cb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function db(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=si.ACK_USER_WRITE,this.source=cb()}operationForChild(e){if(Fe(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new gt(e));return new Kd(nt(),n,this.revert)}}else return ne(Be(this.path)===e,"operationForChild called for unrelated child."),new Kd(dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=si.OVERWRITE}operationForChild(e){return Fe(this.path)?new Mo(this.source,nt(),this.snap.getImmediateChild(e)):new Mo(this.source,dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=si.MERGE}operationForChild(e){if(Fe(this.path)){const n=this.children.subtree(new gt(e));return n.isEmpty()?null:n.value?new Mo(this.source,nt(),n.value):new Zu(this.source,nt(),n)}else return ne(Be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zu(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Be(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jF(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(PF(o.childName,o.snapshotNode))}),Fl(t,i,"child_removed",e,r,n),Fl(t,i,"child_added",e,r,n),Fl(t,i,"child_moved",s,r,n),Fl(t,i,"child_changed",e,r,n),Fl(t,i,"value",e,r,n),i}function Fl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>VF(t,a,l)),o.forEach(a=>{const l=FF(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function FF(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function VF(t,e,n){if(e.childName==null||n.childName==null)throw nl("Should only compare child_ events.");const r=new $e(e.childName,e.snapshotNode),i=new $e(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e){return{eventCache:t,serverCache:e}}function mu(t,e,n,r){return fb(new mv(e,n,r),t.serverCache)}function pb(t,e,n,r){return fb(t.eventCache,new mv(e,n,r))}function Bm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function jo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp;const UF=()=>(Yp||(Yp=new zn(Rj)),Yp);class ht{constructor(e,n=UF()){this.value=e,this.children=n}static fromObject(e){let n=new ht(null);return Ir(e,(r,i)=>{n=n.set(new gt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:nt(),value:this.value};if(Fe(e))return null;{const r=Be(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(dt(e),n);return s!=null?{path:Qt(new gt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Fe(e))return this;{const n=Be(e),r=this.children.get(n);return r!==null?r.subtree(dt(e)):new ht(null)}}set(e,n){if(Fe(e))return new ht(n,this.children);{const r=Be(e),s=(this.children.get(r)||new ht(null)).set(dt(e),n),o=this.children.insert(r,s);return new ht(this.value,o)}}remove(e){if(Fe(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const n=Be(e),r=this.children.get(n);if(r){const i=r.remove(dt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ht(null):new ht(this.value,s)}else return this}}get(e){if(Fe(e))return this.value;{const n=Be(e),r=this.children.get(n);return r?r.get(dt(e)):null}}setTree(e,n){if(Fe(e))return n;{const r=Be(e),s=(this.children.get(r)||new ht(null)).setTree(dt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ht(this.value,o)}}fold(e){return this.fold_(nt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,nt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Fe(e))return null;{const s=Be(e),o=this.children.get(s);return o?o.findOnPath_(dt(e),Qt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,nt(),n)}foreachOnPath_(e,n,r){if(Fe(e))return this;{this.value&&r(n,this.value);const i=Be(e),s=this.children.get(i);return s?s.foreachOnPath_(dt(e),Qt(n,i),r):new ht(null)}}foreach(e){this.foreach_(nt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.writeTree_=e}static empty(){return new Wr(new ht(null))}}function yu(t,e,n){if(Fe(e))return new Wr(new ht(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=_r(i,e);return s=s.updateChild(o,n),new Wr(t.writeTree_.set(i,s))}else{const i=new ht(n),s=t.writeTree_.setTree(e,i);return new Wr(s)}}}function RT(t,e,n){let r=t;return Ir(n,(i,s)=>{r=yu(r,Qt(e,i),s)}),r}function xT(t,e){if(Fe(e))return Wr.empty();{const n=t.writeTree_.setTree(e,new ht(null));return new Wr(n)}}function $m(t,e){return qo(t,e)!=null}function qo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(_r(n.path,e)):null}function bT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(bn,(r,i)=>{e.push(new $e(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new $e(r,i.value))}),e}function Ds(t,e){if(Fe(e))return t;{const n=qo(t,e);return n!=null?new Wr(new ht(n)):new Wr(t.writeTree_.subtree(e))}}function zm(t){return t.writeTree_.isEmpty()}function Qa(t,e){return gb(nt(),t.writeTree_,e)}function gb(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ne(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=gb(Qt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t,e){return Eb(e,t)}function BF(t,e,n,r,i){ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=yu(t.visibleWrites,e,n)),t.lastWriteId=r}function $F(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function zF(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&WF(a,r.path)?i=!1:Ur(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return HF(t),!0;if(r.snap)t.visibleWrites=xT(t.visibleWrites,r.path);else{const a=r.children;Ir(a,l=>{t.visibleWrites=xT(t.visibleWrites,Qt(r.path,l))})}return!0}else return!1}function WF(t,e){if(t.snap)return Ur(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ur(Qt(t.path,n),e))return!0;return!1}function HF(t){t.visibleWrites=yb(t.allWrites,qF,nt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qF(t){return t.visible}function yb(t,e,n){let r=Wr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Ur(n,o)?(a=_r(n,o),r=yu(r,a,s.snap)):Ur(o,n)&&(a=_r(o,n),r=yu(r,nt(),s.snap.getChild(a)));else if(s.children){if(Ur(n,o))a=_r(n,o),r=RT(r,a,s.children);else if(Ur(o,n))if(a=_r(o,n),Fe(a))r=RT(r,nt(),s.children);else{const l=Va(s.children,Be(a));if(l){const c=l.getChild(dt(a));r=yu(r,nt(),c)}}}else throw nl("WriteRecord should have .snap or .children")}}return r}function _b(t,e,n,r,i){if(!r&&!i){const s=qo(t.visibleWrites,e);if(s!=null)return s;{const o=Ds(t.visibleWrites,e);if(zm(o))return n;if(n==null&&!$m(o,nt()))return null;{const a=n||Qe.EMPTY_NODE;return Qa(o,a)}}}else{const s=Ds(t.visibleWrites,e);if(!i&&zm(s))return n;if(!i&&n==null&&!$m(s,nt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Ur(c.path,e)||Ur(e,c.path))},a=yb(t.allWrites,o,e),l=n||Qe.EMPTY_NODE;return Qa(a,l)}}}function KF(t,e,n){let r=Qe.EMPTY_NODE;const i=qo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(bn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ds(t.visibleWrites,e);return n.forEachChild(bn,(o,a)=>{const l=Qa(Ds(s,new gt(o)),a);r=r.updateImmediateChild(o,l)}),bT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ds(t.visibleWrites,e);return bT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function GF(t,e,n,r,i){ne(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Qt(e,n);if($m(t.visibleWrites,s))return null;{const o=Ds(t.visibleWrites,s);return zm(o)?i.getChild(n):Qa(o,i.getChild(n))}}function QF(t,e,n,r){const i=Qt(e,n),s=qo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ds(t.visibleWrites,i);return Qa(o,r.getNode().getImmediateChild(n))}else return null}function YF(t,e){return qo(t.visibleWrites,e)}function XF(t,e,n,r,i,s,o){let a;const l=Ds(t.visibleWrites,e),c=qo(l,nt());if(c!=null)a=c;else if(n!=null)a=Qa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=f.getNext();for(;_&&h.length<i;)d(_,r)!==0&&h.push(_),_=f.getNext();return h}else return[]}function JF(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}function Wm(t,e,n,r){return _b(t.writeTree,t.treePath,e,n,r)}function vb(t,e){return KF(t.writeTree,t.treePath,e)}function AT(t,e,n,r){return GF(t.writeTree,t.treePath,e,n,r)}function Gd(t,e){return YF(t.writeTree,Qt(t.treePath,e))}function ZF(t,e,n,r,i,s){return XF(t.writeTree,t.treePath,e,n,r,i,s)}function yv(t,e,n){return QF(t.writeTree,t.treePath,e,n)}function wb(t,e){return Eb(Qt(t.treePath,e),t.writeTree)}function Eb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,TT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,AF(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,bF(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,TT(r,e.snapshotNode,i.oldSnap));else throw nl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Tb=new tV;class _v{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new mv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yv(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:jo(this.viewCache_),s=ZF(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function nV(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function rV(t,e,n,r,i){const s=new eV;let o,a;if(n.type===si.OVERWRITE){const c=n;c.source.fromUser?o=Hm(t,e,c.path,c.snap,r,i,s):(ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Fe(c.path),o=Qd(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===si.MERGE){const c=n;c.source.fromUser?o=sV(t,e,c.path,c.children,r,i,s):(ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=qm(t,e,c.path,c.children,r,i,a,s))}else if(n.type===si.ACK_USER_WRITE){const c=n;c.revert?o=lV(t,e,c.path,r,i,s):o=oV(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===si.LISTEN_COMPLETE)o=aV(t,e,n.path,r,s);else throw nl("Unknown operation type: "+n.type);const l=s.getChanges();return iV(e,o,l),{viewCache:o,changes:l}}function iV(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Bm(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(xF(Bm(e)))}}function Sb(t,e,n,r,i,s){const o=e.eventCache;if(Gd(r,n)!=null)return e;{let a,l;if(Fe(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=jo(e),h=c instanceof Qe?c:Qe.EMPTY_NODE,d=vb(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Wm(r,jo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Be(n);if(c===".priority"){ne($s(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=AT(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=dt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=AT(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(h,f):d=o.getNode().getImmediateChild(c)}else d=yv(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return mu(e,a,o.isFullyInitialized()||Fe(n),t.filter.filtersNodes())}}function Qd(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Fe(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=Be(n);if(!l.isCompleteForPath(n)&&$s(n)>1)return e;const y=dt(n),C=l.getNode().getImmediateChild(_).updateChild(y,r);_===".priority"?c=h.updatePriority(l.getNode(),C):c=h.updateChild(l.getNode(),_,C,y,Tb,null)}const d=pb(e,c,l.isFullyInitialized()||Fe(n),h.filtersNodes()),f=new _v(i,d,s);return Sb(t,d,n,i,f,a)}function Hm(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new _v(i,e,s);if(Fe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=mu(e,c,!0,t.filter.filtersNodes());else{const d=Be(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=mu(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=dt(n),_=a.getNode().getImmediateChild(d);let y;if(Fe(f))y=r;else{const w=h.getCompleteChild(d);w!=null?Zx(f)===".priority"&&w.getChild(tb(f)).isEmpty()?y=w:y=w.updateChild(f,r):y=Qe.EMPTY_NODE}if(_.equals(y))l=e;else{const w=t.filter.updateChild(a.getNode(),d,y,f,h,o);l=mu(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function PT(t,e){return t.eventCache.isCompleteForChild(e)}function sV(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=Qt(n,l);PT(e,Be(h))&&(a=Hm(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=Qt(n,l);PT(e,Be(h))||(a=Hm(t,a,h,c,i,s,o))}),a}function kT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function qm(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Fe(n)?c=r:c=new ht(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),y=kT(t,_,f);l=Qd(t,l,new gt(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,f)=>{const _=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!_){const y=e.serverCache.getNode().getImmediateChild(d),w=kT(t,y,f);l=Qd(t,l,new gt(d),w,i,s,o,a)}}),l}function oV(t,e,n,r,i,s,o){if(Gd(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Fe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Qd(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Fe(n)){let c=new ht(null);return l.getNode().forEachChild(Pa,(h,d)=>{c=c.set(new gt(h),d)}),qm(t,e,n,c,i,s,a,o)}else return e}else{let c=new ht(null);return r.foreach((h,d)=>{const f=Qt(n,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),qm(t,e,n,c,i,s,a,o)}}function aV(t,e,n,r,i){const s=e.serverCache,o=pb(e,s.getNode(),s.isFullyInitialized()||Fe(n),s.isFiltered());return Sb(t,o,n,r,Tb,i)}function lV(t,e,n,r,i,s){let o;if(Gd(r,n)!=null)return e;{const a=new _v(r,e,i),l=e.eventCache.getNode();let c;if(Fe(n)||Be(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Wm(r,jo(e));else{const d=e.serverCache.getNode();ne(d instanceof Qe,"serverChildren would be complete if leaf node"),h=vb(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=Be(n);let d=yv(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,dt(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,Qe.EMPTY_NODE,dt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Wm(r,jo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Gd(r,nt())!=null,mu(e,c,o,t.filter.filtersNodes())}}function uV(t,e){const n=jo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Fe(e)&&!n.getImmediateChild(Be(e)).isEmpty())?n.getChild(e):null}function NT(t,e,n,r){e.type===si.MERGE&&e.source.queryId!==null&&(ne(jo(t.viewCache_),"We should always have a full cache before handling merges"),ne(Bm(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=rV(t.processor_,i,e,n,r);return nV(t.processor_,s.viewCache),ne(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,cV(t,s.changes,s.viewCache.eventCache.getNode())}function cV(t,e,n,r){const i=t.eventRegistrations_;return jF(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OT;function hV(t){ne(!OT,"__referenceConstructor has already been defined"),OT=t}function vv(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ne(s!=null,"SyncTree gave us an op for an invalid query."),NT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(NT(o,e,n,r));return s}}function wv(t,e){let n=null;for(const r of t.views.values())n=n||uV(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DT;function dV(t){ne(!DT,"__referenceConstructor has already been defined"),DT=t}class LT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=JF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fV(t,e,n,r,i){return BF(t.pendingWriteTree_,e,n,r,i),i?Vf(t,new Mo(cb(),e,n)):[]}function _a(t,e,n=!1){const r=$F(t.pendingWriteTree_,e);if(zF(t.pendingWriteTree_,e)){let s=new ht(null);return r.snap!=null?s=s.set(nt(),!0):Ir(r.children,o=>{s=s.set(new gt(o),!0)}),Vf(t,new Kd(r.path,s,n))}else return[]}function Ff(t,e,n){return Vf(t,new Mo(hb(),e,n))}function pV(t,e,n){const r=ht.fromObject(n);return Vf(t,new Zu(hb(),e,r))}function gV(t,e,n,r){const i=xb(t,r);if(i!=null){const s=bb(i),o=s.path,a=s.queryId,l=_r(o,e),c=new Mo(db(a),l,n);return Ab(t,o,c)}else return[]}function mV(t,e,n,r){const i=xb(t,r);if(i){const s=bb(i),o=s.path,a=s.queryId,l=_r(o,e),c=ht.fromObject(n),h=new Zu(db(a),l,c);return Ab(t,o,h)}else return[]}function Ib(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=_r(o,e),c=wv(a,l);if(c)return c});return _b(i,e,s,n,!0)}function Vf(t,e){return Cb(e,t.syncPointTree_,null,mb(t.pendingWriteTree_,nt()))}function Cb(t,e,n,r){if(Fe(t.path))return Rb(t,e,n,r);{const i=e.get(nt());n==null&&i!=null&&(n=wv(i,nt()));let s=[];const o=Be(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=wb(r,o);s=s.concat(Cb(a,l,c,h))}return i&&(s=s.concat(vv(i,t,r,n))),s}}function Rb(t,e,n,r){const i=e.get(nt());n==null&&i!=null&&(n=wv(i,nt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=wb(r,o),h=t.operationForChild(o);h&&(s=s.concat(Rb(h,a,l,c)))}),i&&(s=s.concat(vv(i,t,r,n))),s}function xb(t,e){return t.tagToQueryMap.get(e)}function bb(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new gt(t.substr(0,e))}}function Ab(t,e,n){const r=t.syncPointTree_.get(e);ne(r,"Missing sync point for query tag that we're tracking");const i=mb(t.pendingWriteTree_,e);return vv(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ev(n)}node(){return this.node_}}class Tv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qt(this.path_,e);return new Tv(this.syncTree_,n)}node(){return Ib(this.syncTree_,this.path_)}}const yV=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},MT=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _V(t[".sv"],e,n);if(typeof t[".sv"]=="object")return vV(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_V=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},vV=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ne(!1,"Unexpected increment value: "+r);const i=e.node();if(ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},wV=function(t,e,n,r){return Sv(e,new Tv(n,t),r)},EV=function(t,e,n){return Sv(t,new Ev(e),n)};function Sv(t,e,n){const r=t.getPriority().val(),i=MT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=MT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ht(a,Rn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ht(i))),o.forEachChild(bn,(a,l)=>{const c=Sv(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Cv(t,e){let n=e instanceof gt?e:new gt(e),r=t,i=Be(n);for(;i!==null;){const s=Va(r.node.children,i)||{children:{},childCount:0};r=new Iv(i,r,s),n=dt(n),i=Be(n)}return r}function hl(t){return t.node.value}function Pb(t,e){t.node.value=e,Km(t)}function kb(t){return t.node.childCount>0}function TV(t){return hl(t)===void 0&&!kb(t)}function Uf(t,e){Ir(t.node.children,(n,r)=>{e(new Iv(n,t,r))})}function Nb(t,e,n,r){n&&e(t),Uf(t,i=>{Nb(i,e,!0)})}function SV(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ic(t){return new gt(t.parent===null?t.name:Ic(t.parent)+"/"+t.name)}function Km(t){t.parent!==null&&IV(t.parent,t.name,t)}function IV(t,e,n){const r=TV(n),i=Ki(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Km(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Km(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=/[\[\].#$\/\u0000-\u001F\u007F]/,RV=/[\[\].#$\u0000-\u001F\u007F]/,Xp=10*1024*1024,Ob=function(t){return typeof t=="string"&&t.length!==0&&!CV.test(t)},xV=function(t){return typeof t=="string"&&t.length!==0&&!RV.test(t)},bV=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xV(t)},Db=function(t,e,n){const r=n instanceof gt?new aF(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+so(r));if(typeof e=="function")throw new Error(t+"contains a function "+so(r)+" with contents = "+e.toString());if(Nx(e))throw new Error(t+"contains "+e.toString()+" "+so(r));if(typeof e=="string"&&e.length>Xp/3&&_f(e)>Xp)throw new Error(t+"contains a string greater than "+Xp+" utf8 bytes "+so(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ir(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Ob(o)))throw new Error(t+" contains an invalid key ("+o+") "+so(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);lF(r,o),Db(t,a,r),uF(r)}),i&&s)throw new Error(t+' contains ".value" child '+so(r)+" in addition to actual children.")}},AV=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ob(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!bV(n))throw new Error(LD(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kV(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!nb(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ko(t,e,n){kV(t,n),NV(t,r=>Ur(r,e)||Ur(e,r))}function NV(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(OV(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function OV(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();pu&&Cn("event: "+n.toString()),Tc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="repo_interrupt",LV=25;class MV{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qd(),this.transactionQueueTree_=new Iv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jV(t,e,n){if(t.stats_=hv(t.repoInfo_),t.forceRestClient_||Nj())t.server_=new Hd(t.repoInfo_,(r,i,s,o)=>{jT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>FT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{on(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Li(t.repoInfo_,e,(r,i,s,o)=>{jT(t,r,i,s,o)},r=>{FT(t,r)},r=>{VV(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jj(t.repoInfo_,()=>new MF(t.stats_,t.server_)),t.infoData_=new kF,t.infoSyncTree_=new LT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Ff(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Rv(t,"connected",!1),t.serverSyncTree_=new LT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Ko(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function FV(t){const n=t.infoData_.getNode(new gt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Lb(t){return yV({timestamp:FV(t)})}function jT(t,e,n,r,i){t.dataUpdateCount++;const s=new gt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Id(n,c=>Rn(c));o=mV(t.serverSyncTree_,s,l,i)}else{const l=Rn(n);o=gV(t.serverSyncTree_,s,l,i)}else if(r){const l=Id(n,c=>Rn(c));o=pV(t.serverSyncTree_,s,l)}else{const l=Rn(n);o=Ff(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=bv(t,s)),Ko(t.eventQueue_,a,o)}function FT(t,e){Rv(t,"connected",e),e===!1&&BV(t)}function VV(t,e){Ir(e,(n,r)=>{Rv(t,n,r)})}function Rv(t,e,n){const r=new gt("/.info/"+e),i=Rn(n);t.infoData_.updateSnapshot(r,i);const s=Ff(t.infoSyncTree_,r,i);Ko(t.eventQueue_,r,s)}function UV(t){return t.nextWriteId_++}function BV(t){Mb(t,"onDisconnectEvents");const e=Lb(t),n=qd();Um(t.onDisconnect_,nt(),(i,s)=>{const o=wV(i,s,t.serverSyncTree_,e);ub(n,i,o)});let r=[];Um(n,nt(),(i,s)=>{r=r.concat(Ff(t.serverSyncTree_,i,s));const o=HV(t,i);bv(t,o)}),t.onDisconnect_=qd(),Ko(t.eventQueue_,nt(),r)}function $V(t){t.persistentConnection_&&t.persistentConnection_.interrupt(DV)}function Mb(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Cn(n,...e)}function jb(t,e,n){return Ib(t.serverSyncTree_,e,n)||Qe.EMPTY_NODE}function xv(t,e=t.transactionQueueTree_){if(e||Bf(t,e),hl(e)){const n=Vb(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&zV(t,Ic(e),n)}else kb(e)&&Uf(e,n=>{xv(t,n)})}function zV(t,e,n){const r=n.map(c=>c.currentWriteId),i=jb(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];ne(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=_r(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Mb(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(_a(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Bf(t,Cv(t.transactionQueueTree_,e)),xv(t,t.transactionQueueTree_),Ko(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)Tc(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{or("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}bv(t,e)}},o)}function bv(t,e){const n=Fb(t,e),r=Ic(n),i=Vb(t,n);return WV(t,i,r),r}function WV(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=_r(n,l.path);let h=!1,d;if(ne(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(_a(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=LV)h=!0,d="maxretry",i=i.concat(_a(t.serverSyncTree_,l.currentWriteId,!0));else{const f=jb(t,l.path,o);l.currentInputSnapshot=f;const _=e[a].update(f.val());if(_!==void 0){Db("transaction failed: Data returned ",_,l.path);let y=Rn(_);typeof _=="object"&&_!=null&&Ki(_,".priority")||(y=y.updatePriority(f.getPriority()));const C=l.currentWriteId,S=Lb(t),E=EV(y,f,S);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=E,l.currentWriteId=UV(t),o.splice(o.indexOf(C),1),i=i.concat(fV(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),i=i.concat(_a(t.serverSyncTree_,C,!0))}else h=!0,d="nodata",i=i.concat(_a(t.serverSyncTree_,l.currentWriteId,!0))}Ko(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Bf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Tc(r[a]);xv(t,t.transactionQueueTree_)}function Fb(t,e){let n,r=t.transactionQueueTree_;for(n=Be(e);n!==null&&hl(r)===void 0;)r=Cv(r,n),e=dt(e),n=Be(e);return r}function Vb(t,e){const n=[];return Ub(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ub(t,e,n){const r=hl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Uf(e,i=>{Ub(t,i,n)})}function Bf(t,e){const n=hl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Pb(e,n.length>0?n:void 0)}Uf(e,r=>{Bf(t,r)})}function HV(t,e){const n=Ic(Fb(t,e)),r=Cv(t.transactionQueueTree_,e);return SV(r,i=>{Jp(t,i)}),Jp(t,r),Nb(r,i=>{Jp(t,i)}),n}function Jp(t,e){const n=hl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ne(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(_a(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Pb(e,void 0):n.length=s+1,Ko(t.eventQueue_,Ic(e),i);for(let o=0;o<r.length;o++)Tc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function KV(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):or(`Invalid query segment '${n}' in query '${t}'`)}return e}const VT=function(t,e){const n=GV(t),r=n.namespace;n.domain==="firebase.com"&&Wi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Wi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ij();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Wx(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new gt(n.pathString)}},GV=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=qV(t.substring(h,d)));const f=KV(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Fe(this._path)?null:Zx(this._path)}get ref(){return new dl(this._repo,this._path)}get _queryIdentifier(){const e=IT(this._queryParams),n=uv(e);return n==="{}"?"default":n}get _queryObject(){return IT(this._queryParams)}isEqual(e){if(e=Xt(e),!(e instanceof Av))return!1;const n=this._repo===e._repo,r=nb(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+oF(this._path)}}class dl extends Av{constructor(e,n){super(e,n,new gv,!1)}get parent(){const e=tb(this._path);return e===null?null:new dl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}hV(dl);dV(dl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="FIREBASE_DATABASE_EMULATOR_HOST",Gm={};let YV=!1;function XV(t,e,n,r){t.repoInfo_=new Wx(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function JV(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Wi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=VT(s,i),a=o.repoInfo,l;typeof process<"u"&&sT&&(l=sT[QV]),l?(s=`http://${l}?ns=${a.namespace}`,o=VT(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new Dj(t.name,t.options,e);AV("Invalid Firebase Database URL",o),Fe(o.path)||Wi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=eU(a,t,c,new Oj(t.name,n));return new tU(h,t)}function ZV(t,e){const n=Gm[e];(!n||n[t.key]!==t)&&Wi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$V(t),delete n[t.key]}function eU(t,e,n,r){let i=Gm[e.name];i||(i={},Gm[e.name]=i);let s=i[t.toURLString()];return s&&Wi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new MV(t,YV,n,r),i[t.toURLString()]=s,s}class tU{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new dl(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ZV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Wi("Cannot call "+e+" on a deleted database.")}}function nU(t=g_(),e){const n=wf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=yC("database");r&&rU(n,...r)}return n}function rU(t,e,n,r={}){t=Xt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Wi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Wi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Uh(Uh.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:wC(r.mockUserToken,t.app.options.projectId);s=new Uh(o)}XV(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t){_j(zo),Ao(new Fs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return JV(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),li(oT,aT,t),li(oT,aT,"esm2017")}Li.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Li.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};iU();const Pv={apiKey:"AIzaSyD5In_8cVRzcEWpOd7u16eQ0w_bJbz39io",authDomain:"evol-b02ac.firebaseapp.com",projectId:"evol-b02ac",storageBucket:"evol-b02ac.firebasestorage.app",messagingSenderId:"556948955579",appId:"1:556948955579:web:98d9b3c47e34682ff3649e",databaseURL:""};Pv.apiKey||console.error("[Firebase] Missing environment variables. Check .env or GitHub Actions secrets.");console.log("[E.VOL][Firebase] Loaded config:",Pv);const kv=CC(Pv),lo=n5(kv),sU=new Ii,ec=X3(kv);nU(kv);function oU(){const[t,e]=N.useState(null);N.useEffect(()=>{const r=YC(lo,i=>e(i));return()=>r()},[]);const n=()=>{XC(lo).catch(console.error)};return m.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-purple-50 to-white",children:[m.jsxs("nav",{className:"flex items-center justify-between px-6 py-4 bg-white shadow",children:[m.jsx(Si,{to:"/E.vol/",className:"text-xl font-bold text-purple-700",children:"🎮 E.Vol"}),m.jsxs("div",{className:"flex gap-4 text-sm",children:[m.jsx(Si,{to:"/riddles",className:"hover:text-purple-600",children:"Riddles"}),m.jsx(Si,{to:"/emoji-guess",className:"hover:text-purple-600",children:"Emoji"}),m.jsx(Si,{to:"/trivia",className:"hover:text-purple-600",children:"Trivia"}),m.jsx(Si,{to:"/chess",className:"hover:text-purple-600",children:"Chess"}),m.jsx(Si,{to:"/strategy",className:"hover:text-purple-600",children:"Connect4"})]}),m.jsx("div",{children:t?m.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-500 text-white rounded text-sm hover:bg-red-600",children:"Sign Out"}):m.jsx("span",{className:"text-gray-500 text-sm",children:"Guest Mode"})})]}),m.jsx("main",{className:"flex-1 container mx-auto p-6 w-full",children:m.jsx(BO,{})}),m.jsxs("footer",{className:"text-center py-4 text-gray-500 text-xs",children:["© ",new Date().getFullYear()," E.Vol — Play, Learn, Compete"]})]})}function aU(){const t=c_(),{signInEmail:e,signInGoogle:n}=Yi(),[r,i]=N.useState(""),[s,o]=N.useState(""),[a,l]=N.useState(""),c=async h=>{h.preventDefault();try{await e(r,s),t("/")}catch(d){l(d.message)}};return m.jsxs("div",{className:"mx-auto max-w-sm p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Sign in"}),m.jsxs("form",{onSubmit:c,className:"space-y-3",children:[m.jsx("input",{className:"w-full border rounded p-2",placeholder:"Email",value:r,onChange:h=>i(h.target.value)}),m.jsx("input",{className:"w-full border rounded p-2",placeholder:"Password",type:"password",value:s,onChange:h=>o(h.target.value)}),a&&m.jsx("p",{className:"text-red-600 text-sm",children:a}),m.jsx("button",{className:"w-full border rounded p-2",children:"Sign in"})]}),m.jsx("button",{className:"w-full border rounded p-2 mt-3",onClick:async()=>{try{await n(),t("/")}catch(h){l(h.message)}},children:"Continue with Google"}),m.jsxs("p",{className:"mt-4 text-sm",children:["No account? ",m.jsx(Si,{to:"/register",className:"underline",children:"Register"})]})]})}function lU(){const t=c_(),{registerEmail:e}=Yi(),[n,r]=N.useState(""),[i,s]=N.useState(""),[o,a]=N.useState(""),[l,c]=N.useState(""),h=async d=>{d.preventDefault();try{await e(n,i,o),t("/")}catch(f){c(f.message)}};return m.jsxs("div",{className:"mx-auto max-w-sm p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Create account"}),m.jsxs("form",{onSubmit:h,className:"space-y-3",children:[m.jsx("input",{className:"w-full border rounded p-2",placeholder:"Display name",value:o,onChange:d=>a(d.target.value)}),m.jsx("input",{className:"w-full border rounded p-2",placeholder:"Email",value:n,onChange:d=>r(d.target.value)}),m.jsx("input",{className:"w-full border rounded p-2",placeholder:"Password",type:"password",value:i,onChange:d=>s(d.target.value)}),l&&m.jsx("p",{className:"text-red-600 text-sm",children:l}),m.jsx("button",{className:"w-full border rounded p-2",children:"Register"})]}),m.jsxs("p",{className:"mt-4 text-sm",children:["Already have an account? ",m.jsx(Si,{to:"/login",className:"underline",children:"Sign in"})]})]})}const Bh=[{q:"What has to be broken before you can use it?",a:"An egg",difficulty:"Easy",category:"Logic",hint:"Think about something in your breakfast."},{q:"I'm tall when I'm young, and I'm short when I'm old. What am I?",a:"A candle",difficulty:"Easy",category:"Logic",hint:"It burns and melts as it ages."},{q:"What month of the year has 28 days?",a:"All of them",difficulty:"Medium",category:"Trick",hint:"Don't think about February specifically."},{q:"What can travel around the world while staying in a corner?",a:"A stamp",difficulty:"Medium",category:"Logic",hint:"It's something you find on mail."},{q:"I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?",a:"A map",difficulty:"Hard",category:"Logic",hint:"It shows places but doesn't contain them."},{q:"The more you take, the more you leave behind. What am I?",a:"Footsteps",difficulty:"Medium",category:"Word",hint:"Think about walking somewhere."},{q:"What has keys but no locks, space but no room, and you can enter but not go inside?",a:"A keyboard",difficulty:"Hard",category:"Technology",hint:"You use it every day with computers."},{q:"What gets wet while drying?",a:"A towel",difficulty:"Easy",category:"Logic",hint:"It helps you after a shower."},{q:"I'm light as a feather, yet the strongest person can't hold me for five minutes. What am I?",a:"Your breath",difficulty:"Hard",category:"Logic",hint:"You do this automatically without thinking."},{q:"What begins with T, ends with T, and has T in it?",a:"A teapot",difficulty:"Medium",category:"Word",hint:"It's used for making a hot beverage."}];async function fl({uid:t,displayName:e="Guest",gameKey:n,score:r}){if(t)await gj(Xu(ec,"scores"),{uid:t,displayName:e,gameKey:n,score:r,createdAt:yj()});else{const i=`guest-scores-${n}`;try{const s=JSON.parse(localStorage.getItem(i)||"[]");s.push({score:r,ts:Date.now()}),localStorage.setItem(i,JSON.stringify(s))}catch(s){console.warn("[GuestScore] Failed to persist guest score",s)}}}async function uU(t,e=50){const n=Bd(Xu(ec,"scores"),Fh("gameKey","==",t),Rx("score","desc"),xx(e));return(await lv(n)).docs.map(i=>({id:i.id,...i.data()}))}async function cU(t=50){const e=Bd(Xu(ec,"scores"),Rx("score","desc"),xx(t));return(await lv(e)).docs.map(r=>({id:r.id,...r.data()}))}function $f({gameKey:t=null}){const{user:e}=Yi(),[n,r]=N.useState({totalScore:0,gamesPlayed:0,gamesWon:0}),[i,s]=N.useState(!0);N.useEffect(()=>{if(!e){s(!1);return}(async()=>{try{s(!0);let h;t?h=Bd(Xu(ec,"scores"),Fh("uid","==",e.uid),Fh("gameKey","==",t)):h=Bd(Xu(ec,"scores"),Fh("uid","==",e.uid));const d=await lv(h);let f=0,_=0,y=0;d.forEach(w=>{const C=w.data();f+=C.score||0,_+=1,C.score&&C.score>0&&(y+=1)}),r({totalScore:f,gamesPlayed:_,gamesWon:y})}catch(h){console.error("Error fetching stats:",h)}finally{s(!1)}})()},[e,t]);const{totalScore:o,gamesPlayed:a,gamesWon:l}=n,c=a?Math.round(l/a*100):0;return i?m.jsx("div",{className:"flex items-center justify-center p-4 bg-white shadow rounded-2xl",children:m.jsx("div",{className:"animate-pulse text-gray-500",children:"Loading stats..."})}):e?m.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 shadow rounded-2xl transition-all duration-200 hover:shadow-md",children:[m.jsx(Zp,{label:"Total Score",value:o,color:"text-blue-600"}),m.jsx(Zp,{label:"Games Played",value:a,color:"text-green-600"}),m.jsx(Zp,{label:"Win Rate",value:`${c}%`,color:"text-purple-600"})]}):m.jsx("div",{className:"flex items-center justify-center p-4 bg-white shadow rounded-2xl",children:m.jsx("span",{className:"text-gray-500",children:"Sign in to track your stats"})})}function Zp({label:t,value:e,color:n="text-gray-700"}){return m.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[m.jsx("span",{className:`text-2xl font-bold ${n} transition-colors duration-200`,children:e}),m.jsx("span",{className:"text-sm text-gray-600 font-medium",children:t})]})}function zf({gameKey:t=null}){const[e,n]=N.useState([]);return N.useEffect(()=>{(async()=>{const r=t?await uU(t):await cU();n(r)})()},[t]),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:t?`Leaderboard – ${t}`:"Global Leaderboard"}),m.jsx("ol",{className:"space-y-1",children:e.map((r,i)=>m.jsxs("li",{className:"flex justify-between border rounded px-3 py-2 bg-white",children:[m.jsxs("span",{children:[i+1,". ",r.displayName||"Anonymous"]}),m.jsx("span",{className:"font-semibold",children:r.score})]},r.id))})]})}function hU(){const{user:t}=Yi(),[e,n]=N.useState(0),[r,i]=N.useState(!1),[s,o]=N.useState(!1),[a,l]=N.useState(0),[c,h]=N.useState(0),[d,f]=N.useState(0),[_,y]=N.useState("All"),[w,C]=N.useState("All"),S=["All",...new Set(Bh.map(P=>P.category))],E=["All",...new Set(Bh.map(P=>P.difficulty))],R=Bh.filter(P=>(_==="All"||P.difficulty===_)&&(w==="All"||P.category===w)),M=R[e%R.length],V=()=>{const P=T(M.difficulty,d);i(!1),o(!1),n(O=>O+1),l(O=>O+1),h(O=>O+P),f(0)},H=()=>{i(!1),o(!1),n(P=>P+1),l(0),f(0)},v=()=>{o(!0),f(P=>P+1)},T=(P,O)=>{const A={Easy:10,Medium:20,Hard:30}[P]||10,pe=O*5;return Math.max(1,A-pe)},x=async()=>{t&&(await fl({uid:t.uid,displayName:t.displayName||t.email,gameKey:"riddles",score:c}),alert(`Score of ${c} submitted!`),h(0),l(0))},b=()=>{n(Math.floor(Math.random()*R.length)),i(!1),o(!1),f(0)};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:m.jsxs("div",{className:"mx-auto max-w-4xl p-4 space-y-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"🧩 Riddles Challenge"}),m.jsx($f,{gameKey:"riddles"}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-center",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-green-600",children:a}),m.jsx("span",{className:"text-sm text-gray-600",children:"Current Streak"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-blue-600",children:c}),m.jsx("span",{className:"text-sm text-gray-600",children:"Session Score"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-purple-600",children:R.length}),m.jsx("span",{className:"text-sm text-gray-600",children:"Available Riddles"})]})]})}),m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Filters"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),m.jsx("select",{className:"border border-gray-300 rounded-lg p-2 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:_,onChange:P=>{y(P.target.value),n(0)},children:E.map(P=>m.jsx("option",{value:P,children:P},P))})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Category"}),m.jsx("select",{className:"border border-gray-300 rounded-lg p-2 bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:w,onChange:P=>{C(P.target.value),n(0)},children:S.map(P=>m.jsx("option",{value:P,children:P},P))})]}),m.jsx("div",{className:"flex items-end",children:m.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",onClick:b,children:"🎲 New Riddle"})})]})]}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M.difficulty==="Easy"?"bg-green-100 text-green-700":M.difficulty==="Medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:M.difficulty}),m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:M.category})]}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Points: ",T(M.difficulty,d)]})]}),m.jsx("div",{className:"text-xl leading-relaxed text-gray-800 bg-gray-50 p-4 rounded-lg",children:M.q}),s&&m.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded transition-all duration-300",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-yellow-600 text-sm font-medium",children:"💡 Hint:"})}),m.jsx("p",{className:"text-yellow-800 mt-1",children:M.hint})]}),r&&m.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded transition-all duration-300",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-green-600 text-sm font-medium",children:"✅ Answer:"})}),m.jsx("p",{className:"text-green-800 mt-1 font-semibold",children:M.a})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[!s&&m.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",onClick:v,children:"💡 Get Hint (-5 pts)"}),m.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",onClick:()=>i(P=>!P),children:r?"🙈 Hide Answer":"👁️ Reveal Answer"}),m.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",onClick:V,children:"✅ I Solved It!"}),m.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",onClick:H,children:"⏭️ Skip"})]}),c>0&&m.jsxs("button",{className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 mt-4",onClick:x,children:["🏆 Submit Score (",c," points)"]})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsx(zf,{gameKey:"riddles"})})]})]})})}function Bb(t,e){return function(){return t.apply(e,arguments)}}const{toString:dU}=Object.prototype,{getPrototypeOf:Nv}=Object,{iterator:Wf,toStringTag:$b}=Symbol,Hf=(t=>e=>{const n=dU.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Kr=t=>(t=t.toLowerCase(),e=>Hf(e)===t),qf=t=>e=>typeof e===t,{isArray:pl}=Array,Ya=qf("undefined");function Cc(t){return t!==null&&!Ya(t)&&t.constructor!==null&&!Ya(t.constructor)&&Kn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const zb=Kr("ArrayBuffer");function fU(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&zb(t.buffer),e}const pU=qf("string"),Kn=qf("function"),Wb=qf("number"),Rc=t=>t!==null&&typeof t=="object",gU=t=>t===!0||t===!1,$h=t=>{if(Hf(t)!=="object")return!1;const e=Nv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!($b in t)&&!(Wf in t)},mU=t=>{if(!Rc(t)||Cc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},yU=Kr("Date"),_U=Kr("File"),vU=Kr("Blob"),wU=Kr("FileList"),EU=t=>Rc(t)&&Kn(t.pipe),TU=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Kn(t.append)&&((e=Hf(t))==="formdata"||e==="object"&&Kn(t.toString)&&t.toString()==="[object FormData]"))},SU=Kr("URLSearchParams"),[IU,CU,RU,xU]=["ReadableStream","Request","Response","Headers"].map(Kr),bU=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),pl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Cc(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function Hb(t,e){if(Cc(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qb=t=>!Ya(t)&&t!==yo;function Qm(){const{caseless:t,skipUndefined:e}=qb(this)&&this||{},n={},r=(i,s)=>{const o=t&&Hb(n,s)||s;$h(n[o])&&$h(i)?n[o]=Qm(n[o],i):$h(i)?n[o]=Qm({},i):pl(i)?n[o]=i.slice():(!e||!Ya(i))&&(n[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&xc(arguments[i],r);return n}const AU=(t,e,n,{allOwnKeys:r}={})=>(xc(e,(i,s)=>{n&&Kn(i)?t[s]=Bb(i,n):t[s]=i},{allOwnKeys:r}),t),PU=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kU=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},NU=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Nv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},OU=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},DU=t=>{if(!t)return null;if(pl(t))return t;let e=t.length;if(!Wb(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},LU=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Nv(Uint8Array)),MU=(t,e)=>{const r=(t&&t[Wf]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},jU=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},FU=Kr("HTMLFormElement"),VU=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),UT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),UU=Kr("RegExp"),Kb=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};xc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},BU=t=>{Kb(t,(e,n)=>{if(Kn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Kn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$U=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return pl(t)?r(t):r(String(t).split(e)),n},zU=()=>{},WU=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function HU(t){return!!(t&&Kn(t.append)&&t[$b]==="FormData"&&t[Wf])}const qU=t=>{const e=new Array(10),n=(r,i)=>{if(Rc(r)){if(e.indexOf(r)>=0)return;if(Cc(r))return r;if(!("toJSON"in r)){e[i]=r;const s=pl(r)?[]:{};return xc(r,(o,a)=>{const l=n(o,i+1);!Ya(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},KU=Kr("AsyncFunction"),GU=t=>t&&(Rc(t)||Kn(t))&&Kn(t.then)&&Kn(t.catch),Gb=((t,e)=>t?setImmediate:e?((n,r)=>(yo.addEventListener("message",({source:i,data:s})=>{i===yo&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),yo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Kn(yo.postMessage)),QU=typeof queueMicrotask<"u"?queueMicrotask.bind(yo):typeof process<"u"&&process.nextTick||Gb,YU=t=>t!=null&&Kn(t[Wf]),$={isArray:pl,isArrayBuffer:zb,isBuffer:Cc,isFormData:TU,isArrayBufferView:fU,isString:pU,isNumber:Wb,isBoolean:gU,isObject:Rc,isPlainObject:$h,isEmptyObject:mU,isReadableStream:IU,isRequest:CU,isResponse:RU,isHeaders:xU,isUndefined:Ya,isDate:yU,isFile:_U,isBlob:vU,isRegExp:UU,isFunction:Kn,isStream:EU,isURLSearchParams:SU,isTypedArray:LU,isFileList:wU,forEach:xc,merge:Qm,extend:AU,trim:bU,stripBOM:PU,inherits:kU,toFlatObject:NU,kindOf:Hf,kindOfTest:Kr,endsWith:OU,toArray:DU,forEachEntry:MU,matchAll:jU,isHTMLForm:FU,hasOwnProperty:UT,hasOwnProp:UT,reduceDescriptors:Kb,freezeMethods:BU,toObjectSet:$U,toCamelCase:VU,noop:zU,toFiniteNumber:WU,findKey:Hb,global:yo,isContextDefined:qb,isSpecCompliantForm:HU,toJSONObject:qU,isAsyncFn:KU,isThenable:GU,setImmediate:Gb,asap:QU,isIterable:YU};function be(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}$.inherits(be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Qb=be.prototype,Yb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Yb[t]={value:t}});Object.defineProperties(be,Yb);Object.defineProperty(Qb,"isAxiosError",{value:!0});be.from=(t,e,n,r,i,s)=>{const o=Object.create(Qb);$.toFlatObject(t,o,function(h){return h!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return be.call(o,a,l,n,r,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const XU=null;function Ym(t){return $.isPlainObject(t)||$.isArray(t)}function Xb(t){return $.endsWith(t,"[]")?t.slice(0,-2):t}function BT(t,e,n){return t?t.concat(e).map(function(i,s){return i=Xb(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function JU(t){return $.isArray(t)&&!t.some(Ym)}const ZU=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});function Kf(t,e,n){if(!$.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,C){return!$.isUndefined(C[w])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(e);if(!$.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if($.isDate(y))return y.toISOString();if($.isBoolean(y))return y.toString();if(!l&&$.isBlob(y))throw new be("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(y)||$.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,w,C){let S=y;if(y&&!C&&typeof y=="object"){if($.endsWith(w,"{}"))w=r?w:w.slice(0,-2),y=JSON.stringify(y);else if($.isArray(y)&&JU(y)||($.isFileList(y)||$.endsWith(w,"[]"))&&(S=$.toArray(y)))return w=Xb(w),S.forEach(function(R,M){!($.isUndefined(R)||R===null)&&e.append(o===!0?BT([w],M,s):o===null?w:w+"[]",c(R))}),!1}return Ym(y)?!0:(e.append(BT(C,w,s),c(y)),!1)}const d=[],f=Object.assign(ZU,{defaultVisitor:h,convertValue:c,isVisitable:Ym});function _(y,w){if(!$.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(y),$.forEach(y,function(S,E){(!($.isUndefined(S)||S===null)&&i.call(e,S,$.isString(E)?E.trim():E,w,f))===!0&&_(S,w?w.concat(E):[E])}),d.pop()}}if(!$.isObject(t))throw new TypeError("data must be an object");return _(t),e}function $T(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ov(t,e){this._pairs=[],t&&Kf(t,this,e)}const Jb=Ov.prototype;Jb.append=function(e,n){this._pairs.push([e,n])};Jb.toString=function(e){const n=e?function(r){return e.call(this,r,$T)}:$T;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function e6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Zb(t,e,n){if(!e)return t;const r=n&&n.encode||e6;$.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=$.isURLSearchParams(e)?e.toString():new Ov(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class zT{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,function(r){r!==null&&e(r)})}}const eA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},t6=typeof URLSearchParams<"u"?URLSearchParams:Ov,n6=typeof FormData<"u"?FormData:null,r6=typeof Blob<"u"?Blob:null,i6={isBrowser:!0,classes:{URLSearchParams:t6,FormData:n6,Blob:r6},protocols:["http","https","file","blob","url","data"]},Dv=typeof window<"u"&&typeof document<"u",Xm=typeof navigator=="object"&&navigator||void 0,s6=Dv&&(!Xm||["ReactNative","NativeScript","NS"].indexOf(Xm.product)<0),o6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",a6=Dv&&window.location.href||"http://localhost",l6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dv,hasStandardBrowserEnv:s6,hasStandardBrowserWebWorkerEnv:o6,navigator:Xm,origin:a6},Symbol.toStringTag,{value:"Module"})),xn={...l6,...i6};function u6(t,e){return Kf(t,new xn.classes.URLSearchParams,{visitor:function(n,r,i,s){return xn.isNode&&$.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function c6(t){return $.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function h6(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function tA(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&$.isArray(i)?i.length:o,l?($.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!$.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&$.isArray(i[o])&&(i[o]=h6(i[o])),!a)}if($.isFormData(t)&&$.isFunction(t.entries)){const n={};return $.forEachEntry(t,(r,i)=>{e(c6(r),i,n,0)}),n}return null}function d6(t,e,n){if($.isString(t))try{return(e||JSON.parse)(t),$.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const bc={transitional:eA,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=$.isObject(e);if(s&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return i?JSON.stringify(tA(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e)||$.isReadableStream(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return u6(e,this.formSerializer).toString();if((a=$.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Kf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),d6(e)):e}],transformResponse:[function(e){const n=this.transitional||bc.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if($.isResponse(e)||$.isReadableStream(e))return e;if(e&&$.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?be.from(a,be.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xn.classes.FormData,Blob:xn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],t=>{bc.headers[t]={}});const f6=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p6=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&f6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},WT=Symbol("internals");function Vl(t){return t&&String(t).trim().toLowerCase()}function zh(t){return t===!1||t==null?t:$.isArray(t)?t.map(zh):String(t)}function g6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const m6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function eg(t,e,n,r,i){if($.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!$.isString(e)){if($.isString(r))return e.indexOf(r)!==-1;if($.isRegExp(r))return r.test(e)}}function y6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function _6(t,e){const n=$.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Gn=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=Vl(l);if(!h)throw new Error("header name must be a non-empty string");const d=$.findKey(i,h);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=zh(a))}const o=(a,l)=>$.forEach(a,(c,h)=>s(c,h,l));if($.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if($.isString(e)&&(e=e.trim())&&!m6(e))o(p6(e),n);else if($.isObject(e)&&$.isIterable(e)){let a={},l,c;for(const h of e){if(!$.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?$.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=Vl(e),e){const r=$.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return g6(i);if($.isFunction(n))return n.call(this,i,r);if($.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Vl(e),e){const r=$.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||eg(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Vl(o),o){const a=$.findKey(r,o);a&&(!n||eg(r,r[a],a,n))&&(delete r[a],i=!0)}}return $.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||eg(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return $.forEach(this,(i,s)=>{const o=$.findKey(r,s);if(o){n[o]=zh(i),delete n[s];return}const a=e?y6(s):String(s).trim();a!==s&&delete n[s],n[a]=zh(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return $.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&$.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[WT]=this[WT]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Vl(o);r[a]||(_6(i,o),r[a]=!0)}return $.isArray(e)?e.forEach(s):s(e),this}};Gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Gn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});$.freezeMethods(Gn);function tg(t,e){const n=this||bc,r=e||n,i=Gn.from(r.headers);let s=r.data;return $.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function nA(t){return!!(t&&t.__CANCEL__)}function gl(t,e,n){be.call(this,t??"canceled",be.ERR_CANCELED,e,n),this.name="CanceledError"}$.inherits(gl,be,{__CANCEL__:!0});function rA(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new be("Request failed with status code "+n.status,[be.ERR_BAD_REQUEST,be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function v6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function w6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const _=h&&c-h;return _?Math.round(f*1e3/_):void 0}}function E6(t,e){let n=0,r=1e3/e,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const h=Date.now(),d=h-n;d>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Yd=(t,e,n=3)=>{let r=0;const i=w6(50,250);return E6(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},HT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},qT=t=>(...e)=>$.asap(()=>t(...e)),T6=xn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,xn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(xn.origin),xn.navigator&&/(msie|trident)/i.test(xn.navigator.userAgent)):()=>!0,S6=xn.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];$.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),$.isString(r)&&o.push("path="+r),$.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function I6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function C6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function iA(t,e,n){let r=!I6(e);return t&&(r||n==!1)?C6(t,e):e}const KT=t=>t instanceof Gn?{...t}:t;function Fo(t,e){e=e||{};const n={};function r(c,h,d,f){return $.isPlainObject(c)&&$.isPlainObject(h)?$.merge.call({caseless:f},c,h):$.isPlainObject(h)?$.merge({},h):$.isArray(h)?h.slice():h}function i(c,h,d,f){if($.isUndefined(h)){if(!$.isUndefined(c))return r(void 0,c,d,f)}else return r(c,h,d,f)}function s(c,h){if(!$.isUndefined(h))return r(void 0,h)}function o(c,h){if($.isUndefined(h)){if(!$.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,d){if(d in e)return r(c,h);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,d)=>i(KT(c),KT(h),d,!0)};return $.forEach(Object.keys({...t,...e}),function(h){const d=l[h]||i,f=d(t[h],e[h],h);$.isUndefined(f)&&d!==a||(n[h]=f)}),n}const sA=t=>{const e=Fo({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Gn.from(o),e.url=Zb(iA(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),$.isFormData(n)){if(xn.hasStandardBrowserEnv||xn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if($.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([h,d])=>{c.includes(h.toLowerCase())&&o.set(h,d)})}}if(xn.hasStandardBrowserEnv&&(r&&$.isFunction(r)&&(r=r(e)),r||r!==!1&&T6(e.url))){const l=i&&s&&S6.read(s);l&&o.set(i,l)}return e},R6=typeof XMLHttpRequest<"u",x6=R6&&function(t){return new Promise(function(n,r){const i=sA(t);let s=i.data;const o=Gn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,d,f,_,y;function w(){_&&_(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function S(){if(!C)return;const R=Gn.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),V={data:!a||a==="text"||a==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:R,config:t,request:C};rA(function(v){n(v),w()},function(v){r(v),w()},V),C=null}"onloadend"in C?C.onloadend=S:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(S)},C.onabort=function(){C&&(r(new be("Request aborted",be.ECONNABORTED,t,C)),C=null)},C.onerror=function(M){const V=M&&M.message?M.message:"Network Error",H=new be(V,be.ERR_NETWORK,t,C);H.event=M||null,r(H),C=null},C.ontimeout=function(){let M=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const V=i.transitional||eA;i.timeoutErrorMessage&&(M=i.timeoutErrorMessage),r(new be(M,V.clarifyTimeoutError?be.ETIMEDOUT:be.ECONNABORTED,t,C)),C=null},s===void 0&&o.setContentType(null),"setRequestHeader"in C&&$.forEach(o.toJSON(),function(M,V){C.setRequestHeader(V,M)}),$.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),a&&a!=="json"&&(C.responseType=i.responseType),c&&([f,y]=Yd(c,!0),C.addEventListener("progress",f)),l&&C.upload&&([d,_]=Yd(l),C.upload.addEventListener("progress",d),C.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(h=R=>{C&&(r(!R||R.type?new gl(null,t,C):R),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const E=v6(i.url);if(E&&xn.protocols.indexOf(E)===-1){r(new be("Unsupported protocol "+E+":",be.ERR_BAD_REQUEST,t));return}C.send(s||null)})},b6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof be?h:new gl(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new be(`timeout ${e} of ms exceeded`,be.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>$.asap(a),l}},A6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},P6=async function*(t,e){for await(const n of k6(t))yield*A6(n,e)},k6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},GT=(t,e,n,r)=>{const i=P6(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let d=h.byteLength;if(n){let f=s+=d;n(f)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},QT=64*1024,{isFunction:dh}=$,N6=(({Request:t,Response:e})=>({Request:t,Response:e}))($.global),{ReadableStream:YT,TextEncoder:XT}=$.global,JT=(t,...e)=>{try{return!!t(...e)}catch{return!1}},O6=t=>{t=$.merge.call({skipUndefined:!0},N6,t);const{fetch:e,Request:n,Response:r}=t,i=e?dh(e):typeof fetch=="function",s=dh(n),o=dh(r);if(!i)return!1;const a=i&&dh(YT),l=i&&(typeof XT=="function"?(y=>w=>y.encode(w))(new XT):async y=>new Uint8Array(await new n(y).arrayBuffer())),c=s&&a&&JT(()=>{let y=!1;const w=new n(xn.origin,{body:new YT,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!w}),h=o&&a&&JT(()=>$.isReadableStream(new r("").body)),d={stream:h&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(w,C)=>{let S=w&&w[y];if(S)return S.call(w);throw new be(`Response type '${y}' is not supported`,be.ERR_NOT_SUPPORT,C)})});const f=async y=>{if(y==null)return 0;if($.isBlob(y))return y.size;if($.isSpecCompliantForm(y))return(await new n(xn.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if($.isArrayBufferView(y)||$.isArrayBuffer(y))return y.byteLength;if($.isURLSearchParams(y)&&(y=y+""),$.isString(y))return(await l(y)).byteLength},_=async(y,w)=>{const C=$.toFiniteNumber(y.getContentLength());return C??f(w)};return async y=>{let{url:w,method:C,data:S,signal:E,cancelToken:R,timeout:M,onDownloadProgress:V,onUploadProgress:H,responseType:v,headers:T,withCredentials:x="same-origin",fetchOptions:b}=sA(y),P=e||fetch;v=v?(v+"").toLowerCase():"text";let O=b6([E,R&&R.toAbortSignal()],M),A=null;const pe=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let je;try{if(H&&c&&C!=="get"&&C!=="head"&&(je=await _(T,S))!==0){let Ee=new n(w,{method:"POST",body:S,duplex:"half"}),ye;if($.isFormData(S)&&(ye=Ee.headers.get("content-type"))&&T.setContentType(ye),Ee.body){const[Pe,Ze]=HT(je,Yd(qT(H)));S=GT(Ee.body,QT,Pe,Ze)}}$.isString(x)||(x=x?"include":"omit");const re=s&&"credentials"in n.prototype,Ae={...b,signal:O,method:C.toUpperCase(),headers:T.normalize().toJSON(),body:S,duplex:"half",credentials:re?x:void 0};A=s&&new n(w,Ae);let Q=await(s?P(A,b):P(w,Ae));const le=h&&(v==="stream"||v==="response");if(h&&(V||le&&pe)){const Ee={};["status","statusText","headers"].forEach(Ke=>{Ee[Ke]=Q[Ke]});const ye=$.toFiniteNumber(Q.headers.get("content-length")),[Pe,Ze]=V&&HT(ye,Yd(qT(V),!0))||[];Q=new r(GT(Q.body,QT,Pe,()=>{Ze&&Ze(),pe&&pe()}),Ee)}v=v||"text";let he=await d[$.findKey(d,v)||"text"](Q,y);return!le&&pe&&pe(),await new Promise((Ee,ye)=>{rA(Ee,ye,{data:he,headers:Gn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:y,request:A})})}catch(re){throw pe&&pe(),re&&re.name==="TypeError"&&/Load failed|fetch/i.test(re.message)?Object.assign(new be("Network Error",be.ERR_NETWORK,y,A),{cause:re.cause||re}):be.from(re,re&&re.code,y,A)}}},D6=new Map,oA=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:i}=e,s=[r,i,n];let o=s.length,a=o,l,c,h=D6;for(;a--;)l=s[a],c=h.get(l),c===void 0&&h.set(l,c=a?new Map:O6(e)),h=c;return c};oA();const Jm={http:XU,xhr:x6,fetch:{get:oA}};$.forEach(Jm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ZT=t=>`- ${t}`,L6=t=>$.isFunction(t)||t===null||t===!1,aA={getAdapter:(t,e)=>{t=$.isArray(t)?t:[t];const{length:n}=t;let r,i;const s={};for(let o=0;o<n;o++){r=t[o];let a;if(i=r,!L6(r)&&(i=Jm[(a=String(r)).toLowerCase()],i===void 0))throw new be(`Unknown adapter '${a}'`);if(i&&($.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(ZT).join(`
`):" "+ZT(o[0]):"as no adapter specified";throw new be("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Jm};function ng(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gl(null,t)}function eS(t){return ng(t),t.headers=Gn.from(t.headers),t.data=tg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aA.getAdapter(t.adapter||bc.adapter,t)(t).then(function(r){return ng(t),r.data=tg.call(t,t.transformResponse,r),r.headers=Gn.from(r.headers),r},function(r){return nA(r)||(ng(t),r&&r.response&&(r.response.data=tg.call(t,t.transformResponse,r.response),r.response.headers=Gn.from(r.response.headers))),Promise.reject(r)})}const lA="1.12.2",Gf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Gf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const tS={};Gf.transitional=function(e,n,r){function i(s,o){return"[Axios v"+lA+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new be(i(o," has been removed"+(n?" in "+n:"")),be.ERR_DEPRECATED);return n&&!tS[o]&&(tS[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Gf.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function M6(t,e,n){if(typeof t!="object")throw new be("options must be an object",be.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new be("option "+s+" must be "+l,be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new be("Unknown option "+s,be.ERR_BAD_OPTION)}}const Wh={assertOptions:M6,validators:Gf},ni=Wh.validators;let Eo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new zT,response:new zT}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Fo(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Wh.assertOptions(r,{silentJSONParsing:ni.transitional(ni.boolean),forcedJSONParsing:ni.transitional(ni.boolean),clarifyTimeoutError:ni.transitional(ni.boolean)},!1),i!=null&&($.isFunction(i)?n.paramsSerializer={serialize:i}:Wh.assertOptions(i,{encode:ni.function,serialize:ni.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Wh.assertOptions(n,{baseUrl:ni.spelling("baseURL"),withXsrfToken:ni.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&$.merge(s.common,s[n.method]);s&&$.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=Gn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let h,d=0,f;if(!l){const y=[eS.bind(this),void 0];for(y.unshift(...a),y.push(...c),f=y.length,h=Promise.resolve(n);d<f;)h=h.then(y[d++],y[d++]);return h}f=a.length;let _=n;for(;d<f;){const y=a[d++],w=a[d++];try{_=y(_)}catch(C){w.call(this,C);break}}try{h=eS.call(this,_)}catch(y){return Promise.reject(y)}for(d=0,f=c.length;d<f;)h=h.then(c[d++],c[d++]);return h}getUri(e){e=Fo(this.defaults,e);const n=iA(e.baseURL,e.url,e.allowAbsoluteUrls);return Zb(n,e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(e){Eo.prototype[e]=function(n,r){return this.request(Fo(r||{},{method:e,url:n,data:(r||{}).data}))}});$.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Fo(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Eo.prototype[e]=n(),Eo.prototype[e+"Form"]=n(!0)});let j6=class uA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new gl(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uA(function(i){e=i}),cancel:e}}};function F6(t){return function(n){return t.apply(null,n)}}function V6(t){return $.isObject(t)&&t.isAxiosError===!0}const Zm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zm).forEach(([t,e])=>{Zm[e]=t});function cA(t){const e=new Eo(t),n=Bb(Eo.prototype.request,e);return $.extend(n,Eo.prototype,e,{allOwnKeys:!0}),$.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return cA(Fo(t,i))},n}const xt=cA(bc);xt.Axios=Eo;xt.CanceledError=gl;xt.CancelToken=j6;xt.isCancel=nA;xt.VERSION=lA;xt.toFormData=Kf;xt.AxiosError=be;xt.Cancel=xt.CanceledError;xt.all=function(e){return Promise.all(e)};xt.spread=F6;xt.isAxiosError=V6;xt.mergeConfig=Fo;xt.AxiosHeaders=Gn;xt.formToJSON=t=>tA($.isHTMLForm(t)?new FormData(t):t);xt.getAdapter=aA.getAdapter;xt.HttpStatusCode=Zm;xt.default=xt;const{Axios:b$,AxiosError:A$,CanceledError:P$,isCancel:k$,CancelToken:N$,VERSION:O$,all:D$,Cancel:L$,isAxiosError:M$,spread:j$,toFormData:F$,AxiosHeaders:V$,HttpStatusCode:U$,formToJSON:B$,getAdapter:$$,mergeConfig:z$}=xt,hA="http://localhost:8000",nS=new Map,U6=5*60*1e3;async function B6(){try{return(await xt.get(`${hA}/health`,{timeout:2e3})).data.status==="healthy"}catch{return console.warn("Local AI server not available, falling back to API"),!1}}async function $6(t,e,n){const r={riddle:`Generate a ${e} difficulty riddle. Return a JSON object with:
    {
      "q": "the riddle text",
      "a": "the answer",
      "hint": "a helpful hint",
      "difficulty": "${e}",
      "category": "riddle type (logic, wordplay, math, etc.)"
    }`,trivia:`Generate a ${e} difficulty trivia question${n?` about ${n}`:""}. Return a JSON object with:
    {
      "grade": 5,
      "question": "the question",
      "choices": ["option A", "option B", "option C", "option D"],
      "answerIdx": 0,
      "category": "${n||"general"}"
    }`,emoji:`Generate an emoji puzzle where players guess the phrase/movie/book from emojis. Return a JSON object with:
    {
      "emojis": "🎬🦁👑",
      "answer": "THE LION KING",
      "hint": "Disney animated movie",
      "difficulty": "${e}",
      "category": "movie/book/phrase/saying"
    }`,word:`Generate a word guessing game. Return a JSON object with:
    {
      "word": "BUTTERFLY",
      "category": "Animals",
      "difficulty": "${e}",
      "hint": "Colorful insect that transforms from a caterpillar"
    }`},i=await xt.post(`${hA}/generate`,{prompt:r[t],max_tokens:500,temperature:.8,game_type:t,use_local:!0});return{...i.data,source:"local",model_used:i.data.model_used,performance:{inference_time_ms:i.data.inference_time_ms,tokens_per_second:i.data.tokens_per_second}}}async function rS(t,e,n){throw new Error("DeepSeek API key not configured")}async function z6(t="riddle",e="medium",n=null){const r=`${t}-${e}-${n||"default"}`,i=nS.get(r);if(i&&Date.now()-i.timestamp<U6)return{...i.data,cached:!0};try{let s;if(await B6())try{s=await $6(t,e,n),console.log("Generated content using local AI server")}catch(a){console.warn("Local AI generation failed:",a.message),s=await rS(t,e,n),console.log("Fallback to API successful")}else s=await rS(t,e,n),console.log("Generated content using DeepSeek API");if(typeof s.text=="string")try{const a=s.text.match(/\{[\s\S]*\}/);if(a){const l=JSON.parse(a[0]);s={...s,...l}}}catch{console.warn("Failed to parse response text")}return nS.set(r,{data:s,timestamp:Date.now()}),s}catch(s){console.error("AI Generation Error:",s);const o={riddle:{q:"I speak without a mouth and hear without ears. I have no body, but come alive with wind. What am I?",a:"An echo",hint:"Think about sound",difficulty:e,category:"logic",source:"fallback"},trivia:{grade:5,question:"What is the capital of France?",choices:["London","Berlin","Paris","Madrid"],answerIdx:2,category:"geography",source:"fallback"},emoji:{emojis:"🍎📱",answer:"APPLE",hint:"Technology company",difficulty:e,category:"brand",source:"fallback"},word:{word:"PUZZLE",category:"Games",difficulty:e,hint:"What you're solving right now",source:"fallback"}};return o[t]||o.riddle}}function W6(){const{user:t}=Yi(),[e,n]=N.useState(Bh),[r,i]=N.useState(0),[s,o]=N.useState(!1),[a,l]=N.useState(!1),[c,h]=N.useState(0),[d,f]=N.useState(0),[_,y]=N.useState(0),[w,C]=N.useState(!1),[S,E]=N.useState("All"),[R,M]=N.useState("All"),V=e[r],H=e.filter(re=>(S==="All"||re.difficulty===S)&&(R==="All"||re.category===R)),v=(re,Ae)=>{const Q={Easy:10,Medium:20,Hard:30}[re==null?void 0:re.difficulty]||10,le=Ae*5;return Math.max(1,Q-le)},T=async()=>{C(!0);try{const re=await z6("riddle");re&&(n(Ae=>[...Ae,re]),i(e.length))}catch(re){console.error("Failed to generate riddle:",re)}finally{C(!1)}},x=()=>{const re=v(V,_);o(!1),l(!1),h(Ae=>Ae+1),f(Ae=>Ae+re),y(0),P()},b=()=>{o(!1),l(!1),h(0),y(0),P()},P=()=>{const re=H,Ae=(re.findIndex(he=>he===V)+1)%re.length,Q=re[Ae],le=e.findIndex(he=>he===Q);i(le)},O=()=>{l(!0),y(re=>re+1)},A=async()=>{!t||d===0||(await fl({uid:t.uid,displayName:t.displayName||t.email,gameKey:"ai-riddles",score:d}),alert(`Score of ${d} submitted!`),f(0),h(0))},pe=["All",...new Set(e.map(re=>re.category).filter(Boolean))],je=["All",...new Set(e.map(re=>re.difficulty).filter(Boolean))];return V?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50",children:m.jsxs("div",{className:"mx-auto max-w-4xl p-4 space-y-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"🤖 AI-Powered Riddles"}),m.jsx($f,{gameKey:"ai-riddles"}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-center",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-green-600",children:c}),m.jsx("span",{className:"text-sm text-gray-600",children:"Current Streak"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-blue-600",children:d}),m.jsx("span",{className:"text-sm text-gray-600",children:"Session Score"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-purple-600",children:e.length}),m.jsx("span",{className:"text-sm text-gray-600",children:"Total Riddles"})]})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsx("select",{className:"border border-gray-300 rounded-lg p-2 bg-white focus:ring-2 focus:ring-purple-500",value:S,onChange:re=>E(re.target.value),children:je.map(re=>m.jsx("option",{value:re,children:re},re))}),m.jsx("select",{className:"border border-gray-300 rounded-lg p-2 bg-white focus:ring-2 focus:ring-purple-500",value:R,onChange:re=>M(re.target.value),children:pe.map(re=>m.jsx("option",{value:re,children:re},re))})]}),m.jsx("button",{className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:T,disabled:w,children:w?"🤖 Generating...":"🤖 Generate New Riddle"})]})}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[V.difficulty&&m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${V.difficulty==="Easy"?"bg-green-100 text-green-700":V.difficulty==="Medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:V.difficulty}),V.category&&m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:V.category})]}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Points: ",v(V,_)]})]}),m.jsx("div",{className:"text-xl leading-relaxed text-gray-800 bg-gray-50 p-4 rounded-lg",children:V.q}),a&&V.hint&&m.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded transition-all duration-300",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-yellow-600 text-sm font-medium",children:"💡 Hint:"})}),m.jsx("p",{className:"text-yellow-800 mt-1",children:V.hint})]}),s&&m.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded transition-all duration-300",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-green-600 text-sm font-medium",children:"✅ Answer:"})}),m.jsx("p",{className:"text-green-800 mt-1 font-semibold",children:V.a})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[!a&&V.hint&&m.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:O,children:"💡 Get Hint (-5 pts)"}),m.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:()=>o(re=>!re),children:s?"🙈 Hide Answer":"👁️ Reveal Answer"}),m.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:x,children:"✅ I Solved It!"}),m.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:b,children:"⏭️ Skip"})]}),d>0&&m.jsxs("button",{className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 mt-4",onClick:A,children:["🏆 Submit Score (",d," points)"]})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsx(zf,{gameKey:"ai-riddles"})})]})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-lg mb-4",children:"Loading riddles..."}),m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto"})]})})}const rg=[{grade:3,question:"How many continents are there?",choices:["5","6","7","8"],answerIdx:2},{grade:4,question:"What gas do plants breathe in?",choices:["Oxygen","Carbon Dioxide","Nitrogen","Helium"],answerIdx:1},{grade:5,question:"What is the largest ocean?",choices:["Indian","Atlantic","Arctic","Pacific"],answerIdx:3}];function H6(){const{user:t}=Yi(),[e,n]=N.useState(0),[r,i]=N.useState(0),[s,o]=N.useState(null),a=rg[e],l=d=>{o(d),d===a.answerIdx&&i(f=>f+1),setTimeout(()=>{o(null),n(f=>f+1)},700)},c=e>=rg.length,h=async()=>{t&&(await fl({uid:t.uid,displayName:t.displayName||t.email,gameKey:"trivia-5th",score:r}),alert("Score submitted!"))};return c?m.jsxs("div",{className:"mx-auto max-w-xl p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Trivia – Done!"}),m.jsxs("p",{children:["Your score: ",r," / ",rg.length]}),m.jsx("button",{className:"mt-3 border rounded px-3 py-2",onClick:h,children:"Submit score"})]}):m.jsxs("div",{className:"mx-auto max-w-xl p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Are You Smarter Than a 5th Grader?"}),m.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[m.jsxs("p",{className:"text-sm text-gray-500",children:["Grade ",a.grade]}),m.jsx("h2",{className:"text-lg font-semibold mb-2",children:a.question}),m.jsx("div",{className:"grid gap-2",children:a.choices.map((d,f)=>m.jsx("button",{className:`border rounded px-3 py-2 ${s!==null&&f===a.answerIdx?"bg-green-100":""}`,onClick:()=>l(f),disabled:s!==null,children:d},f))}),m.jsxs("p",{className:"mt-3",children:["Score: ",r," / ",e+1]})]})]})}function q6(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function K6(t,e,n,r,i){const s={move:t,variations:i};return e&&(s.suffix=e),n&&(s.nag=n),r!==null&&(s.comment=r),s}function G6(...t){const[e,...n]=t;let r=e;for(const i of n)i!==null&&(r.variations=[i,...i.variations],i.variations=[],r=i);return e}function Q6(t,e){if(e.marker&&e.marker.comment){let n=e.root;for(;;){const r=n.variations[0];if(!r){n.comment=e.marker.comment;break}n=r}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function Y6(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function Xa(t,e,n,r){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,Xa.prototype),i.expected=e,i.found=n,i.location=r,i.name="SyntaxError",i}Y6(Xa,Error);function ig(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}Xa.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){n=t[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(n){var a=this.location.end,l=ig("",s.line.toString().length," "),c=n[i.line-1],h=i.line===a.line?a.column:c.length+1,d=h-i.column||1;e+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+c+`
`+l+" | "+ig("",i.column-1," ")+ig("",d,"^")}else e+=`
 at `+o}return e};Xa.buildMessage=function(t,e){var n={literal:function(c){return'"'+i(c.text)+'"'},class:function(c){var h=c.parts.map(function(d){return Array.isArray(d)?s(d[0])+"-"+s(d[1]):s(d)});return"["+(c.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function i(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function o(c){return n[c.type](c)}function a(c){var h=c.map(o),d,f;if(h.sort(),h.length>0){for(d=1,f=1;d<h.length;d++)h[d-1]!==h[d]&&(h[f]=h[d],f++);h.length=f}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function l(c){return c?'"'+i(c)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};function X6(t,e){e=e!==void 0?e:{};var n={},r=e.grammarSource,i={pgn:Te},s=Te,o="[",a='"',l="]",c=".",h="O-O-O",d="O-O",f="0-0-0",_="0-0",y="$",w="{",C="}",S=";",E="(",R=")",M="1-0",V="0-1",H="1/2-1/2",v="*",T=/^[a-zA-Z]/,x=/^[^"]/,b=/^[0-9]/,P=/^[.]/,O=/^[a-zA-Z1-8\-=]/,A=/^[+#]/,pe=/^[!?]/,je=/^[^}]/,re=/^[^\r\n]/,Ae=/^[ \t\r\n]/,Q=te("tag pair"),le=G("[",!1),he=G('"',!1),Ee=G("]",!1),ye=te("tag name"),Pe=Z([["a","z"],["A","Z"]],!1,!1),Ze=te("tag value"),Ke=Z(['"'],!0,!1),at=te("move number"),fe=Z([["0","9"]],!1,!1),$t=G(".",!1),Qn=Z(["."],!1,!1),Ln=te("standard algebraic notation"),wt=G("O-O-O",!1),Ve=G("O-O",!1),Jt=G("0-0-0",!1),Gr=G("0-0",!1),cr=Z([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Mt=Z(["+","#"],!1,!1),Xs=te("suffix annotation"),Qr=Z(["!","?"],!1,!1),fi=te("NAG"),Yr=G("$",!1),Xi=te("brace comment"),pi=G("{",!1),Cr=Z(["}"],!0,!1),Zt=G("}",!1),jt=te("rest of line comment"),lt=G(";",!1),rt=Z(["\r",`
`],!0,!1),en=te("variation"),dn=G("(",!1),gi=G(")",!1),Yn=te("game termination marker"),Mn=G("1-0",!1),zt=G("0-1",!1),hr=G("1/2-1/2",!1),Xr=G("*",!1),Ji=te("whitespace"),Zi=Z([" ","	","\r",`
`],!1,!1),Jr=function(j,B){return Q6(j,B)},Xn=function(j){return Object.fromEntries(j)},mi=function(j,B){return[j,B]},Jn=function(j,B){return{root:j,marker:B}},Rr=function(j,B){return G6(q6(j),...B.flat())},yi=function(j,B,z,de,me){return K6(j,B,z,de,me)},fn=function(j){return j},es=function(j){return j.replace(/[\r\n]+/g," ")},jn=function(j){return j.trim()},Zn=function(j){return j},Fn=function(j,B){return{result:j,comment:B}},U=e.peg$currPos|0,st=[{line:1,column:1}],D=U,L=e.peg$maxFailExpected||[],k=e.peg$silentFails|0,q;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=i[e.startRule]}function G(j,B){return{type:"literal",text:j,ignoreCase:B}}function Z(j,B,z){return{type:"class",parts:j,inverted:B,ignoreCase:z}}function ue(){return{type:"end"}}function te(j){return{type:"other",description:j}}function se(j){var B=st[j],z;if(B)return B;if(j>=st.length)z=st.length-1;else for(z=j;!st[--z];);for(B=st[z],B={line:B.line,column:B.column};z<j;)t.charCodeAt(z)===10?(B.line++,B.column=1):B.column++,z++;return st[j]=B,B}function ie(j,B,z){var de=se(j),me=se(B),Ge={source:r,start:{offset:j,line:de.line,column:de.column},end:{offset:B,line:me.line,column:me.column}};return Ge}function K(j){U<D||(U>D&&(D=U,L=[]),L.push(j))}function _e(j,B,z){return new Xa(Xa.buildMessage(j,B),j,B,z)}function Te(){var j,B,z;return j=U,B=It(),z=xr(),j=Jr(B,z),j}function It(){var j,B,z;for(j=U,B=[],z=We();z!==n;)B.push(z),z=We();return z=mt(),j=Xn(B),j}function We(){var j,B,z,de,me,Ge,ei;return k++,j=U,mt(),t.charCodeAt(U)===91?(B=o,U++):(B=n,k===0&&K(le)),B!==n?(mt(),z=ke(),z!==n?(mt(),t.charCodeAt(U)===34?(de=a,U++):(de=n,k===0&&K(he)),de!==n?(me=et(),t.charCodeAt(U)===34?(Ge=a,U++):(Ge=n,k===0&&K(he)),Ge!==n?(mt(),t.charCodeAt(U)===93?(ei=l,U++):(ei=n,k===0&&K(Ee)),ei!==n?j=mi(z,me):(U=j,j=n)):(U=j,j=n)):(U=j,j=n)):(U=j,j=n)):(U=j,j=n),k--,j===n&&k===0&&K(Q),j}function ke(){var j,B,z;if(k++,j=U,B=[],z=t.charAt(U),T.test(z)?U++:(z=n,k===0&&K(Pe)),z!==n)for(;z!==n;)B.push(z),z=t.charAt(U),T.test(z)?U++:(z=n,k===0&&K(Pe));else B=n;return B!==n?j=t.substring(j,U):j=B,k--,j===n&&(B=n,k===0&&K(ye)),j}function et(){var j,B,z;for(k++,j=U,B=[],z=t.charAt(U),x.test(z)?U++:(z=n,k===0&&K(Ke));z!==n;)B.push(z),z=t.charAt(U),x.test(z)?U++:(z=n,k===0&&K(Ke));return j=t.substring(j,U),k--,B=n,k===0&&K(Ze),j}function xr(){var j,B,z;return j=U,B=br(),mt(),z=Pr(),z===n&&(z=null),mt(),j=Jn(B,z),j}function br(){var j,B,z,de;for(j=U,B=gn(),B===n&&(B=null),z=[],de=Vn();de!==n;)z.push(de),de=Vn();return j=Rr(B,z),j}function Vn(){var j,B,z,de,me,Ge,ei,Js;if(j=U,mt(),tn(),mt(),B=ts(),B!==n){for(z=Ar(),z===n&&(z=null),de=[],me=pn();me!==n;)de.push(me),me=pn();for(me=mt(),Ge=gn(),Ge===n&&(Ge=null),ei=[],Js=tt();Js!==n;)ei.push(Js),Js=tt();j=yi(B,z,de,Ge,ei)}else U=j,j=n;return j}function tn(){var j,B,z,de,me,Ge;for(k++,j=U,B=[],z=t.charAt(U),b.test(z)?U++:(z=n,k===0&&K(fe));z!==n;)B.push(z),z=t.charAt(U),b.test(z)?U++:(z=n,k===0&&K(fe));if(t.charCodeAt(U)===46?(z=c,U++):(z=n,k===0&&K($t)),z!==n){for(de=mt(),me=[],Ge=t.charAt(U),P.test(Ge)?U++:(Ge=n,k===0&&K(Qn));Ge!==n;)me.push(Ge),Ge=t.charAt(U),P.test(Ge)?U++:(Ge=n,k===0&&K(Qn));B=[B,z,de,me],j=B}else U=j,j=n;return k--,j===n&&(B=n,k===0&&K(at)),j}function ts(){var j,B,z,de,me,Ge;if(k++,j=U,B=U,t.substr(U,5)===h?(z=h,U+=5):(z=n,k===0&&K(wt)),z===n&&(t.substr(U,3)===d?(z=d,U+=3):(z=n,k===0&&K(Ve)),z===n&&(t.substr(U,5)===f?(z=f,U+=5):(z=n,k===0&&K(Jt)),z===n&&(t.substr(U,3)===_?(z=_,U+=3):(z=n,k===0&&K(Gr)),z===n))))if(z=U,de=t.charAt(U),T.test(de)?U++:(de=n,k===0&&K(Pe)),de!==n){if(me=[],Ge=t.charAt(U),O.test(Ge)?U++:(Ge=n,k===0&&K(cr)),Ge!==n)for(;Ge!==n;)me.push(Ge),Ge=t.charAt(U),O.test(Ge)?U++:(Ge=n,k===0&&K(cr));else me=n;me!==n?(de=[de,me],z=de):(U=z,z=n)}else U=z,z=n;return z!==n?(de=t.charAt(U),A.test(de)?U++:(de=n,k===0&&K(Mt)),de===n&&(de=null),z=[z,de],B=z):(U=B,B=n),B!==n?j=t.substring(j,U):j=B,k--,j===n&&(B=n,k===0&&K(Ln)),j}function Ar(){var j,B,z;for(k++,j=U,B=[],z=t.charAt(U),pe.test(z)?U++:(z=n,k===0&&K(Qr));z!==n;)B.push(z),B.length>=2?z=n:(z=t.charAt(U),pe.test(z)?U++:(z=n,k===0&&K(Qr)));return B.length<1?(U=j,j=n):j=B,k--,j===n&&(B=n,k===0&&K(Xs)),j}function pn(){var j,B,z,de,me;if(k++,j=U,mt(),t.charCodeAt(U)===36?(B=y,U++):(B=n,k===0&&K(Yr)),B!==n){if(z=U,de=[],me=t.charAt(U),b.test(me)?U++:(me=n,k===0&&K(fe)),me!==n)for(;me!==n;)de.push(me),me=t.charAt(U),b.test(me)?U++:(me=n,k===0&&K(fe));else de=n;de!==n?z=t.substring(z,U):z=de,z!==n?j=fn(z):(U=j,j=n)}else U=j,j=n;return k--,j===n&&k===0&&K(fi),j}function gn(){var j;return j=Zr(),j===n&&(j=Oe()),j}function Zr(){var j,B,z,de,me;if(k++,j=U,t.charCodeAt(U)===123?(B=w,U++):(B=n,k===0&&K(pi)),B!==n){for(z=U,de=[],me=t.charAt(U),je.test(me)?U++:(me=n,k===0&&K(Cr));me!==n;)de.push(me),me=t.charAt(U),je.test(me)?U++:(me=n,k===0&&K(Cr));z=t.substring(z,U),t.charCodeAt(U)===125?(de=C,U++):(de=n,k===0&&K(Zt)),de!==n?j=es(z):(U=j,j=n)}else U=j,j=n;return k--,j===n&&(B=n,k===0&&K(Xi)),j}function Oe(){var j,B,z,de,me;if(k++,j=U,t.charCodeAt(U)===59?(B=S,U++):(B=n,k===0&&K(lt)),B!==n){for(z=U,de=[],me=t.charAt(U),re.test(me)?U++:(me=n,k===0&&K(rt));me!==n;)de.push(me),me=t.charAt(U),re.test(me)?U++:(me=n,k===0&&K(rt));z=t.substring(z,U),j=jn(z)}else U=j,j=n;return k--,j===n&&(B=n,k===0&&K(jt)),j}function tt(){var j,B,z,de;return k++,j=U,mt(),t.charCodeAt(U)===40?(B=E,U++):(B=n,k===0&&K(dn)),B!==n?(z=br(),z!==n?(mt(),t.charCodeAt(U)===41?(de=R,U++):(de=n,k===0&&K(gi)),de!==n?j=Zn(z):(U=j,j=n)):(U=j,j=n)):(U=j,j=n),k--,j===n&&k===0&&K(en),j}function Pr(){var j,B,z;return k++,j=U,t.substr(U,3)===M?(B=M,U+=3):(B=n,k===0&&K(Mn)),B===n&&(t.substr(U,3)===V?(B=V,U+=3):(B=n,k===0&&K(zt)),B===n&&(t.substr(U,7)===H?(B=H,U+=7):(B=n,k===0&&K(hr)),B===n&&(t.charCodeAt(U)===42?(B=v,U++):(B=n,k===0&&K(Xr))))),B!==n?(mt(),z=gn(),z===n&&(z=null),j=Fn(B,z)):(U=j,j=n),k--,j===n&&(B=n,k===0&&K(Yn)),j}function mt(){var j,B;for(k++,j=[],B=t.charAt(U),Ae.test(B)?U++:(B=n,k===0&&K(Zi));B!==n;)j.push(B),B=t.charAt(U),Ae.test(B)?U++:(B=n,k===0&&K(Zi));return k--,B=n,k===0&&K(Ji),j}if(q=s(),e.peg$library)return{peg$result:q,peg$currPos:U,peg$FAILED:n,peg$maxFailExpected:L,peg$maxFailPos:D};if(q!==n&&U===t.length)return q;throw q!==n&&U<t.length&&K(ue()),_e(L,D<t.length?t.charAt(D):null,D<t.length?ie(D,D+1):ie(D,D))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Hh=0xffffffffffffffffn;function sg(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function iS(t,e){return t*e&Hh}function J6(t){return function(){let e=BigInt(t&Hh),n=BigInt(t>>64n&Hh);const r=iS(sg(iS(e,5n),7n),9n);return n^=e,e=(sg(e,24n)^n^n<<16n)&Hh,n=sg(n,37n),t=n<<64n|e,r}}const Qf=J6(0xa187eb39cdcaed8f31c4b365b102e01en),Z6=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Qf()))),e9=Array.from({length:8},()=>Qf()),t9=Array.from({length:16},()=>Qf()),og=Qf(),En="w",tr="b",Pt="p",ey="n",qh="b",Zl="r",hs="q",Ft="k",ag="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class fh{constructor(e,n){yt(this,"color");yt(this,"from");yt(this,"to");yt(this,"piece");yt(this,"captured");yt(this,"promotion");yt(this,"flags");yt(this,"san");yt(this,"lan");yt(this,"before");yt(this,"after");const{color:r,piece:i,from:s,to:o,flags:a,captured:l,promotion:c}=n,h=Wt(s),d=Wt(o);this.color=r,this.piece=i,this.from=h,this.to=d,this.san=e._moveToSan(n,e._moves({legal:!0})),this.lan=h+d,this.before=e.fen(),e._makeMove(n),this.after=e.fen(),e._undoMove(),this.flags="";for(const f in Se)Se[f]&a&&(this.flags+=to[f]);l&&(this.captured=l),c&&(this.promotion=c,this.lan+=c)}isCapture(){return this.flags.indexOf(to.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(to.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(to.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(to.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(to.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(to.BIG_PAWN)>-1}}const rn=-1,to={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Se={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},ty={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},n9={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},r9={...ty,...n9},ve={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},lg={b:[16,32,17,15],w:[-16,-32,-17,-15]},sS={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i9=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],s9=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],o9={p:1,n:2,b:4,r:8,q:16,k:32},a9="pnbrqkPNBRQK",oS=[ey,qh,Zl,hs],l9=7,u9=6,c9=1,h9=0,ph={[Ft]:Se.KSIDE_CASTLE,[hs]:Se.QSIDE_CASTLE},os={w:[{square:ve.a1,flag:Se.QSIDE_CASTLE},{square:ve.h1,flag:Se.KSIDE_CASTLE}],b:[{square:ve.a8,flag:Se.QSIDE_CASTLE},{square:ve.h8,flag:Se.KSIDE_CASTLE}]},d9={b:c9,w:u9},ug="--";function To(t){return t>>4}function tc(t){return t&15}function dA(t){return"0123456789".indexOf(t)!==-1}function Wt(t){const e=tc(t),n=To(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Ul(t){return t===En?tr:En}function f9(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let a=0,l=!1;for(let c=0;c<i[o].length;c++)if(dA(i[o][c])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(i[o][c],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of s){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function p9(t,e){const n=t.from,r=t.to,i=t.piece;let s=0,o=0,a=0;for(let l=0,c=e.length;l<c;l++){const h=e[l].from,d=e[l].to,f=e[l].piece;i===f&&n!==h&&r===d&&(s++,To(n)===To(h)&&o++,tc(n)===tc(h)&&a++)}return s>0?o>0&&a>0?Wt(n):a>0?Wt(n).charAt(1):Wt(n).charAt(0):""}function as(t,e,n,r,i,s=void 0,o=Se.NORMAL){const a=To(r);if(i===Pt&&(a===l9||a===h9))for(let l=0;l<oS.length;l++){const c=oS[l];t.push({color:e,from:n,to:r,piece:i,captured:s,promotion:c,flags:o|Se.PROMOTION})}else t.push({color:e,from:n,to:r,piece:i,captured:s,flags:o})}function aS(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:Pt:(e=e.toLowerCase(),e==="o"?Ft:e)}function cg(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class g9{constructor(e=ag,{skipValidation:n=!1}={}){yt(this,"_board",new Array(128));yt(this,"_turn",En);yt(this,"_header",{});yt(this,"_kings",{w:rn,b:rn});yt(this,"_epSquare",-1);yt(this,"_halfMoves",0);yt(this,"_moveNumber",0);yt(this,"_history",[]);yt(this,"_comments",{});yt(this,"_castling",{w:0,b:0});yt(this,"_hash",0n);yt(this,"_positionCount",new Map);this.load(e,{skipValidation:n})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:rn,b:rn},this._turn=En,this._castling={w:0,b:0},this._epSquare=rn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...r9},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const a=["-","-","0","1"];e=i.concat(a.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:a,error:l}=f9(e);if(!a)throw new Error(l)}const s=i[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<s.length;a++){const l=s.charAt(a);if(l==="/")o+=8;else if(dA(l))o+=parseInt(l,10);else{const c=l<"a"?En:tr;this._put({type:l.toLowerCase(),color:c},Wt(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=Se.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=Se.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=Se.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=Se.QSIDE_CASTLE),this._epSquare=i[3]==="-"?rn:ve[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){var o,a;let n=0,r="";for(let l=ve.a8;l<=ve.h1;l++){if(this._board[l]){n>0&&(r+=n,n=0);const{color:c,type:h}=this._board[l];r+=c===En?h.toUpperCase():h.toLowerCase()}else n++;l+1&136&&(n>0&&(r+=n),l!==ve.h1&&(r+="/"),n=0,l+=8)}let i="";this._castling[En]&Se.KSIDE_CASTLE&&(i+="K"),this._castling[En]&Se.QSIDE_CASTLE&&(i+="Q"),this._castling[tr]&Se.KSIDE_CASTLE&&(i+="k"),this._castling[tr]&Se.QSIDE_CASTLE&&(i+="q"),i=i||"-";let s="-";if(this._epSquare!==rn)if(e)s=Wt(this._epSquare);else{const l=this._epSquare+(this._turn===En?16:-16),c=[l+1,l-1];for(const h of c){if(h&136)continue;const d=this._turn;if(((o=this._board[h])==null?void 0:o.color)===d&&((a=this._board[h])==null?void 0:a.type)===Pt){this._makeMove({color:d,from:h,to:this._epSquare,piece:Pt,captured:Pt,flags:Se.EP_CAPTURE});const f=!this._isKingAttacked(d);if(this._undoMove(),f){s=Wt(this._epSquare);break}}}}return[r,this._turn,i,s,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:n,type:r}=this._board[e],i={w:0,b:1}[n],s={p:0,n:1,b:2,r:3,q:4,k:5}[r];return Z6[i][s][e]}_epKey(){return this._epSquare===rn?0n:e9[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return t9[e]}_computeHash(){let e=0n;for(let n=ve.a8;n<=ve.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(e^=this._pieceKey(n))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=og),e}_updateSetup(e){this._history.length>0||(e!==ag?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(ag)}get(e){return this._board[ve[e]]}findPiece(e){var r;const n=[];for(let i=ve.a8;i<=ve.h1;i++){if(i&136){i+=7;continue}!this._board[i]||((r=this._board[i])==null?void 0:r.color)!==e.color||this._board[i].color===e.color&&this._board[i].type===e.type&&n.push(Wt(i))}return n}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,n){this._hash^=this._pieceKey(e),this._board[e]=n,this._hash^=this._pieceKey(e)}_put({type:e,color:n},r){if(a9.indexOf(e.toLowerCase())===-1||!(r in ve))return!1;const i=ve[r];if(e==Ft&&!(this._kings[n]==rn||this._kings[n]==i))return!1;const s=this._board[i];return s&&s.type===Ft&&(this._kings[s.color]=rn),this._set(i,{type:e,color:n}),e===Ft&&(this._kings[n]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const n=this.get(e);return this._clear(ve[e]),n&&n.type===Ft&&(this._kings[n.color]=rn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,i,s,o,a,l,c,h,d,f,_,y;this._hash^=this._castlingKey();const e=((r=this._board[ve.e1])==null?void 0:r.type)===Ft&&((i=this._board[ve.e1])==null?void 0:i.color)===En,n=((s=this._board[ve.e8])==null?void 0:s.type)===Ft&&((o=this._board[ve.e8])==null?void 0:o.color)===tr;(!e||((a=this._board[ve.a1])==null?void 0:a.type)!==Zl||((l=this._board[ve.a1])==null?void 0:l.color)!==En)&&(this._castling.w&=-65),(!e||((c=this._board[ve.h1])==null?void 0:c.type)!==Zl||((h=this._board[ve.h1])==null?void 0:h.color)!==En)&&(this._castling.w&=-33),(!n||((d=this._board[ve.a8])==null?void 0:d.type)!==Zl||((f=this._board[ve.a8])==null?void 0:f.color)!==tr)&&(this._castling.b&=-65),(!n||((_=this._board[ve.h8])==null?void 0:_.type)!==Zl||((y=this._board[ve.h8])==null?void 0:y.color)!==tr)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var s,o;if(this._epSquare===rn)return;const e=this._epSquare+(this._turn===En?-16:16),n=this._epSquare+(this._turn===En?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((s=this._board[n])==null?void 0:s.color)!==Ul(this._turn)||((o=this._board[n])==null?void 0:o.type)!==Pt){this._hash^=this._epKey(),this._epSquare=rn;return}const i=a=>{var l,c;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((c=this._board[a])==null?void 0:c.type)===Pt};r.some(i)||(this._hash^=this._epKey(),this._epSquare=rn)}_attacked(e,n,r){const i=[];for(let s=ve.a8;s<=ve.h1;s++){if(s&136){s+=7;continue}if(this._board[s]===void 0||this._board[s].color!==e)continue;const o=this._board[s],a=s-n;if(a===0)continue;const l=a+119;if(i9[l]&o9[o.type]){if(o.type===Pt){if(a>0&&o.color===En||a<=0&&o.color===tr)if(r)i.push(Wt(s));else return!0;continue}if(o.type==="n"||o.type==="k")if(r){i.push(Wt(s));continue}else return!0;const c=s9[l];let h=s+c,d=!1;for(;h!==n;){if(this._board[h]!=null){d=!0;break}h+=c}if(!d)if(r){i.push(Wt(s));continue}else return!0}}return r?i:!1}attackers(e,n){return n?this._attacked(n,ve[e],!0):this._attacked(this._turn,ve[e],!0)}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Ul(e),n)}hash(){return this._hash.toString(16)}isAttacked(e,n){return this._attacked(n,ve[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,i=0;for(let s=ve.a8;s<=ve.h1;s++){if(i=(i+1)%2,s&136){s+=7;continue}const o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===qh&&n.push(i),r++)}if(r===2)return!0;if(r===3&&(e[qh]===1||e[ey]===1))return!0;if(r===e[qh]+2){let s=0;const o=n.length;for(let a=0;a<o;a++)s+=n[a];if(s===0||s===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const i=this._moves({square:n,piece:r});return e?i.map(s=>new fh(this,s)):i.map(s=>this._moveToSan(s,i))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var _;const i=r?r.toLowerCase():void 0,s=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=Ul(a);let c=ve.a8,h=ve.h1,d=!1;if(i)if(i in ve)c=h=ve[i],d=!0;else return[];for(let y=c;y<=h;y++){if(y&136){y+=7;continue}if(!this._board[y]||this._board[y].color===l)continue;const{type:w}=this._board[y];let C;if(w===Pt){if(s&&s!==w)continue;C=y+lg[a][0],this._board[C]||(as(o,a,y,C,Pt),C=y+lg[a][1],d9[a]===To(y)&&!this._board[C]&&as(o,a,y,C,Pt,void 0,Se.BIG_PAWN));for(let S=2;S<4;S++)C=y+lg[a][S],!(C&136)&&(((_=this._board[C])==null?void 0:_.color)===l?as(o,a,y,C,Pt,this._board[C].type,Se.CAPTURE):C===this._epSquare&&as(o,a,y,C,Pt,Pt,Se.EP_CAPTURE))}else{if(s&&s!==w)continue;for(let S=0,E=sS[w].length;S<E;S++){const R=sS[w][S];for(C=y;C+=R,!(C&136);){if(!this._board[C])as(o,a,y,C,w);else{if(this._board[C].color===a)break;as(o,a,y,C,w,this._board[C].type,Se.CAPTURE);break}if(w===ey||w===Ft)break}}}}if((s===void 0||s===Ft)&&(!d||h===this._kings[a])){if(this._castling[a]&Se.KSIDE_CASTLE){const y=this._kings[a],w=y+2;!this._board[y+1]&&!this._board[w]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,y+1)&&!this._attacked(l,w)&&as(o,a,this._kings[a],w,Ft,void 0,Se.KSIDE_CASTLE)}if(this._castling[a]&Se.QSIDE_CASTLE){const y=this._kings[a],w=y-2;!this._board[y-1]&&!this._board[y-2]&&!this._board[y-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,y-1)&&!this._attacked(l,w)&&as(o,a,this._kings[a],w,Ft,void 0,Se.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const f=[];for(let y=0,w=o.length;y<w;y++)this._makeMove(o[y]),this._isKingAttacked(a)||f.push(o[y]),this._undoMove();return f}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(e===null)r=this._moveFromSan(ug,n);else if(typeof e=="object"){const s=this._moves();for(let o=0,a=s.length;o<a;o++)if(e.from===Wt(s[o].from)&&e.to===Wt(s[o].to)&&(!("promotion"in s[o])||e.promotion===s[o].promotion)){r=s[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&Se.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new fh(this,r);return this._makeMove(r),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,n){this._hash^=this._pieceKey(e),this._board[n]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(n)}_makeMove(e){var i,s,o,a;const n=this._turn,r=Ul(n);if(this._push(e),e.flags&Se.NULL_MOVE){n===tr&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=rn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&Se.EP_CAPTURE&&(this._turn===tr?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:n})),this._board[e.to].type===Ft){if(this._kings[n]=e.to,e.flags&Se.KSIDE_CASTLE){const l=e.to-1,c=e.to+1;this._movePiece(c,l)}else if(e.flags&Se.QSIDE_CASTLE){const l=e.to+1,c=e.to-2;this._movePiece(c,l)}this._castling[n]=0}if(this._castling[n]){for(let l=0,c=os[n].length;l<c;l++)if(e.from===os[n][l].square&&this._castling[n]&os[n][l].flag){this._castling[n]^=os[n][l].flag;break}}if(this._castling[r]){for(let l=0,c=os[r].length;l<c;l++)if(e.to===os[r][l].square&&this._castling[r]&os[r][l].flag){this._castling[r]^=os[r][l].flag;break}}if(this._hash^=this._castlingKey(),e.flags&Se.BIG_PAWN){let l;n===tr?l=e.to-16:l=e.to+16,!(e.to-1&136)&&((i=this._board[e.to-1])==null?void 0:i.type)===Pt&&((s=this._board[e.to-1])==null?void 0:s.color)===r||!(e.to+1&136)&&((o=this._board[e.to+1])==null?void 0:o.type)===Pt&&((a=this._board[e.to+1])==null?void 0:a.color)===r?(this._epSquare=l,this._hash^=this._epKey()):this._epSquare=rn}else this._epSquare=rn;e.piece===Pt?this._halfMoves=0:e.flags&(Se.CAPTURE|Se.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===tr&&this._moveNumber++,this._turn=r,this._hash^=og}undo(){const e=this._hash,n=this._undoMove();if(n){const r=new fh(this,n);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=og;const r=this._turn,i=Ul(r);if(n.flags&Se.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&Se.EP_CAPTURE){let s;r===tr?s=n.to-16:s=n.to+16,this._set(s,{type:Pt,color:i})}else this._set(n.to,{type:n.captured,color:i});if(n.flags&(Se.KSIDE_CASTLE|Se.QSIDE_CASTLE)){let s,o;n.flags&Se.KSIDE_CASTLE?(s=n.to+1,o=n.to-1):(s=n.to-2,o=n.to+1),this._movePiece(o,s)}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let i=!1;for(const f in this._header)this._header[f]&&r.push(`[${f} "${this._header[f]}"]`+e),i=!0;i&&this._history.length&&r.push(e);const s=f=>{const _=this._comments[this.fen()];if(typeof _<"u"){const y=f.length>0?" ":"";f=`${f}${y}{${_}}`}return f},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(s(""));o.length>0;){l=s(l);const f=o.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const _=`${this._moveNumber}. ...`;l=l?`${l} ${_}`:_}else f.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(l.length&&a.push(s(l)),a.push(this._header.Result||"*"),n===0)return r.join("")+a.join(" ");const c=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},h=function(f,_){for(const y of _.split(" "))if(y){if(f+y.length>n){for(;c();)f--;r.push(e),f=0}r.push(y),f+=y.length,r.push(" "),f++}return c()&&f--,f};let d=0;for(let f=0;f<a.length;f++){if(d+a[f].length>n&&a[f].includes("{")){d=h(d,a[f]);continue}d+a[f].length>n&&f!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),d=0):f!==0&&(r.push(" "),d++),r.push(a[f]),d+=a[f].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}setHeader(e,n){return this._header[e]=n??ty[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=ty[e]||null,!0):!1}getHeaders(){const e={};for(const[n,r]of Object.entries(this._header))r!==null&&(e[n]=r);return e}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const i=X6(e);this.reset();const s=i.headers;let o="";for(const c in s)c.toLowerCase()==="fen"&&(o=s[c]),this.header(c,s[c]);if(!n)o&&this.load(o,{preserveHeaders:!0});else if(s.SetUp==="1"){if(!("FEN"in s))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(s.FEN,{preserveHeaders:!0})}let a=i.root;for(;a;){if(a.move){const c=this._moveFromSan(a.move,n);if(c==null)throw new Error(`Invalid move in PGN: ${a.move}`);this._makeMove(c),this._incPositionCount()}a.comment!==void 0&&(this._comments[this.fen()]=a.comment),a=a.variations[0]}const l=i.result;l&&Object.keys(this._header).length&&this._header.Result!==l&&this.setHeader("Result",l)}_moveToSan(e,n){let r="";if(e.flags&Se.KSIDE_CASTLE)r="O-O";else if(e.flags&Se.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&Se.NULL_MOVE)return ug;if(e.piece!==Pt){const i=p9(e,n);r+=e.piece.toUpperCase()+i}e.flags&(Se.CAPTURE|Se.EP_CAPTURE)&&(e.piece===Pt&&(r+=Wt(e.from)[0]),r+="x"),r+=Wt(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){let r=cg(e);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==ug)return{color:this._turn,from:0,to:0,piece:"k",flags:Se.NULL_MOVE};let i=aS(r),s=this._moves({legal:!0,piece:i});for(let f=0,_=s.length;f<_;f++)if(r===cg(this._moveToSan(s[f],s)))return s[f];if(n)return null;let o,a,l,c,h,d=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],c=a[3],h=a[4],l.length==1&&(d=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],c=a[3],h=a[4],l.length==1&&(d=!0))),i=aS(r),s=this._moves({legal:!0,piece:o||i}),!c)return null;for(let f=0,_=s.length;f<_;f++)if(l){if((!o||o.toLowerCase()==s[f].piece)&&ve[l]==s[f].from&&ve[c]==s[f].to&&(!h||h.toLowerCase()==s[f].promotion))return s[f];if(d){const y=Wt(s[f].from);if((!o||o.toLowerCase()==s[f].piece)&&ve[c]==s[f].to&&(l==y[0]||l==y[1])&&(!h||h.toLowerCase()==s[f].promotion))return s[f]}}else if(r===cg(this._moveToSan(s[f],s)).replace("x",""))return s[f];return null}ascii(){let e=`   +------------------------+
`;for(let n=ve.a8;n<=ve.h1;n++){if(tc(n)===0&&(e+=" "+"87654321"[To(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===En?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const i=this._turn;for(let s=0,o=n.length;s<o;s++)this._makeMove(n[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let n=[];for(let r=ve.a8;r<=ve.h1;r++)this._board[r]==null?n.push(null):n.push({square:Wt(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in ve){const n=ve[e];return(To(n)+tc(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?r.push(new fh(this,i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const n=this._positionCount.get(e)??0;n===1?this._positionCount.delete(e):this._positionCount.set(e,n-1)}_pruneComments(){const e=[],n={},r=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[Ft,hs])n[i]!==void 0&&(n[i]?this._castling[e]|=ph[i]:this._castling[e]&=~ph[i]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[Ft]===void 0||n[Ft]===r[Ft])&&(n[hs]===void 0||n[hs]===r[hs])}getCastlingRights(e){return{[Ft]:(this._castling[e]&ph[Ft])!==0,[hs]:(this._castling[e]&ph[hs])!==0}}moveNumber(){return this._moveNumber}}function m9(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const nc="abcdefgh".split(""),Kh={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},y9={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},_9={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},v9=[7,6,5,4,3,2,1,0],w9=[0,1,2,3,4,5,6,7],lS={wP:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),m.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),m.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),m.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),m.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),m.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[m.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),m.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),m.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),m.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[m.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),m.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),m.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),m.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),m.jsx("circle",{cx:"6",cy:"12",r:"2"}),m.jsx("circle",{cx:"14",cy:"9",r:"2"}),m.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),m.jsx("circle",{cx:"31",cy:"9",r:"2"}),m.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),m.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),m.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),m.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),m.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),m.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),m.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),m.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),m.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[m.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),m.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),m.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),m.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[m.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),m.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),m.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),m.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),m.jsx("circle",{cx:"6",cy:"12",r:"2"}),m.jsx("circle",{cx:"14",cy:"9",r:"2"}),m.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),m.jsx("circle",{cx:"31",cy:"9",r:"2"}),m.jsx("circle",{cx:"39",cy:"12",r:"2"}),m.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),m.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[m.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),m.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),m.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),m.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:m.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[m.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),m.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),m.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),m.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),m.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function ny(t,e,n){const r=e/8,i=t==="white"?y9:_9,s=t==="white"?v9:w9,o=i[n[0]]*r+r/2,a=s[parseInt(n[1],10)-1]*r+r/2;return{x:o,y:a}}function uS(t){let e=!1;return Object.keys(Kh).forEach(n=>{t[n]!==Kh[n]&&(e=!0)}),Object.keys(t).forEach(n=>{Kh[n]!==t[n]&&(e=!0)}),e}function E9(t,e){const n={removed:{},added:{}};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n.removed[r]=t[r])}),Object.keys(e).forEach(r=>{t[r]!==e[r]&&(n.added[r]=e[r])}),n}function cS(t){return t==="start"?Kh:typeof t=="string"?T9(t):t}function T9(t){if(!S9(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),n={};let r=8;for(let i=0;i<8;i++){const s=e[i].split("");let o=0;for(let a=0;a<s.length;a++)if(s[a].search(/[1-8]/)!==-1){const l=parseInt(s[a],10);o=o+l}else{const l=nc[o]+r;n[l]=C9(s[a]),o=o+1}r=r-1}return n}function S9(t){t=t.replace(/ .+$/,""),t=I9(t);const e=t.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function I9(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function C9(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const R9=(t,e=!0,n,r)=>{const[i,s]=N.useState([]),[o,a]=N.useState([]),[l,c]=N.useState();N.useEffect(()=>{Array.isArray(t)&&(h(),s(t==null?void 0:t.filter(y=>y[0]!==y[1])))},[t]),N.useEffect(()=>{n==null||n(o)},[o]);function h(){a([]),c(void 0)}const d=(y,w)=>{e&&c([y,w,r])},f=[...o,...i];return{arrows:f,newArrow:l,clearArrows:h,drawNewArrow:d,setArrows:a,onArrowDrawEnd:(y,w)=>{if(y===w||!e)return;let C;const S=[y,w,r];f.every(([R,M])=>!(R===y&&M===w))?C=[...o,S]:C=o.filter(([R,M])=>!(R===y&&M===w)),c(void 0),a(C)}}},fA=N.createContext({}),Qi=()=>N.useContext(fA),x9=N.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:r=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:o="white",boardWidth:a,children:l,clearPremovesOnRightClick:c=!0,customArrows:h,customArrowColor:d="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:_,customDarkSquareStyle:y={backgroundColor:"#B58863"},customDropSquareStyle:w={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:C={backgroundColor:"#F0D9B5"},customPieces:S,customPremoveDarkSquareStyle:E={backgroundColor:"#A42323"},customPremoveLightSquareStyle:R={backgroundColor:"#BD2828"},customSquare:M="div",customSquareStyles:V,dropOffBoardAction:H="snapback",id:v=0,isDraggablePiece:T=()=>!0,getPositionObject:x=()=>{},onArrowsChange:b=()=>{},onDragOverSquare:P=()=>{},onMouseOutSquare:O=()=>{},onMouseOverSquare:A=()=>{},onPieceClick:pe=()=>{},onPieceDragBegin:je=()=>{},onPieceDragEnd:re=()=>{},onPieceDrop:Ae=()=>!0,onPieceDropOffBoard:Q=()=>{},onPromotionCheck:le=(wt,Ve,Jt)=>(Jt==="wP"&&wt[1]==="7"&&Ve[1]==="8"||Jt==="bP"&&wt[1]==="2"&&Ve[1]==="1")&&Math.abs(wt.charCodeAt(0)-Ve.charCodeAt(0))<=1,onPromotionPieceSelect:he=()=>!0,onSparePieceDrop:Ee=()=>!0,onSquareClick:ye=()=>{},onSquareRightClick:Pe=()=>{},position:Ze="start",promotionDialogVariant:Ke="default",promotionToSquare:at=null,showBoardNotation:fe=!0,showPromotionDialog:$t=!1,snapToCursor:Qn=!0},Ln)=>{const[wt,Ve]=N.useState(cS(Ze)),[Jt,Gr]=N.useState({removed:{},added:{}}),[cr,Mt]=N.useState(void 0),[Xs,Qr]=N.useState($t&&!s),[fi,Yr]=N.useState(null),[Xi,pi]=N.useState(at),[Cr,Zt]=N.useState([]),jt=N.useRef(Cr),[lt,rt]=N.useState(),[en,dn]=N.useState(Object.assign(Object.assign({},lS),S)),[gi,Yn]=N.useState(!1),Mn=N.useRef(),[zt,hr]=N.useState(!1),[Xr,Ji]=N.useState(null);N.useImperativeHandle(Ln,()=>({clearPremoves(L=!0){jn(L)}})),N.useEffect(()=>{dn(Object.assign(Object.assign({},lS),S))},[S]),N.useEffect(()=>{Qr($t),pi(at)},[at,$t]),N.useEffect(()=>{var L,k,q;Zn();const G=cS(Ze),Z=E9(wt,G),ue=((L=Object.keys(Z.added))===null||L===void 0?void 0:L.length)<=2?(q=(k=Object.entries(Z.added))===null||k===void 0?void 0:k[0])===null||q===void 0?void 0:q[1][0]:void 0;if(zt)Ve(G),hr(!1),i&&fn(ue),Mn.current&&clearTimeout(Mn.current);else if(gi)Ve(G),hr(!1),i&&fn(ue);else{uS(G)&&cr!==void 0?Mt(ue):uS(G)?Mt(void 0):Mt("b"),Gr(Z),hr(!0);const te=setTimeout(()=>{Ve(G),hr(!1),i&&fn(ue)},e);Mn.current=te}return Yn(!1),x(G),Xn(),()=>{clearTimeout(Mn.current)}},[Ze]);const{arrows:Zi,newArrow:Jr,clearArrows:Xn,drawNewArrow:mi,onArrowDrawEnd:Jn}=R9(h,n,b,d);function Rr(L,k,q,G){if(L===k)return;if(Xn(),i&&zt||i&&(cr===q[0]||jt.current.filter(ue=>ue.piece[0]===q[0]).length>0)){const ue=[...jt.current];ue.push({sourceSq:L,targetSq:k,piece:q}),jt.current=ue,Zt([...ue]),Zn();return}if(!i&&zt)return;const Z=Object.assign({},wt);Yn(!!G),Mt(q[0]),Ae.length?Ae(L,k,q)||(jn(),Yn(!1)):(delete Z[L],Z[k]=q,Ve(Z)),Zn(),x(Z)}function yi(L){const k=Object.assign({},wt);delete k[L],Ve(k),x(k)}function fn(L){if(jt.current.length===0)return;const k=jt.current[0];if(k.piece[0]!==void 0&&k.piece[0]!==L&&Ae.length)if(Mt(k.piece[0]),Yn(!0),Ae(k.sourceSq,k.targetSq,k.piece)){const G=[...jt.current];G.shift(),jt.current=G,Zt([...G])}else jn()}function es(L,k){if(!Ee(L,k))return;const G=Object.assign({},wt);G[k]=L,Ve(G),x(G)}function jn(L=!0){L&&Mt(void 0),jt.current=[],Zt([])}function Zn(){Yr(null),pi(null),Qr(!1)}function Fn(L){rt(L)}function U(L){if(lt){if(lt===L){rt(void 0),c&&jn(!1),Pe(L);return}}else rt(void 0)}function st(){rt(void 0)}const D={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:i,arrows:Zi,autoPromoteToQueen:s,boardOrientation:o,boardWidth:a,chessPieces:en,clearArrows:Xn,clearCurrentRightClickDown:st,currentPosition:wt,currentRightClickDown:lt,customArrowColor:d,customBoardStyle:f,customDarkSquareStyle:y,customDropSquareStyle:w,customLightSquareStyle:C,customNotationStyle:_,customPremoveDarkSquareStyle:E,customPremoveLightSquareStyle:R,customSquare:M,customSquareStyles:V,deletePieceFromSquare:yi,drawNewArrow:mi,dropOffBoardAction:H,handleSetPosition:Rr,handleSparePieceDrop:es,id:v,isDraggablePiece:T,isWaitingForAnimation:zt,lastPieceColour:cr,lastSquareDraggedOver:Xr,newArrow:Jr,onArrowDrawEnd:Jn,onDragOverSquare:P,onMouseOutSquare:O,onMouseOverSquare:A,onPieceClick:pe,onPieceDragBegin:je,onPieceDragEnd:re,onPieceDrop:Ae,onPieceDropOffBoard:Q,onPromotionCheck:le,onPromotionPieceSelect:he,onRightClickDown:Fn,onRightClickUp:U,onSparePieceDrop:Ee,onSquareClick:ye,positionDifferences:Jt,premoves:Cr,promoteFromSquare:fi,promoteToSquare:Xi,promotionDialogVariant:Ke,setLastSquareDraggedOver:Ji,setPromoteFromSquare:Yr,setPromoteToSquare:pi,setShowPromoteDialog:Qr,showBoardNotation:fe,showPromoteDialog:Xs,snapToCursor:Qn};return m.jsx(fA.Provider,Object.assign({value:D},{children:l}))});function b9({row:t,col:e}){const{boardOrientation:n,boardWidth:r,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:o}=Qi(),a=s.backgroundColor,l=i.backgroundColor,c=e===0,h=t===7,d=c&&h;function f(){return n==="white"?8-t:t+1}function _(){return n==="black"?nc[7-e]:nc[e]}function y(){return m.jsxs(m.Fragment,{children:[m.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),dS(r,o))},{children:f()})),m.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),hS(r,o))},{children:_()}))]})}function w(){return m.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?l:a}),hS(r,o))},{children:_()}))}function C(){return m.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:t%2===0?l:a}:{color:t%2===0?l:a}),dS(r,o))},{children:f()}))}return d?y():h?w():c?C():null}const hS=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),dS=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),pA=N.createContext({dragDropManager:void 0});function dr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var fS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),pS=function(){return Math.random().toString(36).substring(7).split("").join(".")},gS={INIT:"@@redux/INIT"+pS(),REPLACE:"@@redux/REPLACE"+pS()};function A9(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function gA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(dr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(dr(1));return n(gA)(t,e)}if(typeof t!="function")throw new Error(dr(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function h(){if(l)throw new Error(dr(3));return s}function d(w){if(typeof w!="function")throw new Error(dr(4));if(l)throw new Error(dr(5));var C=!0;return c(),a.push(w),function(){if(C){if(l)throw new Error(dr(6));C=!1,c();var E=a.indexOf(w);a.splice(E,1),o=null}}}function f(w){if(!A9(w))throw new Error(dr(7));if(typeof w.type>"u")throw new Error(dr(8));if(l)throw new Error(dr(9));try{l=!0,s=i(s,w)}finally{l=!1}for(var C=o=a,S=0;S<C.length;S++){var E=C[S];E()}return w}function _(w){if(typeof w!="function")throw new Error(dr(10));i=w,f({type:gS.REPLACE})}function y(){var w,C=d;return w={subscribe:function(E){if(typeof E!="object"||E===null)throw new Error(dr(11));function R(){E.next&&E.next(h())}R();var M=C(R);return{unsubscribe:M}}},w[fS]=function(){return this},w}return f({type:gS.INIT}),r={dispatch:f,subscribe:d,getState:h,replaceReducer:_},r[fS]=y,r}function xe(t,e,...n){if(P9()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function P9(){return typeof process<"u"&&!0}function k9(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function N9(t,e){return t.filter(n=>n!==e)}function mA(t){return typeof t=="object"}function O9(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function D9(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Lv="dnd-core/INIT_COORDS",Yf="dnd-core/BEGIN_DRAG",Mv="dnd-core/PUBLISH_DRAG_SOURCE",Xf="dnd-core/HOVER",Jf="dnd-core/DROP",Zf="dnd-core/END_DRAG";function mS(t,e){return{type:Lv,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const L9={type:Lv,payload:{clientOffset:null,sourceClientOffset:null}};function M9(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch(mS(s)),j9(n,a,l);const c=U9(n,a);if(c==null){t.dispatch(L9);return}let h=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");F9(o),h=o(c)}t.dispatch(mS(s,h));const f=l.getSource(c).beginDrag(a,c);if(f==null)return;V9(f),l.pinSource(c);const _=l.getSourceType(c);return{type:Yf,payload:{itemType:_,item:f,sourceId:c,clientOffset:s||null,sourceClientOffset:h||null,isSourcePublic:!!i}}}}function j9(t,e,n){xe(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){xe(n.getSource(r),"Expected sourceIds to be registered.")})}function F9(t){xe(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function V9(t){xe(mA(t),"Item must be an object.")}function U9(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function B9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){B9(t,i,n[i])})}return t}function z9(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();W9(r),K9(r).forEach((o,a)=>{const l=H9(o,a,i,r),c={type:Jf,payload:{dropResult:$9({},n,l)}};t.dispatch(c)})}}function W9(t){xe(t.isDragging(),"Cannot call drop while not dragging."),xe(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function H9(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return q9(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function q9(t){xe(typeof t>"u"||mA(t),"Drop result must either be an object or undefined.")}function K9(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function G9(t){return function(){const n=t.getMonitor(),r=t.getRegistry();Q9(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Zf}}}function Q9(t){xe(t.isDragging(),"Cannot call endDrag while not dragging.")}function ry(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function Y9(t){return function(n,{clientOffset:r}={}){X9(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return Z9(i,o,a),J9(i,s,o),eB(i,s,o),{type:Xf,payload:{targetIds:i,clientOffset:r||null}}}}function X9(t){xe(Array.isArray(t),"Expected targetIds to be an array.")}function J9(t,e,n){xe(e.isDragging(),"Cannot call hover while not dragging."),xe(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];xe(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);xe(s,"Expected targetIds to be registered.")}}function Z9(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);ry(s,n)||t.splice(r,1)}}function eB(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function tB(t){return function(){if(t.getMonitor().isDragging())return{type:Mv}}}function nB(t){return{beginDrag:M9(t),publishDragSource:tB(t),hover:Y9(t),drop:z9(t),endDrag:G9(t)}}class rB{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=nB(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function iB(t,e){return{x:t.x+e.x,y:t.y+e.y}}function yA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function sB(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:yA(iB(e,r),n)}function oB(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:yA(e,n)}const _u=[],jv=[];_u.__IS_NONE__=!0;jv.__IS_ALL__=!0;function aB(t,e){return t===_u?!1:t===jv||typeof e>"u"?!0:D9(e,t).length>0}class lB{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;xe(typeof e=="function","listener must be a function."),xe(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!aB(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){xe(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return xe(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(xe(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return ry(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(xe(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!ry(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return sB(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return oB(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const yS=typeof global<"u"?global:self,_A=yS.MutationObserver||yS.WebKitMutationObserver;function vA(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function uB(t){let e=1;const n=new _A(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const cB=typeof _A=="function"?uB:vA;class hB{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=cB(this.flush),this.requestErrorThrow=vA(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class dB{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class fB{create(e){const n=this.freeTasks,r=n.length?n.pop():new dB(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const wA=new hB,pB=new fB(wA.registerPendingError);function gB(t){wA.enqueueTask(pB.create(t))}const Fv="dnd-core/ADD_SOURCE",Vv="dnd-core/ADD_TARGET",Uv="dnd-core/REMOVE_SOURCE",ep="dnd-core/REMOVE_TARGET";function mB(t){return{type:Fv,payload:{sourceId:t}}}function yB(t){return{type:Vv,payload:{targetId:t}}}function _B(t){return{type:Uv,payload:{sourceId:t}}}function vB(t){return{type:ep,payload:{targetId:t}}}function wB(t){xe(typeof t.canDrag=="function","Expected canDrag to be a function."),xe(typeof t.beginDrag=="function","Expected beginDrag to be a function."),xe(typeof t.endDrag=="function","Expected endDrag to be a function.")}function EB(t){xe(typeof t.canDrop=="function","Expected canDrop to be a function."),xe(typeof t.hover=="function","Expected hover to be a function."),xe(typeof t.drop=="function","Expected beginDrag to be a function.")}function iy(t,e){if(e&&Array.isArray(t)){t.forEach(n=>iy(n,!1));return}xe(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var gr;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(gr||(gr={}));let TB=0;function SB(){return TB++}function IB(t){const e=SB().toString();switch(t){case gr.SOURCE:return`S${e}`;case gr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function _S(t){switch(t[0]){case"S":return gr.SOURCE;case"T":return gr.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function vS(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class CB{addSource(e,n){iy(e),wB(n);const r=this.addHandler(gr.SOURCE,e,n);return this.store.dispatch(mB(r)),r}addTarget(e,n){iy(e,!0),EB(n);const r=this.addHandler(gr.TARGET,e,n);return this.store.dispatch(yB(r)),r}containsHandler(e){return vS(this.dragSources,e)||vS(this.dropTargets,e)}getSource(e,n=!1){return xe(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return xe(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return xe(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return xe(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return _S(e)===gr.SOURCE}isTargetId(e){return _S(e)===gr.TARGET}removeSource(e){xe(this.getSource(e),"Expected an existing source."),this.store.dispatch(_B(e)),gB(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){xe(this.getTarget(e),"Expected an existing target."),this.store.dispatch(vB(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);xe(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){xe(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=IB(e);return this.types.set(i,n),e===gr.SOURCE?this.dragSources.set(i,r):e===gr.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const RB=(t,e)=>t===e;function xB(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function bB(t,e,n=RB){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function AB(t=_u,e){switch(e.type){case Xf:break;case Fv:case Vv:case ep:case Uv:return _u;case Yf:case Mv:case Zf:case Jf:default:return jv}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=O9(n,r);if(!(i.length>0||!bB(n,r)))return _u;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function PB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){PB(t,i,n[i])})}return t}const wS={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function NB(t=wS,e){const{payload:n}=e;switch(e.type){case Lv:case Yf:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Xf:return xB(t.clientOffset,n.clientOffset)?t:kB({},t,{clientOffset:n.clientOffset});case Zf:case Jf:return wS;default:return t}}function OB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){OB(t,i,n[i])})}return t}const DB={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function LB(t=DB,e){const{payload:n}=e;switch(e.type){case Yf:return ta({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Mv:return ta({},t,{isSourcePublic:!0});case Xf:return ta({},t,{targetIds:n.targetIds});case ep:return t.targetIds.indexOf(n.targetId)===-1?t:ta({},t,{targetIds:N9(t.targetIds,n.targetId)});case Jf:return ta({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Zf:return ta({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function MB(t=0,e){switch(e.type){case Fv:case Vv:return t+1;case Uv:case ep:return t-1;default:return t}}function jB(t=0){return t+1}function FB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){FB(t,i,n[i])})}return t}function UB(t={},e){return{dirtyHandlerIds:AB(t.dirtyHandlerIds,{type:e.type,payload:VB({},e.payload,{prevTargetIds:k9(t,"dragOperation.targetIds",[])})}),dragOffset:NB(t.dragOffset,e),refCount:MB(t.refCount,e),dragOperation:LB(t.dragOperation,e),stateId:jB(t.stateId)}}function BB(t,e=void 0,n={},r=!1){const i=$B(r),s=new lB(i,new CB(i)),o=new rB(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function $B(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return gA(UB,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function zB(t,e){if(t==null)return{};var n=WB(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let ES=0;const Gh=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var HB=N.memo(function(e){var{children:n}=e,r=zB(e,["children"]);const[i,s]=qB(r);return N.useEffect(()=>{if(s){const o=EA();return++ES,()=>{--ES===0&&(o[Gh]=null)}}},[]),m.jsx(pA.Provider,{value:i,children:n})});function qB(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=KB(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function KB(t,e=EA(),n,r){const i=e;return i[Gh]||(i[Gh]={dragDropManager:BB(t,e,n,r)}),i[Gh]}function EA(){return typeof global<"u"?global:window}var GB=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Vo=typeof window<"u"?N.useLayoutEffect:N.useEffect;function TA(t,e,n){const[r,i]=N.useState(()=>e(t)),s=N.useCallback(()=>{const o=e(t);GB(r,o)||(i(o),n&&n())},[r,t,n]);return Vo(s),[r,s]}function QB(t,e,n){const[r,i]=TA(t,e,n);return Vo(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function SA(t,e,n){return QB(e,t||(()=>({})),()=>n.reconnect())}function IA(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),N.useMemo(()=>typeof t=="function"?t():t,n)}function YB(t){return N.useMemo(()=>t.hooks.dragSource(),[t])}function XB(t){return N.useMemo(()=>t.hooks.dragPreview(),[t])}let hg=!1,dg=!1;class JB{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){xe(!hg,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return hg=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{hg=!1}}isDragging(){if(!this.sourceId)return!1;xe(!dg,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return dg=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{dg=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let fg=!1;class ZB{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;xe(!fg,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return fg=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{fg=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function e8(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function t8(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function sy(t,e,n,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const c=s[l];if(!a(c))return!1;const h=t[c],d=e[c];if(i=void 0,i===!1||i===void 0&&h!==d)return!1}return!0}function oy(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function n8(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function r8(t){return(e=null,n=null)=>{if(!N.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return n8(r),i8(r,n?s=>t(s,n):t)}}function CA(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=r8(r);e[n]=()=>i}}),e}function TS(t,e){typeof t=="function"?t(e):t.current=e}function i8(t,e){const n=t.ref;return xe(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?N.cloneElement(t,{ref:r=>{TS(n,r),TS(e,r)}}):N.cloneElement(t,{ref:e})}class s8{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!sy(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!sy(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=CA({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,oy(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,oy(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class o8{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!sy(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=CA({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,oy(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Go(){const{dragDropManager:t}=N.useContext(pA);return xe(t!=null,"Expected drag drop context"),t}function a8(t,e){const n=Go(),r=N.useMemo(()=>new s8(n.getBackend()),[n]);return Vo(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Vo(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function l8(){const t=Go();return N.useMemo(()=>new JB(t),[t])}class u8{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function c8(t,e,n){const r=N.useMemo(()=>new u8(t,e,n),[e,n]);return N.useEffect(()=>{r.spec=t},[t]),r}function h8(t){return N.useMemo(()=>{const e=t.type;return xe(e!=null,"spec.type must be defined"),e},[t])}function d8(t,e,n){const r=Go(),i=c8(t,e,n),s=h8(t);Vo(function(){if(s!=null){const[a,l]=t8(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function f8(t,e){const n=IA(t,e);xe(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=l8(),i=a8(n.options,n.previewOptions);return d8(n,r,i),[SA(n.collect,r,i),YB(i),XB(i)]}function p8(t){const n=Go().getMonitor(),[r,i]=TA(n,t);return N.useEffect(()=>n.subscribeToOffsetChange(i)),N.useEffect(()=>n.subscribeToStateChange(i)),r}function g8(t){return N.useMemo(()=>t.hooks.dropTarget(),[t])}function m8(t){const e=Go(),n=N.useMemo(()=>new o8(e.getBackend()),[e]);return Vo(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function y8(){const t=Go();return N.useMemo(()=>new ZB(t),[t])}function _8(t){const{accept:e}=t;return N.useMemo(()=>(xe(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class v8{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function w8(t,e){const n=N.useMemo(()=>new v8(t,e),[e]);return N.useEffect(()=>{n.spec=t},[t]),n}function E8(t,e,n){const r=Go(),i=w8(t,e),s=_8(t);Vo(function(){const[a,l]=e8(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function T8(t,e){const n=IA(t,e),r=y8(),i=m8(n.options);return E8(n,r,i),[SA(n.collect,r,i),g8(i)]}function RA(t){let e=null;return()=>(e==null&&(e=t()),e)}function S8(t,e){return t.filter(n=>n!==e)}function I8(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class C8{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=I8(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=S8(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class R8{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const xA="__NATIVE_FILE__",bA="__NATIVE_URL__",AA="__NATIVE_TEXT__",PA="__NATIVE_HTML__";var SS=Object.freeze({__proto__:null,FILE:xA,HTML:PA,TEXT:AA,URL:bA});function pg(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const ay={[xA]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[PA]:{exposeProperties:{html:(t,e)=>pg(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[bA]:{exposeProperties:{urls:(t,e)=>pg(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[AA]:{exposeProperties:{text:(t,e)=>pg(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function x8(t,e){const n=ay[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new R8(n);return r.loadDataTransfer(e),r}function gg(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(ay).filter(n=>{const r=ay[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const b8=RA(()=>/firefox/i.test(navigator.userAgent)),kA=RA(()=>!!window.safari);class IS{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,c=o.length-1,h;for(;l<=c;){h=Math.floor(.5*(l+c));const _=n[h];if(_<e)l=h+1;else if(_>e)c=h-1;else return r[h]}a=Math.max(0,c);const d=e-n[a],f=d*d;return r[a]+i[a]*d+s[a]*f+o[a]*d*f}constructor(e,n){const{length:r}=e,i=[];for(let _=0;_<r;_++)i.push(_);i.sort((_,y)=>e[_]<e[y]?-1:1);const s=[],o=[];let a,l;for(let _=0;_<r-1;_++)a=e[_+1]-e[_],l=n[_+1]-n[_],s.push(a),o.push(l/a);const c=[o[0]];for(let _=0;_<s.length-1;_++){const y=o[_],w=o[_+1];if(y*w<=0)c.push(0);else{a=s[_];const C=s[_+1],S=a+C;c.push(3*S/((S+C)/y+(S+a)/w))}}c.push(o[o.length-1]);const h=[],d=[];let f;for(let _=0;_<c.length-1;_++){f=o[_];const y=c[_],w=1/s[_],C=y+c[_+1]-f-f;h.push((f-y-C)*w),d.push(C*w*w)}this.xs=e,this.ys=n,this.c1s=c,this.c2s=h,this.c3s=d}}const A8=1;function NA(t){const e=t.nodeType===A8?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function gh(t){return{x:t.clientX,y:t.clientY}}function P8(t){var e;return t.nodeName==="IMG"&&(b8()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function k8(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return kA()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function N8(t,e,n,r,i){const s=P8(e),a=NA(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:c,offsetHeight:h}=t,{anchorX:d,anchorY:f}=r,{dragPreviewWidth:_,dragPreviewHeight:y}=k8(s,e,c,h),w=()=>{let H=new IS([0,.5,1],[l.y,l.y/h*y,l.y+y-h]).interpolate(f);return kA()&&s&&(H+=(window.devicePixelRatio-1)*y),H},C=()=>new IS([0,.5,1],[l.x,l.x/c*_,l.x+_-c]).interpolate(d),{offsetX:S,offsetY:E}=i,R=S===0||S,M=E===0||E;return{x:R?S:C(),y:M?E:w()}}let O8=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function D8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){D8(t,i,n[i])})}return t}class L8{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return CS({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return CS({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(SS).some(n=>SS[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=x8(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&NA(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=gh(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=gg(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const h=this.monitor.getSourceId(),d=this.sourceNodes.get(h),f=this.sourcePreviewNodes.get(h)||d;if(f){const{anchorX:_,anchorY:y,offsetX:w,offsetY:C}=this.getCurrentSourcePreviewNodeOptions(),R=N8(d,f,o,{anchorX:_,anchorY:y},{offsetX:w,offsetY:C});a.setDragImage(f,R.x,R.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=gg(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:gh(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=gh(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else gg(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:gh(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new O8(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new C8(this.isNodeInDocument)}}let mh;function M8(){return mh||(mh=new Image,mh.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),mh}const j8=function(e,n,r){return new L8(e,n,r)};function RS({isPremovedPiece:t=!1,piece:e,square:n,squares:r}){const{animationDuration:i,arePiecesDraggable:s,boardWidth:o,boardOrientation:a,chessPieces:l,currentPosition:c,deletePieceFromSquare:h,dropOffBoardAction:d,id:f,isDraggablePiece:_,isWaitingForAnimation:y,onPieceClick:w,onPieceDragBegin:C,onPieceDragEnd:S,onPieceDropOffBoard:E,onPromotionCheck:R,positionDifferences:M}=Qi(),[V,H]=N.useState({opacity:1,zIndex:5,touchAction:"none",cursor:s&&_({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:v,isDragging:T},x,b]=f8(()=>({type:"piece",item:()=>(C(e,n),{piece:e,square:n,id:f}),end:(O,A)=>{S(e,n),!A.didDrop()&&(d==="trash"&&h(n),E==null||E(n,e))},collect:O=>({canDrag:_({piece:e,sourceSquare:n}),isDragging:!!O.isDragging()})}),[e,n,c,f]);b(M8(),{captureDraggingState:!0}),N.useEffect(()=>{H(O=>Object.assign(Object.assign({},O),{opacity:T?0:1}))},[T]),N.useEffect(()=>{var O;const A=(O=M.removed)===null||O===void 0?void 0:O[n];if(!M.added||!A)return;const pe=Object.entries(M.added).find(([je,re])=>re===A||R(n,je,A));if(y&&A&&pe&&!t){const je=n,re=pe[0];if(je&&re){const Ae=o/8;H(Q=>Object.assign(Object.assign({},Q),{transform:`translate(${(a==="black"?-1:1)*(re.charCodeAt(0)-je.charCodeAt(0))*Ae}px, ${(a==="black"?-1:1)*(Number(je[1])-Number(re[1]))*Ae}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[M]),N.useEffect(()=>{const{sourceSq:O}=P();O&&H(A=>Object.assign(Object.assign({},A),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[c]),N.useEffect(()=>{H(O=>Object.assign(Object.assign({},O),{cursor:s&&_({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,c,s]);function P(){return{sourceSq:r[n]}}return m.jsx("div",Object.assign({ref:s&&v?x:null,onClick:()=>w(e,n),"data-piece":e,style:V},{children:typeof l[e]=="function"?l[e]({squareWidth:o/8,isDragging:T,square:n}):m.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:m.jsx("g",{children:l[e]})}))}))}function F8({square:t,squareColor:e,setSquares:n,squareHasPremove:r,children:i}){const s=N.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:l,clearArrows:c,currentPosition:h,currentRightClickDown:d,customBoardStyle:f,customDarkSquareStyle:_,customDropSquareStyle:y,customLightSquareStyle:w,customPremoveDarkSquareStyle:C,customPremoveLightSquareStyle:S,customSquare:E,customSquareStyles:R,drawNewArrow:M,handleSetPosition:V,handleSparePieceDrop:H,isWaitingForAnimation:v,lastPieceColour:T,lastSquareDraggedOver:x,onArrowDrawEnd:b,onDragOverSquare:P,onMouseOutSquare:O,onMouseOverSquare:A,onPieceDrop:pe,onPromotionCheck:je,onRightClickDown:re,onRightClickUp:Ae,onSquareClick:Q,setLastSquareDraggedOver:le,setPromoteFromSquare:he,setPromoteToSquare:Ee,setShowPromoteDialog:ye}=Qi(),[{isOver:Pe},Ze]=T8(()=>({accept:"piece",drop:Ke,collect:fe=>({isOver:!!fe.isOver()})}),[t,h,pe,v,T]);function Ke(fe){if(fe.isSpare){H(fe.piece,t);return}je(fe.square,t,fe.piece)?o?V(fe.square,t,fe.piece[0]==="w"?"wQ":"bQ"):(he(fe.square),Ee(t),ye(!0)):V(fe.square,t,fe.piece,!0)}N.useEffect(()=>{if(s.current){const{x:fe,y:$t}=s.current.getBoundingClientRect();n(Qn=>Object.assign(Object.assign({},Qn),{[t]:{x:fe,y:$t}}))}},[a,l]);const at=Object.assign(Object.assign(Object.assign(Object.assign({},V8(t,l,f)),e==="black"?_:w),r&&(e==="black"?C:S)),Pe&&y);return m.jsx("div",Object.assign({ref:Ze,style:at,"data-square-color":e,"data-square":t,onTouchMove:fe=>{var $t;const Qn=fe.touches[0],Ln=document.elementsFromPoint(Qn.clientX,Qn.clientY),wt=($t=Ln==null?void 0:Ln.find(Ve=>Ve.getAttribute("data-square")))===null||$t===void 0?void 0:$t.getAttribute("data-square");wt&&wt!==x&&(le(wt),P(wt))},onMouseOver:fe=>{fe.buttons===2&&d&&M(d,t),!(fe.relatedTarget&&fe.currentTarget.contains(fe.relatedTarget))&&A(t)},onMouseOut:fe=>{fe.relatedTarget&&fe.currentTarget.contains(fe.relatedTarget)||O(t)},onMouseDown:fe=>{fe.button===2&&re(t)},onMouseUp:fe=>{fe.button===2&&(d&&b(d,t),Ae(t))},onDragEnter:()=>P(t),onClick:()=>{const fe=h[t];Q(t,fe),c()},onContextMenu:fe=>{fe.preventDefault()}},{children:typeof E=="string"?m.jsx(E,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},bS(a)),xS),!r&&(R==null?void 0:R[t]))},{children:i})):m.jsx(E,Object.assign({ref:s,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},bS(a)),xS),!r&&(R==null?void 0:R[t]))},{children:i}))}))}const xS={display:"flex",justifyContent:"center"},bS=t=>({width:t/8,height:t/8}),V8=(t,e,n)=>n!=null&&n.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function U8(){const[t,e]=N.useState({}),{arePremovesAllowed:n,boardOrientation:r,boardWidth:i,currentPosition:s,id:o,premoves:a,showBoardNotation:l}=Qi(),c=N.useMemo(()=>{const h=[];return n?(a.forEach((d,f)=>{const{sourceSq:_,targetSq:y,piece:w}=d,C=h.find(S=>{var E;return S.piece===w&&((E=S.premovesRoute.at(-1))===null||E===void 0?void 0:E.targetSq)===_});C?C.premovesRoute.push({sourceSq:_,targetSq:y,index:f}):h.push({piece:w,premovesRoute:[{sourceSq:_,targetSq:y,index:f}]})}),h):[]},[a]);return m.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((h,d)=>m.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((f,_)=>{const y=r==="black"?nc[7-_]+(d+1):nc[_]+(8-d),w=_%2===d%2?"white":"black",C=a.find(E=>E.sourceSq===y||E.targetSq===y),S=c.filter(({premovesRoute:E})=>{var R;return((R=E.at(-1))===null||R===void 0?void 0:R.targetSq)===y}).sort((E,R)=>{var M,V;return((M=R.premovesRoute.at(-1))===null||M===void 0?void 0:M.index)-((V=E.premovesRoute.at(-1))===null||V===void 0?void 0:V.index)}).at(0);return m.jsxs(F8,Object.assign({square:y,squareColor:w,setSquares:e,squareHasPremove:!!C},{children:[!C&&s[y]&&m.jsx(RS,{piece:s[y],square:y,squares:t}),S&&m.jsx(RS,{isPremovedPiece:!0,piece:S.piece,square:y,squares:t}),l&&m.jsx(b9,{row:d,col:_})]}),`${_}${d}`)})}),d.toString()))}))}const B8=()=>{const{arrows:t,newArrow:e,boardOrientation:n,boardWidth:r,customArrowColor:i}=Qi(),s=[...t,e].filter(Boolean);return m.jsx("svg",Object.assign({width:r,height:r,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((o,a)=>{const[l,c,h]=o;if(l===c)return null;const d=ny(n,r,l),f=ny(n,r,c);let _=r/32;const y=a===t.length;t.some(R=>R[0]!==l&&R[1]===c)&&!y&&(_=r/16);const w=f.x-d.x,C=f.y-d.y,S=Math.hypot(C,w),E={x:d.x+w*(S-_)/S,y:d.y+C*(S-_)/S};return m.jsxs(N.Fragment,{children:[m.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:m.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:h??i})})),m.jsx("line",{x1:d.x,y1:d.y,x2:E.x,y2:E.y,opacity:y?"0.5":"0.65",stroke:h??i,strokeWidth:y?.9*r/40:r/40,markerEnd:`url(#arrowhead-${a})`})]},`${l}-${c}${y?"-active":""}`)})}))};function $8({option:t}){const[e,n]=N.useState(!1),{boardWidth:r,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:l,promoteFromSquare:c,promoteToSquare:h,promotionDialogVariant:d}=Qi(),f=()=>{switch(t[1]){case"Q":return s.backgroundColor;case"R":return o.backgroundColor;case"N":return d==="default"?o.backgroundColor:s.backgroundColor;case"B":return d==="default"?s.backgroundColor:o.backgroundColor}};return m.jsx("div",Object.assign({onClick:()=>{l(t,c??void 0,h??void 0)&&a(c,h,t,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?m.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:r/8,isDragging:!1})})):m.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:r/8,height:r/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:m.jsx("g",{children:i[t]})}))}))}function z8(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:n,promoteToSquare:r}=Qi(),i=(r==null?void 0:r[1])==="1"?"b":"w",s=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=ny(t,e,r||"a8");return m.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[n]),title:"Choose promotion piece"},{children:s.map(l=>m.jsx($8,{option:l},l))}))}const W8={whiteKing:m.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:m.jsx("g",{children:m.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function H8({children:t}){try{return m.jsx(m.Fragment,{children:t})}catch(e){return console.log(e),m.jsx(OA,{showError:!0})}}function OA({showError:t=!1}){return m.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[m.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:W8.whiteKing})),t&&m.jsx("h1",{children:"Something went wrong"})]}))}function q8(){const t=N.useRef(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:r,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:o}=Qi();return N.useEffect(()=>{function a(l){t.current&&!t.current.contains(l.target)&&n()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?m.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:m.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},K8(e)),o)},{children:[m.jsx(U8,{}),m.jsx(B8,{}),s&&m.jsxs(m.Fragment,{children:[m.jsx("div",{onClick:()=>{i(!1),r==null||r()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),m.jsx(z8,{})]})]}))})):m.jsx(OA,{})}const K8=t=>({cursor:"default",height:t,width:t});var Ls;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Ls||(Ls={}));class G8{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function Q8(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function Y8(t,e,n,r,i){if(!i)return!1;const s=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<i.length;++o){const a=i[o];if(a&&(a.start==null||s>=a.start)&&(a.end==null||s<=a.end))return!0}return!1}const X8={Left:1},J8={Left:0};function mg(t){return t.button===void 0||t.button===J8.Left}function Z8(t){return t.buttons===void 0||(t.buttons&X8.Left)===0}function DA(t){return!!t.targetTouches}const e$=1;function t$(t){const e=t.nodeType===e$?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function n$(t,e){if(t.targetTouches.length===1)return Xd(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return Xd(t.touches[0])}function Xd(t,e){return DA(t)?n$(t,e):{x:t.clientX,y:t.clientY}}const AS=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Bl={[Ls.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Ls.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Ls.keyboard]:{keydown:"keydown"}};class vu{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(xe(!vu.isSetUp,"Cannot have two Touch backends at the same time."),vu.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(vu.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,i=!1){const s=AS?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Bl[o][n];a&&e.addEventListener(a,r,s)})}removeEventListener(e,n,r,i=!1){const s=AS?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Bl[o][n];a&&e.removeEventListener(a,r,s)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const i=s=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(s.type){case Bl.mouse.move:o={x:s.clientX,y:s.clientY};break;case Bl.touch.move:var a,l;o={x:((a=s.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((l=s.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const c=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,h=c&&n.contains(c);if(c===n||h)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&t$(s)},this.handleTopMoveStartCapture=i=>{mg(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!mg(i))return;const s=Xd(i);s&&(DA(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!mg(i))return;const s=i.type===Bl.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,l=Xd(i,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&Y8(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&Q8(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const h=(o||[]).map(y=>this.targetNodes.get(y)).filter(y=>!!y),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,h):this.document.elementsFromPoint(l.x,l.y),f=[];for(const y in d){if(!d.hasOwnProperty(y))continue;let w=d[y];for(w!=null&&f.push(w);w;)w=w.parentElement,w&&f.indexOf(w)===-1&&f.push(w)}const _=f.filter(y=>h.indexOf(y)>-1).map(y=>this._getDropTargetId(y)).filter(y=>!!y).filter((y,w,C)=>C.indexOf(y)===w);if(a)for(const y in this.targetNodes){const w=this.targetNodes.get(y);if(c&&w&&w.contains(c)&&_.indexOf(y)===-1){_.unshift(y);break}}_.reverse(),this.actions.hover(_,{clientOffset:l})},this._getDropTargetId=i=>{const s=this.targetNodes.keys();let o=s.next();for(;o.done===!1;){const a=o.value;if(i===this.targetNodes.get(a))return a;o=s.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Z8(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new G8(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ls.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ls.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ls.keyboard)}}const r$=function(e,n={},r={}){return new vu(e,n,r)},i$=N.createContext({isCustomDndProviderSet:!1}),s$=({children:t})=>m.jsx(m.Fragment,{children:t}),o$=({customDndBackend:t,customDndBackendOptions:e,children:n})=>{const[r,i]=N.useState(),[s,o]=N.useState(!1),[a,l]=N.useState(!1),{isCustomDndProviderSet:c}=N.useContext(i$);N.useEffect(()=>{l("ontouchstart"in window),o(!0),i(window)},[]);const h=c?s$:HB;return s?r?m.jsx(h,Object.assign({backend:t||(a?r$:j8),context:r,options:t?e:void 0},{children:n})):m.jsx(m.Fragment,{children:n}):null};function a$({boardContainer:t}){const{boardWidth:e,chessPieces:n,id:r,snapToCursor:i,allowDragOutsideBoard:s}=Qi(),o=p8(f=>({item:f.getItem(),clientOffset:f.getClientOffset(),sourceClientOffset:f.getSourceClientOffset(),isDragging:f.isDragging()})),{isDragging:a,item:l,clientOffset:c,sourceClientOffset:h}=o,d=N.useCallback((f,_)=>{if(!f||!_)return{display:"none"};let{x:y,y:w}=i?f:_;const C=e/8/2;if(i&&(y-=C,w-=C),!s){const{left:E,top:R}=t,M=E-C,V=R-C,H=E+e-C,v=R+e-C;y=Math.max(M,Math.min(y,H)),w=Math.max(V,Math.min(w,v))}const S=`translate(${y}px, ${w}px)`;return{transform:S,WebkitTransform:S,touchAction:"none"}},[e,s,i,t]);return a&&l.id===r?m.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:m.jsx("div",Object.assign({style:d(c,h)},{children:typeof n[l.piece]=="function"?n[l.piece]({squareWidth:e/8,isDragging:!0}):m.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:m.jsx("g",{children:n[l.piece]})}))}))})):null}const l$=N.forwardRef((t,e)=>{const{customDndBackend:n,customDndBackendOptions:r,onBoardWidthChange:i}=t,s=m9(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=N.useState(t.boardWidth),l=N.useRef(null),c=N.useRef(null),[h,d]=N.useState({left:0,top:0}),f=N.useMemo(()=>{var _;return(_=l.current)===null||_===void 0?void 0:_.getBoundingClientRect()},[l.current]);return N.useEffect(()=>{o&&(i==null||i(o))},[o]),N.useEffect(()=>{d({left:f!=null&&f.left?f==null?void 0:f.left:0,top:f!=null&&f.top?f==null?void 0:f.top:0})},[f]),N.useEffect(()=>{var _;if(t.boardWidth===void 0&&(!((_=l.current)===null||_===void 0)&&_.offsetWidth)){const y=new ResizeObserver(()=>{var w;a((w=l.current)===null||w===void 0?void 0:w.offsetWidth)});return y.observe(l.current),()=>{y.disconnect()}}},[l.current]),m.jsx(H8,{children:m.jsxs("div",Object.assign({ref:c,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[m.jsx("div",{ref:l,style:{width:"100%"}}),m.jsx(o$,Object.assign({customDndBackend:n,customDndBackendOptions:r},{children:o&&m.jsxs(x9,Object.assign({boardWidth:o},s,{ref:e},{children:[m.jsx(a$,{boardContainer:h}),m.jsx(q8,{})]}))}))]}))})});function u$(){const t=N.useMemo(()=>new g9,[]),[,e]=N.useState(0),n=(r,i)=>t.move({from:r,to:i,promotion:"q"})?(e(o=>o+1),!0):!1;return m.jsxs("div",{className:"mx-auto max-w-xl p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Chess"}),m.jsx(l$,{position:t.fen(),onPieceDrop:n,boardWidth:480}),m.jsx("p",{className:"mt-2",children:t.isCheckmate()?"Checkmate!":t.isDraw()?"Draw":""})]})}function ly(){return Array.from({length:4},()=>Array(4).fill(0))}function $l(t){const e=[];for(let i=0;i<4;i++)for(let s=0;s<4;s++)t[i][s]||e.push([i,s]);if(!e.length)return t;const[n,r]=e[Math.floor(Math.random()*e.length)];return t[n][r]=Math.random()<.9?2:4,t}function PS(t){const n=ly();for(let r=0;r<4;r++)for(let i=0;i<4;i++)n[i][3-r]=t[r][i];return n}function c$(t){const e=t.filter(r=>r);for(let r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,e[r+1]=0);const n=e.filter(r=>r);for(;n.length<4;)n.push(0);return n}function h$(){const{user:t}=Yi(),[e,n]=N.useState(()=>$l($l(ly()))),[r,i]=N.useState(0);function s(a){let l=e.map(h=>h.slice());for(let h=0;h<a;h++)l=PS(l);const c=JSON.stringify(l);for(let h=0;h<4;h++)l[h]=c$(l[h]);for(let h=0;h<(4-a)%4;h++)l=PS(l);if(JSON.stringify(l)!==c){$l(l),n(l);const h=Math.max(...l.flat());i(d=>Math.max(d,h))}}N.useEffect(()=>{const a=l=>{l.key==="ArrowLeft"&&s(0),l.key==="ArrowUp"&&s(1),l.key==="ArrowRight"&&s(2),l.key==="ArrowDown"&&s(3)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)});const o=async()=>{t&&(await fl({uid:t.uid,displayName:t.displayName||t.email,gameKey:"2048",score:r}),alert("Score submitted!"))};return m.jsxs("div",{className:"mx-auto max-w-sm p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Brain Puzzles – 2048"}),m.jsx("div",{className:"grid grid-cols-4 gap-2 bg-gray-200 p-2 rounded-2xl",children:e.map((a,l)=>a.map((c,h)=>m.jsx("div",{className:"h-16 flex items-center justify-center rounded-lg bg-white text-lg font-bold",children:c||""},l+"-"+h)))}),m.jsxs("div",{className:"mt-3 flex gap-2",children:[m.jsx("button",{className:"border rounded px-3 py-2",onClick:()=>n($l($l(ly()))),children:"Reset"}),m.jsxs("button",{className:"border rounded px-3 py-2",onClick:o,children:["Submit best: ",r]})]}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Use arrow keys."})]})}function kS(){return Array.from({length:6},()=>Array(7).fill(0))}function d$(){const[t,e]=N.useState(kS()),[n,r]=N.useState(1),[i,s]=N.useState(0),o=l=>{if(i)return;const c=t.map(h=>h.slice());for(let h=5;h>=0;h--)if(!c[h][l]){c[h][l]=n;break}e(c),a(c,n)?s(n):r(n===1?2:1)};function a(l,c){var _;const f=[[1,0],[0,1],[1,1],[1,-1]];for(let y=0;y<6;y++)for(let w=0;w<7;w++)if(l[y][w]===c)for(const[C,S]of f){let E=1;for(;E<4&&((_=l[y+C*E])==null?void 0:_[w+S*E])===c;)E++;if(E===4)return!0}return!1}return m.jsxs("div",{className:"mx-auto max-w-md p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Strategy – Connect Four"}),m.jsxs("p",{className:"mb-2",children:["Player ",i||n,"'s turn ",i?"(winner!)":""]}),m.jsxs("div",{className:"grid grid-cols-7 gap-1 bg-blue-200 p-1 rounded-xl",children:[t[0].map((l,c)=>m.jsx("button",{className:"h-8 text-xs border rounded bg-white",onClick:()=>o(c),children:"Drop"},"c"+c)),t.map((l,c)=>l.map((h,d)=>m.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 bg-blue-500 flex items-center justify-center rounded-full",children:m.jsx("div",{className:`h-10 w-10 sm:h-12 sm:w-12 rounded-full ${h===0?"bg-white":h===1?"bg-red-500":"bg-yellow-400"}`})},c+"-"+d)))]}),m.jsx("div",{className:"mt-3 flex gap-2",children:m.jsx("button",{className:"border rounded px-3 py-2",onClick:()=>{e(kS()),r(1),s(0)},children:"Reset"})})]})}const NS=[{word:"JAVASCRIPT",category:"Programming",difficulty:"Medium",hint:"A popular web programming language"},{word:"RAINBOW",category:"Nature",difficulty:"Easy",hint:"Appears after rain with sunshine"},{word:"TELESCOPE",category:"Science",difficulty:"Hard",hint:"Used to observe distant objects"},{word:"BUTTERFLY",category:"Animals",difficulty:"Medium",hint:"Colorful insect that transforms from a caterpillar"},{word:"MOUNTAIN",category:"Geography",difficulty:"Easy",hint:"Large natural elevation of land"},{word:"SYMPHONY",category:"Music",difficulty:"Hard",hint:"Large orchestral composition"},{word:"KITCHEN",category:"House",difficulty:"Easy",hint:"Room where food is prepared"},{word:"ALGORITHM",category:"Programming",difficulty:"Hard",hint:"Step-by-step procedure for solving problems"},{word:"BICYCLE",category:"Transportation",difficulty:"Medium",hint:"Two-wheeled vehicle powered by pedaling"},{word:"LIBRARY",category:"Education",difficulty:"Easy",hint:"Place where books are stored and borrowed"}];function f$(){const{user:t}=Yi(),[e,n]=N.useState(""),[r,i]=N.useState(new Set),[s,o]=N.useState(0),[a,l]=N.useState(!1),[c,h]=N.useState(!1),[d,f]=N.useState(!1),[_,y]=N.useState(0),[w,C]=N.useState(0),[S,E]=N.useState(null),R=6,M="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),V=()=>{const P=NS[Math.floor(Math.random()*NS.length)];n(P.word),E(P),i(new Set),o(0),l(!1),h(!1),f(!1)};N.useEffect(()=>{V()},[]),N.useEffect(()=>{if(!e)return;const P=new Set(e.split(""));if([...r].filter(A=>e.includes(A)).length===P.size&&e){l(!0);const A=H();y(pe=>pe+A),C(pe=>pe+1)}s>=R&&(h(!0),C(0))},[r,s,e]);const H=()=>{const P={Easy:10,Medium:20,Hard:30}[S==null?void 0:S.difficulty]||10,O=d?5:0,A=s*2;return Math.max(1,P-O-A)},v=P=>{if(r.has(P)||a||c)return;const O=new Set(r);O.add(P),i(O),e.includes(P)||o(A=>A+1)},T=()=>e.split("").map(P=>r.has(P)?P:"_").join(" "),x=async()=>{!t||_===0||(await fl({uid:t.uid,displayName:t.displayName||t.email,gameKey:"word-game",score:_}),alert(`Score of ${_} submitted!`),y(0),C(0))},b=["","😵","😵‍💫","🤕","😖","😭","💀"];return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:m.jsxs("div",{className:"mx-auto max-w-4xl p-4 space-y-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"🔤 Word Guessing Game"}),m.jsx($f,{gameKey:"word-game"}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-center",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-green-600",children:w}),m.jsx("span",{className:"text-sm text-gray-600",children:"Streak"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-blue-600",children:_}),m.jsx("span",{className:"text-sm text-gray-600",children:"Session Score"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl",children:b[s]}),m.jsxs("span",{className:"text-sm text-gray-600",children:["Wrong: ",s,"/",R]})]})]})}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-6",children:[S&&m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S.difficulty==="Easy"?"bg-green-100 text-green-700":S.difficulty==="Medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:S.difficulty}),m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:S.category})]}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Points: ",H()]})]}),m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"text-4xl font-mono font-bold tracking-widest text-gray-800 bg-gray-50 p-6 rounded-lg",children:T()})}),d&&S&&m.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-yellow-600 text-sm font-medium",children:"💡 Hint:"})}),m.jsx("p",{className:"text-yellow-800 mt-1",children:S.hint})]}),a&&m.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded",children:m.jsxs("p",{className:"text-green-800 font-semibold",children:["🎉 Congratulations! You won! +",H()," points"]})}),c&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:m.jsxs("p",{className:"text-red-800 font-semibold",children:["💀 Game Over! The word was: ",m.jsx("span",{className:"font-bold",children:e})]})}),m.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[!d&&!a&&!c&&m.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:()=>f(!0),children:"💡 Show Hint (-5 pts)"}),m.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:V,children:"🎲 New Word"}),_>0&&m.jsxs("button",{className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:x,children:["🏆 Submit Score (",_," pts)"]})]}),m.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-9 gap-2",children:M.map(P=>{const O=r.has(P),A=O&&e.includes(P),pe=O&&!e.includes(P);return m.jsx("button",{className:`p-3 rounded-lg font-bold transition-all duration-200 ${A?"bg-green-500 text-white":pe?"bg-red-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} ${a||c||O?"cursor-not-allowed opacity-50":"hover:scale-105"}`,onClick:()=>v(P),disabled:a||c||O,children:P},P)})})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsx(zf,{gameKey:"word-game"})})]})]})})}const OS=[{emojis:"🍕🚗",answer:"PIZZA DELIVERY",category:"Food & Transport",difficulty:"Easy",hint:"Food brought to your door"},{emojis:"🎬🍿",answer:"MOVIE THEATER",category:"Entertainment",difficulty:"Easy",hint:"Where you watch films with snacks"},{emojis:"🌙⭐🛌",answer:"GOOD NIGHT",category:"Daily Life",difficulty:"Medium",hint:"What you say before sleeping"},{emojis:"🔥💃",answer:"HOT DANCE",category:"Music & Dance",difficulty:"Medium",hint:"Energetic dancing performance"},{emojis:"🏠🔑",answer:"HOUSE KEY",category:"Home",difficulty:"Easy",hint:"What unlocks your door"},{emojis:"🎮👾🕹️",answer:"VIDEO GAME",category:"Gaming",difficulty:"Easy",hint:"Electronic entertainment"},{emojis:"🌈☔🌤️",answer:"RAINBOW AFTER RAIN",category:"Weather",difficulty:"Hard",hint:"Beautiful natural phenomenon"},{emojis:"💍💒👰",answer:"WEDDING",category:"Life Events",difficulty:"Medium",hint:"Marriage ceremony"},{emojis:"🎂🎉🎈",answer:"BIRTHDAY PARTY",category:"Celebration",difficulty:"Easy",hint:"Annual celebration of your birth"},{emojis:"🏃‍♂️💨🏁",answer:"RUNNING RACE",category:"Sports",difficulty:"Medium",hint:"Athletic competition on foot"},{emojis:"📚👨‍🎓🎓",answer:"GRADUATION",category:"Education",difficulty:"Medium",hint:"Completing your studies"},{emojis:"🌍✈️🧳",answer:"WORLD TRAVEL",category:"Travel",difficulty:"Hard",hint:"Exploring different countries"}];function p$(){const{user:t}=Yi(),[e,n]=N.useState(null),[r,i]=N.useState(""),[s,o]=N.useState(!1),[a,l]=N.useState(!1),[c,h]=N.useState(0),[d,f]=N.useState(0),[_,y]=N.useState(0),[w,C]=N.useState("playing"),S=3,E=()=>{const v=OS[Math.floor(Math.random()*OS.length)];n(v),i(""),o(!1),l(!1),y(0),C("playing")};N.useEffect(()=>{E()},[]);const R=()=>{if(!e)return 0;const v={Easy:15,Medium:25,Hard:40}[e.difficulty]||15,T=a?5:0,x=_*3;return Math.max(1,v-T-x)},M=()=>{if(!e||!r.trim())return;const v=r.toUpperCase().trim(),T=e.answer.toUpperCase().trim();if(v===T){C("correct");const x=R();h(b=>b+x),f(b=>b+1)}else y(x=>x+1),_+1>=S&&(o(!0),C("revealed"),f(0))},V=async()=>{!t||c===0||(await fl({uid:t.uid,displayName:t.displayName||t.email,gameKey:"emoji-guess",score:c}),alert(`Score of ${c} submitted!`),h(0),f(0))},H=v=>{v.key==="Enter"&&w==="playing"&&M()};return e?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50",children:m.jsxs("div",{className:"mx-auto max-w-4xl p-4 space-y-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-pink-600 to-orange-600 bg-clip-text text-transparent",children:"😄 Emoji Guessing Game"}),m.jsx($f,{gameKey:"emoji-guess"}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-center",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-pink-600",children:d}),m.jsx("span",{className:"text-sm text-gray-600",children:"Streak"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-2xl font-bold text-orange-600",children:c}),m.jsx("span",{className:"text-sm text-gray-600",children:"Session Score"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:[_,"/",S]}),m.jsx("span",{className:"text-sm text-gray-600",children:"Attempts"})]})]})}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.difficulty==="Easy"?"bg-green-100 text-green-700":e.difficulty==="Medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:e.difficulty}),m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:e.category})]}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Points: ",R()]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-8xl mb-4 p-6 bg-gray-50 rounded-2xl",children:e.emojis}),m.jsx("p",{className:"text-lg text-gray-600",children:"Guess what these emojis represent!"})]}),a&&m.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-yellow-600 text-sm font-medium",children:"💡 Hint:"})}),m.jsx("p",{className:"text-yellow-800 mt-1",children:e.hint})]}),w==="playing"&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("input",{type:"text",className:"w-full p-4 text-lg border-2 border-gray-300 rounded-lg focus:border-pink-500 focus:outline-none transition-colors",placeholder:"Enter your guess...",value:r,onChange:v=>i(v.target.value),onKeyPress:H}),m.jsxs("div",{className:"flex gap-2 justify-center",children:[m.jsx("button",{className:"bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",onClick:M,disabled:!r.trim(),children:"🎯 Submit Guess"}),!a&&m.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200",onClick:()=>l(!0),children:"💡 Show Hint (-5 pts)"})]})]}),w==="correct"&&m.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded",children:[m.jsxs("p",{className:"text-green-800 font-semibold",children:["🎉 Correct! The answer was: ",m.jsx("span",{className:"font-bold",children:e.answer})]}),m.jsxs("p",{className:"text-green-700 mt-1",children:["+",R()," points"]})]}),s&&w==="revealed"&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:m.jsxs("p",{className:"text-red-800 font-semibold",children:["😔 Out of attempts! The answer was: ",m.jsx("span",{className:"font-bold",children:e.answer})]})}),_>0&&_<S&&w==="playing"&&m.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded",children:m.jsxs("p",{className:"text-orange-800",children:["❌ Try again! ",S-_," attempts remaining"]})}),m.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[m.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:E,children:"🎲 New Puzzle"}),w!=="playing"&&!s&&m.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:()=>o(!0),children:"👁️ Show Answer"}),c>0&&m.jsxs("button",{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",onClick:V,children:["🏆 Submit Score (",c," pts)"]})]})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:m.jsx(zf,{gameKey:"emoji-guess"})})]})]})}):m.jsx("div",{children:"Loading..."})}function DS(){return m.jsxs("div",{style:{textAlign:"center",marginTop:"4rem"},children:[m.jsx("h1",{children:"404 - Page Not Found"}),m.jsx("p",{children:"Oops! The page you are looking for doesn’t exist."}),m.jsx(Si,{to:"/",children:"Go Back Home"})]})}const g$=N.createContext();function m$({children:t}){const[e,n]=N.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});N.useEffect(()=>{const s=window.document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const i={theme:e,toggleTheme:()=>{n(s=>s==="light"?"dark":"light")},isDark:e==="dark"};return m.jsx(g$.Provider,{value:i,children:t})}const LA=N.createContext(null),Yi=()=>N.useContext(LA);function y$({children:t}){const[e,n]=N.useState(void 0);N.useEffect(()=>YC(lo,n),[]);const r={user:e,loading:e===void 0,signInEmail:(i,s)=>BL(lo,i,s),registerEmail:async(i,s,o)=>{const a=await UL(lo,i,s);return o&&await zL(a.user,{displayName:o}),a},signInGoogle:()=>hM(lo,sU),signOut:()=>XC(lo)};return m.jsx(LA.Provider,{value:r,children:t})}const _$=QO([{path:"/",element:m.jsx(oU,{}),errorElement:m.jsx(DS,{}),children:[{path:"login",element:m.jsx(aU,{})},{path:"register",element:m.jsx(lU,{})},{path:"riddles",element:m.jsx(hU,{})},{path:"ai-riddles",element:m.jsx(W6,{})},{path:"trivia",element:m.jsx(H6,{})},{path:"chess",element:m.jsx(u$,{})},{path:"brain-puzzles",element:m.jsx(h$,{})},{path:"strategy",element:m.jsx(d$,{})},{path:"word-game",element:m.jsx(f$,{})},{path:"emoji-guess",element:m.jsx(p$,{})},{path:"*",element:m.jsx(DS,{})}]}]);QI(document.getElementById("root")).render(m.jsx(m$,{children:m.jsx(y$,{children:m.jsx(iD,{router:_$})})}));
